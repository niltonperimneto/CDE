オプションの統合方法この章で説明する共通デスクトップ環境のコンポーネントによって、特殊な
タスクを実行するためにデスクトップが提供するサービスを使用することができます。オプションの統合方法 <$startrange>統合オプション統合のレベルオプション <
$startrange>この節で説明するコンポーネントの統合方法以外に、で概説
する基本的な統合方法に関する指示にも従ってください。で説明するコンポーネント
は、アプリケーションを高度にデスクトップと統合できるようにするのに重要です。オプションの統合方法の詳細については、プログラマーズ・ガイドを参照してください。共通デスクトップ環境Motifコントロール・ウィジェット共通デスクトップ環境Motifウィジェット共通デスクトップ環境 <$startrange>コントロール・ウィジェットは、共通デスクトップ環境Motifに同等の機能を提供する
ことにより、OPEN LOOKOPEN LOOKおよびMicrosoft WindowsMicrosoft
Windowsのアプリケーションを、共通デスクトップ環境へ移植しやくすくするよう設計
されています。共通デスクトップ環境Motifウィジェット・ライブラリlibDtWidgetには、すべての共通デスクトップ環境アプリケーション
に共通する機能を提供するのに使用するウィジェットと関数が含まれています。
ウィジェットが提供するものは次のとおりです。テキスト・フィールドおよび矢印
ボタン・ウィジェット(DtSpinBox)テキスト・フィールドおよび矢印ボタン・ウィジェット
(DtSpinBox)DtSpinBox共通デスクトップ環境ウィジェットDtSpinBoxテキスト・フィールドおよび矢印ボタン・ウィジェット
(DtSpinBox)の例テキスト・フィールドおよびリスト・
ボックス・ウィジェット(DtComboBox)テキスト・フィールドおよびリスト・ボックス・ウィジェット
(DtComboBox)DtComboBox共通デスクトップ環境ウィジェットDtComboBoxテキスト・フィールドおよびリスト・ボックス・ウィジェット
(DtComboBox)の例メニュー・ボタン・ウィジェット
(DtMenuButton)メニュー・ボタン・ウィジェット(DtMenuButton)DtMenuButton共通デスクトップ環境ウィジェットDtMenuButtonメニュー・ボタン・ウィジェット(DtMenuButton)
の例共通デスクトップ環境のMotifウィジェット・ライブラリlibDtWidgetは、共通デスクトップ環境のアプリケーションと
OPEN LOOKアプリケーションとの間の操作性をサポートします。つまり、カット、コピー、
ペースト、マウス・ボタン機能など、OPEN LOOKが行うのと同じ方法で動作する
アプリケーションを作成することができます。共通デスクトップ環境は、MotifウィジェットMotifすべてのMotifウィジェットをサポートします。共通デスクトップ環境コントロール・ウィジェットウィジェット名説明DtSpinBox数値を増減するか、ブラウズしてテキスト
文字列のリストから選択するためのコントロールを持つTextFieldウィジェットDtComboBoxTextFieldと、TextFieldに有効な選択項目のリストを提供するポップアップ・
リスト・ウィジェットとの組み合わせDtMenuButtonメニュー・バー、メニュー区画（プルダウン・
メニュー、ポップアップ・メニュー、オプション・メニュー）以外のXmCascadeButtonウィジェットの機能を階層化するメニュー機能を
提供するコマンド・ウィジェットライブラリおよびヘッダ・ファイル共通デスクトップ環境
ウィジェットライブラリおよびヘッダ・ファイルライブラリlibDtWidgetは、DtSpinBox、DtComboBox、DtMenuButtonウィジェットへの
アクセスを提供します。 これらのウィジェットのlibDtWidgetヘッダ・ファイルは次のとおりです。Dt/SpinBox.hDt/ComboBox.hDt/MenuButton.hデモ・プログラム共通デスクトップ環境ウィジェットデモ・プログラムデモ・プログラム共通デスクトップ環境Motifコントロール・ウィジェットのデモは、/usr/dt/examples/dtwidgetにあります。デモの詳細については、READMEファイルを参照してください。関連マニュアル共通デスクトップ環境Motifコントロール・ウィジェットの詳細については、関連
するマニュアル・ページとプログラマーズ・ガイドを参照して
ください。ウィジェット共通デスクトップ環境 <$endrange>データ型の作成アプリケーションの基本的な統合方法を実行するとき、データ型を定義できます。
この節では、データ型作成の別の面、つまりアクションおよびデータ型のデータベース
から情報を抽出する方法に焦点を当てて説明します。データ型を作成すると、従来のUNIXUNIXファイル・システムが提供するファイルとデータの属性が拡張されます。この拡張
には、型や属性管理も含まれます。アプリケーションが外部ソースからデータを受信し
て動作する場合は、データ型作成APIを使用します。たとえば、アプリケーションで
アイコンを表示したり、システム全体に定義されているアクションを実行したりする
必要があるかもしれません。データ型作成は、次の２つの部分から成ります。データ型の作成２つの部分データ基準およびデータ属性を格納
するデータベースデータベースを照会するルーチンの集まりデータ型作成システムは、基準のセットに基づいたファイルまたはバイト・ベクタ
の型を決定します。基準には名前、アクセス権、シンボリック・リンク値、内容が含まれ
ます。型に関連付けられた属性は、説明、グラフィカルに説明を示すアイコン、説明に
適用されるアクションを含んだ、ユーザが見ることができるインタフェースを記述します。
また、属性はデータが準拠する互換フォーマットに名前をつけるためにも存在します。共通デスクトップ環境のファイル・マネージャおよび共通デスクトップ環境の
メールのアタッチメント・ウィンドウは、データ型作成によってファイルに関連する
アイコンとアクションを決定します。たとえばC ファイルfilename.cについて、ファイル・
マネージャは、.cという拡張子を使用してファイルのデータ型
C_SOURCEを判別します。それからC_SOURCEを使用して、filename.cに使用できるアイコン
のアイコン・ファイル名を決定します。データベースの読み込みデータベース読み込みデータ型の作成データベースの読み込みこの節では、アクションおよびデータ型データベースを読み込むAPIについて説明
します。このAPIのシンタクスと、開発者が定義する任意の共通デスクトップ環境データ
ベースについては、/usr/dt/man/man4ディレクトリにある
マニュアル・ページで説明しています。外部データベースを読み込むAPIは、次の２つの関数から成ります。DtDbLoad()DtDbReloadNotify()DtDbLoad()はアクションおよびデータ型データベースを
読み込みます。データベース・ファイルを検索するための一連のディレクトリを決定し、
見つけた.dtをデータベースに読み込みます。アプリケーションは、
アクションおよびデータ型データベースを照会する任意のルーチンを起動する前に、DtDbLoad()を起動する必要があります。DtDbLoad()データベースDtDbLoad()DtDbReLoadNotify()を使用して、アクションおよびデータ
型データベースの再読み込みイベントの通知を要求してください。アプリケーションが、
データベース再読み込みメッセージを受け取ることを登録します。DtDbReLoadNotify()データベースDtDbReLoadNotify()アプリケーションは、データベースが変更されたら必ずデータベースを、再読み
込みしなければなりません。アプリケーションを再起動しなくても、更新があったこと
をエンド・ユーザにわかるようにするためです。データベースの照会データベース照会関数データ型の作成データベース照会関数データ・オブジェクトの属性を調べるには、まずオブジェクトの型を決定し、その
型に適切な属性値を求めてください。データベース照会関数により、データ型および
属性の検索、メモリの解放、データベースの読み込みと解放などのオペレーションを実行
できます。これらの関数については、プログラマーズ・ガイドおよびman3ディレクトリにあるマニュアル・ページで説明してい
ます。ライブラリおよびヘッダ・ファイルデータ型の作成ライブラリおよびヘッダ・ファイルデスクトップ・サービス・ライブラリlibDtSvcは、データ型
作成を含む多くのデスクトップAPIへのアクセスを提供します。データ型作成APIに
アクセスするには、Dt/Dt.hおよびDt/Dts.hヘッダ・ファイルを取り込んでください。アプリケーションが任意のデータ型作成APIを使用する場合、またはアクション
およびデータ型データベースを読み込む場合は、まずDtInitialize()DtInitialize()またはDtAppInitialize()DtAppInitialize()のいずれかを呼び出して、libDtSvcライブラリを初期化してください。詳細については、DtInitialize(3)またはDtAppInitialize(3)のマニュアル・ページを参照してく
ださい。デモ・プログラムデータ型の作成デモ・プログラムデモ・プログラムデータ型作成のデモは、/usr/dt/examples/dtdtsにありま
す。デモの詳細については、READMEファイルを参照してください。関連マニュアルデータ型作成の詳細については、関連するマニュアル・ページとプログラマーズ・ガイドを参照してください。アクションの起動アクション起動APIにより、アプリケーションは、ファイルまたはバッファの
引き数上でデスクトップのアクションを起動できます。アクション引き数のClass、Type、Mode、Numberに基づいて、ファイルまたはバッファに対して適切な
アクションを選択します。 たとえば[開く]アクションは、GIFファイルに対しては
イメージ・ビューアを、複雑なドキュメントに対してはワープロを、通常のASCII
ファイルに対しては単純なテキスト・エディタを起動します。アプリケーションは、
アクションの選択や起動の詳細に関与する必要がありません。アクション起動APIを使用すると、アプリケーションは、デスクトップの他の部分
と同じ機能を使用することができます。ユーザにとっては、デスクトップの動作が一定
していることになります。libDtSvcライブラリのアクション関数は、デスクトップの
アクション（[開く]や[印刷]など）をファイルまたはバッファに対して、起動する方法
を提供します。この関数には、アクションの動作を変更できるパラメータが含まれてい
ます。アクション起動APIは、次の関数から構成されます。アクションの起動API