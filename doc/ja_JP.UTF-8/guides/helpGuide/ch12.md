インストール・パッケージの準備この章では、アプリケーションのインストール・パッケージにあるヘルプ・ファイルについて説明します。また、アプリケーションがデスクトップに登録されるときにヘルプ・ファイルが処理される方法についても説明します。概要最終的に製品を準備する段階になったら、すべてのヘルプ・ファイルが適切に作成され、インストールされていることを確認しなければなりません。製品パッケージには、
実行時のヘルプ・ファイル (volume.sdl) およびそのグラフィック・ファイルの両方が入っています。さらに、フロントパネルのヘルプ・ビューアを使用してボリュームの表示を可能にするヘルプ・ファミリ・ファイルを作成することができます。オンライン・ヘルプの配布オンライン・ヘルプは、アプリケーションに完全に統合されるか、スタンドアロン・ヘルプ・ボリュームとして提供されます。完全に統合されたヘルプによって、[ヘルプ]メニューか[ヘルプ]キーを使用して、アプリケーションからヘルプ情報に直接アクセスできます。その一方、スタンドアロン・ヘルプは、デスクトップのヘルプ・ビューアを使用してのみ表示できます。システム管理者は、アプリケーションが統合されたヘルプを提供しない場合や、カスタマイズされた環境で補足的なヘルプ・ボリュームが作成されない場合に、スタンドアロン・ヘルプ・ボリュームをデスクトップに追加するように選択できます。デスクトップにスタンドアロン・ボリュームを追加する手順については、を参照してください。インストール・パッケージの作成インストール・パッケージには、次のヘルプ・ファイルが入っています。実行時のヘルプ・ファイルグラフィック・ファイルヘルプ・ファミリ・ファイル (オプション)アプリケーション・デフォルト・ファイル (オプション)オンライン・ヘルプで使用されている実行時のヘルプ・ファイルとグラフィック・ファイルは、インストール・パッケーシに入っています。ヘルプ・ファミリ・ファイルは、統合されたアプリケーション・ヘルプのオプションです。しかし、アプリケーション・ヘルプをデスクトップのヘルプ・ビューアを使用してブラウズ可能にしたい場合は、ファミリ・ファイルを作成しなければなりません。スタンドアロン・ヘルプ・ボリュームを配布する場合は、ヘルプ・ファミリ・ファイルを作成しなければなりません。を参照してください。アプリケーションのヘルプ・ボリュームに実行リンクがある場合、設計者はアプリケーションのデフォルトのリソース・ファイルに実行別名を定義するようにしてください。このためには、実行別名でリンクを自動的に実行するヘルプ・システムのデフォルトの実行ポリシーを利用します。しかし、ヘルプ・ボリュームが、ヘルプ・ビューアのような別の情報ビューアを使用して独立したボリュームとして表示される場合、ヘルプ・システムは実行リンクが選択された時点で確認ダイアログボックスを表示します。のは、アプリケーションとそのヘルプ・ファイルの典型的なインストール・パッケージを示しています。ヘルプ・ディレクトリは、デフォルトの言語ディレクトリ（C がデフォルトです）がある別のhelpサブディレクトリにグループ化されます。実行時のヘルプ・ファイル、ファミリ・ファイル、およびグラフィック・ファイルは、このディレクトリにあります。アプリケーション・インストール・パッケージアプリケーションが複数の言語でオンライン・ヘルプを提供する場合、各言語を格納するためのlanguageサブディレクトリを作成してください（languageはユーザのLANG環境変数と一致します）。たとえば、英語ユーザ・インタフェースとドイツ語ユーザ・インタフェースの両方を提供するアプリケーションは、英語にはC、ドイツ語にはgerman、というように２つのサブディレクトリに、それぞれ対応するオンライン・ヘルプを保存します。実行時ヘルプ・ファイルDocBook は単一の実行時のヘルプ・ファイルvolume.sdlを作成します。ベース名volumeは、volume.sgmファイルのベース名と同一です。ヘルプ・ビューアは、マスタ・ヘルプ・ファイルに保存されている情報を使用し、関連付けられたグラフィック・ファイルにもアクセスします。DocBook ソフトウェアによって作成されたvolume.sgmや追加のファイルを出荷する必要はありません。グラフィック・ファイルヘルプ・ボリュームがグラフィックを使用している場合、通常、イメージ・ファイルは、便宜上別のディレクトリに保存されます。しかし、volume.sgmファイルと同じ場所に保存するように選択することも可能です。実行時のヘルプ・ファイルには、実際のグラフィック・イメージは入っていません。その代わりに、各グラフィック・ファイルへの位置への「参照」が入っています。DocBook を実行すると、dtdocbookコンパイラは、グラフィックの相対パス名をヘルプ・ボリュームに組み込みます。ヘルプ・ファイルがインストールされると、グラフィック・ファイルは実行時のファイルが作成されたときと同じ相対位置に位置付けられます。そうでない場合は、ヘルプ・ボリュームはグラフィック・ファイルを位置付けることはできません。たとえば、グラフィック・ファイルがvolume.sgmファイルよりひとつ下のレベルにあるgraphicsという名前のサブディレクトリにある場合、インストール・パッケージはその相対位置を確保しておかなければなりません。グラフィック・ファイルは、volume.sdlファイルよりひとつ下のレベルにあるgraphicsという名前のサブディレクトリに位置付けられなければなりません。作成ディレクトリとインストール・パッケージの関係ヘルプ・ファミリ・ファイルヘルプ・ファミリ・ファイル (volume.hf) をオプションとして提供できます。ファミリ・ファイルにはヘルプ・ボリュームについての簡単な記述と著作権情報があります。また、このファイルは、ひとつ以上の関連のあるボリュームをひとつの製品のカテゴリにグループ化するときにも使用されます。デスクトップ・ブラウザ・ボリュームからヘルプ・ボリュームへアクセス可能にしたい場合、インストール・パッケージにファミリ・ファイルを作成しなければなりません。ファミリ・ファイルを作成するには、を参照してください。アプリケーションとそのヘルプの登録デスクトップの統合ユーティリティdtappintegrateは、インストールされたアプリケーション・ファイルと特定のデスクトップ・ディレクトリの間にシンボリック・リンクを作成することによって、アプリケーションとそのヘルプ・ファイルを登録します。アプリケーションの登録によって、ヘルプ・システムが使用するディレクトリ検索パスにヘルプ・ファイルを確実に位置付けることができます。登録によって、ヘルプ・システムの重要な２つの機能が使用可能になります。他のボリュームへのハイパーリンクひとつのヘルプ・ボリュームにあるハイパーリンクは、ボリューム名とボリュームにあるIDだけを使用して、別のヘルプ・ボリュームを参照することができます。転送先ボリュームが登録されている場合、リンクはボリュームをファイル・システムのどこに保存するかを指定する必要はありません。ヘルプ・ファミリのブラウズ「ヘルプ・ファミリ」も登録する場合、ヘルプ・ボリュームはヘルプ・ビューアを使用してブラウズ可能になります。オンライン・ヘルプを登録すると、提供したヘルプにアクセスしやすくなります。設計者とプログラマにとっては、ボリュームの実際の位置を指定しなくても、ボリュームへの参照には、ボリューム名だけを使用すればよいため、より簡単です。ひとつ以上のヘルプ・ボリュームがあるヘルプ・ファミリを登録する場合、フロントパネルの[ヘルプ・ビューア]からの一般的なブラウズにヘルプを使用できるようにします。これによって、アプリケーションを使用せずに、アプリケーション固有のヘルプにアクセスすることができます。また、スタンドアロン・ヘルプを記述している場合は、この方法がヘルプにたどりつく唯一の方法です。スタンドアロン・ヘルプアプリケーションのスタンドアロン・ヘルプ・ボリュームやカスタマイズされた環境は、ヘルプ・システムの開発者用キットを使用して作成できます。ヘルプ・ボリュームをデスクトップ・ブラウザ・ボリュームからアクセス可能にするには、システム管理者は実行時のヘルプ・ファイル、関連付けられたグラフィック、およびファミリ・ファイルを/etc/dt/appconfig/help/languageディレクトリにインストールしてください。実行時のヘルプ・ファイルとそのグラフィック・ファイルは、ヘルプ・ボリュームが作成されたときと同じ相対位置にインストールされなければならないことを忘れないでください。グラフィック・ファイルのインストールを見直すには、を参照してください。アプリケーションの登録時に発生することアプリケーションの登録により、app_root/dt/appconfig/helplanguageにある実行時のヘルプ・ファイルおよびファミリと/etc/dt/appconfig/help/languageディレクトリの間にシンボリック・リンクが作成されます。アプリケーションの登録手順の詳細については、共通デスクトップ環境 上級ユーザおよびシステム管理者ガイドを参照してください。ヘルプ・ボリュームの検索方法ヘルプ・システムはデスクトップ検索パスを使用してヘルプ・ボリュームを位置付けます。ヘルプがアプリケーション内で要求されたり、ヘルプ・ボリュームがコマンド行に指定された場合、ヘルプ・ボリュームは検索パス・ディレクトリのセットをチェックすることによって検索されます。いくつかの環境変数を変更してヘルプ・ボリュームのディレクトリ検索パスをコントロールすることができます。検索パスの指定の詳細については、共通デスクトップ環境 上級ユーザおよびシステム管理者ガイドを参照してください。製品準備チェックリスト次のチェックリストは、製品が適切に準備されていることを確認するのに役立ちます。もちろん、ユーザが行うように製品をテストするのがいちばんいい方法です。設計者の場合最後のバージョンの実行時のヘルプ・ファイルが作成された。次の例は、実行時のファイルの作成の際に推奨するコマンドです。dtdocbook -rvolumedtdocbookvolume-rオプションは、上記のdtdocbookコマンドからファイルを削除します。パーサ・エラーが発生したヘルプ・ボリュームを配布してはいけません。パーサ・エラーが発生すると、dtdocbook はそれらを中間ファイルvolume.logに出力します。すべてのハイパーリンクをテストした。各ハイパーリンクが適切なトピックを表示し、正しいアクションが実行されることを検証します。実行別名が実行リンクに定義された。実行別名は、アプリケーションのアプリケーション・デフォルト・ファイルにあるリソースとして定義されます。実行別名は、実行されるシェル・コマンドと名前とを関連付けます。ヘルプ・ボリュームで実行リンクを使用した場合は、アプリケーション開発者がこれらのリソースをアプリケーション・デフォルト・ファイルに追加するように調整してください。すべてのグラフィックが受け入れ可能である。グラフィックの表示を、さまざまな色、グレースケール、およびモノクロ・ディスプレイでテストしたことを確認してください。製品のインテグレータの場合実行時のファイルがインストールされた。すべてのグラフィックが適切な位置にインストールされた。各グラフィック・ファイルは、DocBook ソフトウェアが実行されたときに.sgmファイルとは相対的な位置にあった.sdlファイルに対しても、同じ相対的な位置にインストールされなければなりません。ヘルプ・ボリュームが登録された。dtappintegrateスクリプトが、インストール・ディレクトリから登録ディレクトリにシンボリック・リンクを作成するために実行された。製品のファミリ・ファイルがインストールおよび登録された。ファミリ・ファイルは、他のヘルプ・ファイルとともにインストールされます。dtappintegrateを実行すると、ファミリ・ファイルのシンボリック・リンクを作成します。ヘルプ・ボリュームのためにファミリ・ファイルを登録するのは任意です。しかし、ファミリ・ファイルを登録しないと、ヘルプ・ボリュームはフロントパネルのヘルプ・ビューアからはアクセスできません。プログラマの場合アプリケーションは次の必須リソースに対して正しい値を設定している。App-class*helpVolume:volumeApp-class*helpOnHelpVolume:help-on-help-volumehelpVolumeリソースは、アプリケーションのためのヘルプ・ボリュームを識別します。helpOnHelpVolumeリソースは、ヘルプ・システムの使用に関するヘルプがあるヘルプ・ボリュームを識別します。実行別名はアプリケーションのデフォルトのリソース・ファイルにある。設計者は、アプリケーションのリソースとして実行別名を定義します。実行別名は、実行するシェル・コマンドと名前とを関連付けます。実行リンクがヘルプ・ボリュームで使用されていた場合は、追加する必要があるリソースを識別していることを設計者が確認するようにしてください。アプリケーションが次のオプションのリソースに対して希望する値を設定している。App-class*DtHelpDialogWidget*onHelpDialog*rows:rowsApp-class*DtHelpDialogWidget*onHelpDialog*columns:columnsApp-class*DtHelpDialogWidget*definitionBox*rows:rowsApp-class*DtHelpDialogWidget*definitionBox*columns:columnsonHelpDialogリソースは、「ヘルプの使い方」を表示するために使用される簡易ヘルプ・ダイアログのサイズを制御します。definitionBoxリソースは、定義リンクに使用される簡易ヘルプ・ダイアログのサイズを制御します。アプリケーションはデフォルトのフォント・リソースを使用するかアプリケーションのデフォルトのリソース・ファイルにフォント・リソースを定義している。ほとんどの場合、アプリケーションはデフォルトのフォント・リソースを使用できます。しかし、カスタム・フォントが使用される場合、デフォルトのリソース・ファイルに定義されていなければなりません。サンプルのフォント・スキーマが/usr/dt/dthelp/fontschemesディレクトリに用意されています。フォント・スキーマの詳細については、を参照してください。