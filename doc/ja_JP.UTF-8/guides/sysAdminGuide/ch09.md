
# アクション作成ツールを使ったアクションとデータ型の作成アクション作成ツール


アクション作成ツールは、次のものを作成します。アクション作成ツール概要dtCreate、「アクション作成ツール」を参照してください

アプリケーションを起動するアクション

アプリケーションのデータ・ファイルのひとつまたは複数のデータ型

アプリケーションのデータ・ファイルを開く、または印刷するためのアクション

アクション作成ツールは、オペレーティング・システムのコマンドとシェル・スクリプトを実行するための単純なアクションを作成する場合にも有用です。







参照情報については、dtcreate(1) のマニュアル・ページを参照してください。
# アクション作成ツールの機能アクション作成ツール機能


アクション作成ツールには、アクションおよびアクションに関連するデータ型を作成するためのメイン・ウィンドウとダイアログ・ボックスのセットがあります。

アクション作成ツールには、次のような機能があります。

コマンドを実行するアクション定義を作成します。

アクション作成ツール作成された構成ファイルアクション定義ファイル、アクション作成ツールで作成されたファイル`HomeDirectory`/.dt/types/`action_name`.dtを作成します。このファイルは、アプリケーション用に作成されたアクションとデータ型の定義を格納します。

ホーム・ディレクトリにアクション・ファイルアクション・ファイルを作成します。アクション・ファイルは、アクションと同じアクション名前名前の実行可能ファイルです。

ファイル・マネージャのアクション・ファイル表示は、ダブルクリックするとアプリケーションが起動されるのでアプリケーション・アイコンアクション作成ツールの使用アプリケーション・アイコンと呼びます。

オプションとして、アクションを作成するときにドロップ可能なデータ型を指定することにより、アクション・アイコンをドロップ領域にできます。

アプリケーションのデータ・ファイルに対して、ひとつまたは複数のデータ型を作成します（オプション）。

各データ型に対して[開く]アクションを作成します。

各データ型に対して[印刷]アクションを作成します（オプション）。

アクションとデータ型のデータベースを再読み込みします。これにより、アクションとデータ型はただちに有効になります。
# アクション作成ツールの制限アクション作成ツール制限


アクション作成ツールは、アプリケーションを実行するためのアクションとデータ型を作成するよう設計されています。しかし、アクションとデータ型には非常に柔軟性があり、手動で定義を作成した場合しかアクセスできない追加機能があります。

詳細については、次の章を参照してください。




# アクションの制限アクションアクション作成ツールの制限


次の条件のうちいずれかに該当する場合は、アクション作成ツールを使用してアプリケーションのアクションを作成することはできません。

コマンド行に、アクションファイルでない引き数<$nopage>アクションパラメータ、「引き数」を参照してくださいファイルでない引き数（パラメータ）が必要な場合

たとえば、アクション作成ツールを使用して、次のコマンドのアクションを記述することはできません。lp -d`device filename`

このコマンドでは、コマンドを実行するごとに`device`の値を指定しなければなりません。

アプリケーション・アイコンのラベルがアクション名と異なる場合

たとえば、アクション作成ツールを使用して、既存のアクションのローカル言語バージョンを提供することはできません。

アクションがアクション・データベースの拡張機能を必要とする場合

拡張機能を必要とするアクションには、次のようなものがあります。

アクション定義から、離れた遠隔システムにコマンドを発行するアクション

他のアクションを起動するアクション

別のユーザ（スーパーユーザなど）として実行しなければならないアクション

「マップ」機能を広範囲に活用するアクション

提供されるファイル引き数の数によって動作が非常に異なるアクション
# データ型の制限データ型手動による作成の要件データ型アクション作成ツールの制限


次の条件のうちいずれかに該当する場合は、アクション作成ツールを使用してアプリケーションのデータ型を作成することはできません。

[開く]と[印刷]以外のデータ型に関連付けられた追加のアクションが必要な場合

データ型の[開く]アクションが、そのアクションのコマンドではない場合

たとえば、アクション作成ツールを使用して、アプリケーションのアプリケーション・グループを表すディレクトリに一意のアイコンを提供するデータ型を作成することはできません。
# アクション作成ツールを使ったアプリケーションのアクションとデータ型の作成アクション作成ツール使用


アクション作成ツールを実行する前に、アプリケーションについていくつか知っておくべきことがあります。

アプリケーションを起動するコマンド行

コマンド行に必要なファイル引き数が指定されているか、オプションのファイル引き数が指定されているか、あるいはフィイル引き数が指定されていないかを知る必要があります。

アプリケーションにファイルではない引き数が必要な場合は、アクション作成ツールを使用してアクションを作成することはできません。

アプリケーションが受けとれるデータ・ファイルの型

アプリケーションによっては、１種類のデータ型しか受けとれません。通常のアプリケーション（たとえば ASCII エディタやグラフィック・エディタ）は複数のデータ型を受けとれます。

アプリケーションがデータ・ファイルを識別する方法

これは命名規則（たとえば.docで終わるファイル名）で、ファイルの内容に依存します。アプリケーションがファイル命名規則を使用しない場合でも、アクション・アイコン用に命名規則を設定することができます。

ファイルを印刷するコマンド行（オプション）
# アプリケーション用にアクションを作成するには


[デスクトップアプリケーション]グループで[アクション作成]をダブルクリックします。アクション作成ツール開始
# アプリケーション・マネージャの[アクション作成]アイコン


アクション作成ツールメイン・ウィンドウ[アクション作成]のメイン・ウィンドウが表示されます。
# [アクション作成]のメイン・ウィンドウ


アクション作成ツールの[アクション名]フィールドアクション作成ツールアクション名[アクション名]テキスト・フィールドに、アクション・アイコンのラベルになる名前を入力します。

[アクション・アイコン]コントロール、アクション作成ツールの[アクション・アイコン]コントロールを使用して、アイコンをアプリケーションに指定します。最初は、デフォルトのアイコンが表示されます。

別の既存アイコンを選択するには、[アイコンセット検索]をクリックして[アイコンセット検索]ダイアログ・ボックスを表示します。を参照してください。

新規のアイコンを作成するには、[アイコン編集]を選択してアイコン・エディタを実行します。

[アクションを開いた（ダブルクリックした）場合のコマンド]テキスト・フィールドに、アプリケーションを起動するコマンドを入力します。

ファイル引き数には、次のように構文アクション作成ツールアクション・コマンドの構文構文の使用$`n`を使用します。emacs
bitmap $1
diff $1 $2
lp -oraw $1

コマンド行にファイル引き数 ($`n`) を指定した場合は、アクション・アイコンはファイルのドロップ領域になります。アクション作成ツールファイル引き数の指定ファイル引き数アクション作成ツールで指定された

コマンド行は、シェルの使用を明示的に指定しない限りシェルには渡されません。たとえば、次の行はシェル処理を行います。/bin/sh -c 'ps | lp'
/bin/sh -c 'spell $1 | more'

[アクション・アイコンのヘルプ・テキスト]テキスト・フィールドに、アクション・アイコンのためのアイテムヘルプ・テキストを入力します。

ヘルプアクション作成ツールを使用して指定されたテキストはテキスト・フィールド内で自動的に折り返されます。しかし、その改行はオンラインでは保持されません。強制改行を指定したい場合は、\nを使用します。

アクションウィンドウ・サポートアクションのためのウィンドウ・サポートアクションに必要なウィンドウ・サポートを[ウィンドウタイプ]オプション・メニューから選択します。

グラフィカル（Ｘウィンドウ）

アプリケーションは独自のウィンドウを作成します。

端末エミュレータ（自動的に閉じる）端末エミュレータアクションの「自動的に閉じる」オプション

アプリケーションを終了するときに自動的に閉じる端末エミュレータ・ウィンドウでアプリケーションを実行します。

端末エミュレータ（手動で閉じる）端末エミュレータアクションの「手動で閉じる」オプション

ユーザが明示的にウィンドウを閉じるまで開いている端末エミュレータ・ウィンドウでアプリケーションを実行します。

出力なしアクション表示出力なし

アプリケーションはディスプレイに出力しません。

次の手順にしたがいます。

アプリケーションにデータ・ファイルがあり、そのデータ・ファイル用にひとつまたは複数のデータ型を作成したい場合は、次節のを参照してください。

データ型を作成する必要がない場合は、[ファイル]メニューから[保存]を選択してアクションを保存します。次に、ホーム・ディレクトリでアイコンをダブルクリックし、新しいアクションをテストします。
# アプリケーション用にひとつ以上のデータ型を作成するにはアクション作成ツールデータ型の作成データ型アクション作成ツールで作成された


前節の手順にしたがってアプリケーションのアクションを定義します。

ウィンドウを拡張するために、[アクション作成]ウィンドウで[拡張機能]ボタンをクリッックします。
# [アクション作成]メイン・ウィンドウの拡張機能


ファイル・プロンプト、アクション作成ツールで指定されたアクション作成ツールファイル・プロンプトアイコンをダブルクリックしたときに、アプリケーション・アイコンがファイル引き数の指定を求めるプロンプトを表示するようにしたい場合は、プロンプト・テキストを[アクションを開くときのユーザへの要求]テキスト・フィールドに入力します。

このテキスト・フィールドについては次のガイドラインにしたがってください。

アプリケーションのコマンド行に`必要な`ファイル引き数が指定されている場合は、このフィールドを使用しなければなりません。

コマンド行にファイル引き数が指定されていない場合は、このフィールドは空白にしておかなければなりません。

アプリケーションのコマンド行のファイル引き数がオプションの場合は、次のいずれかを選択できます。プロンプト・テキストを提供すると、アクション・アイコンはダブルクリックされたときにファイルの指定を求めるプロンプトを表示します。プロンプト・テキストを提供しないと、空文字列をファイル引き数としてアクションを実行します。

アクションが引き数として受けとるファイル・タイプを指定します。

アクションがどのようなデータ型でも受けとれる場合は、[すべてのデータ型]を選択します。

アクションが、あるアプリケーション用に作成したデータ型しか受けとれない場合は、[上記リストのみ]を選択します。

最初は、アクション作成ツールの[データ型]リスト[このアクションに使用されるデータ型]は空です。アプリケーション用にデータ型を作成するごとに、リストに追加されていきます。

[このアクションに使用されるデータ型]リスト・ボックスの横の[追加]ボタンをクリックして[データ型の追加]ダイアログ・ボックスを表示します。
# [アクション作成]の[データ型の追加]ダイアログ・ボックス


オプションとして、デフォルトのデータ型名を使いたくない場合は、[データ型ファミリ名]テキスト・フィールドアクション作成ツールデータ型名[データ型ファミリ名]テキスト・フィールドに、データ型の新しい名前を入力します。

データ型名にはスペースは使用できません。データ型名はアプリケーション・ユーザにはみえません。データ型名は、データ型定義を識別するためにアクションやデータ型データベースで使用します。

[識別する特性]ダイアログ・ボックス[識別する特性]ボックスの横の[編集]ボタンをクリックして[識別する特性]ダイアログ・ボックスを表示します。
# [アクション作成]の[識別する特性]ダイアログ・ボックス


データ型の特徴が、そのデータ型を他のデータ型と区別するために使用される基準になります。次の中からひとつまたは複数の基準を選択できます。

ファイルまたはフォルダ

ファイルだけ、またはフォルダだけに適用されるデータ型

ファイル名のパターンデータ型名前に基づく名前に基づくデータ型

ファイル名に基づくデータ型の分類

アクセス権のパターンアクセス権のパターン、アクション作成ツールで指定されたデータ型アクセス権のパターン

読み取り権、書き込み権、実行権

内容データ型内容に基づく内容に基づくデータ型

ファイルの指定された部分の内容データ型がファイルとフォルダのどちらかを表すか選択します。
# データ型にファイルまたはディレクトリの特徴を指定する


データ型の分類が名前に基づく場合は、[ファイル名のパターン]チェック・ボックスを選択して、テキスト・フィールドに入力します。
# データ型にファイル名の特徴を指定する


ワイルドカードとして * と ? を使用できます。

*

すべての文字シーケンスに一致します

?

単一の文字すべてに一致しますデータ型の分類がアクセス権に基づく場合は、[アクセス権のパターン]チェック・ボックスを選択して、データ型のアクセス権を選択します。
# データ型にアクセス権の特徴を指定する


オン

指定したアクセス権をファイルに持たせる

オフ

指定したアクセス権をファイルに持たせない

どちらでも可

指定されたアクセス権は関係ないデータ型の分類が内容に基づく場合は、[内容]チェック・ボックスを選択して、要求される情報（検索する[パターン]および内容の[タイプ]）を提供します。オプションで、検索の開始バイトの位置を指定できます。
# データ型に内容の特徴を指定する


内容に基づくデータ型の分類は、システム性能に影響を与えることがあります。

[了解]をクリックして[識別する特性]ダイアログ・ボックスを閉じます。

特徴は、次のコードを使用して[識別する特性]フィールドに表示されます。[識別する特性]フィールド

d

ディレクトリ

r

読み取り権をもつファイル

w

書き込み権をもつファイル

x

実行権をもつファイル

!

論理演算子 NOT

&

論理演算子 AND

[データ型アイコンのヘルプ・テキスト]テキスト・フィールドに、データ・ファイルのヘルプ・テキストを入力します。

[データ型アイコン]コントロールを使用して、アプリケーションにアイコンを指定します。最初は、デフォルト・アイコンが表示されます。

別の既存のアイコンを選択するには、[アイコンセット検索]をクリックして[アイコンセット検索]ダイアログ・ボックスを表示します。を参照してください。

新しいアイコンを作成するには、[アイコン編集]をクリックして[アイコン・エディタ]を実行します。

[データ型を開くコマンド]テキスト・フィールドのコマンドを確認します。このコマンドは、データ・ファイルをダブルクリックしたときに実行されるコマンドです。

オプションとして、アプリケーションが、コマンド行からデータ・ファイルを印刷するための印刷コマンドを提供する場合は、そのコマンドを[データ型を印刷するコマンド]テキスト・フィールドに入力します。ファイル引き数に構文$`n`を使用します。

次のいずれかを行い、データ型定義を保存します。

[了解]をクリックしてデータ型を保存して[データ型追加]ダイアログ・ボックスを終了します。

[適用]をクリックして[データ型追加]ダイアログ・ボックスを終了せずにデータ型を保存します。この場合、ただちにアクションの次のデータ型を定義できます。
# アイコンを指定するための[アイコンセット検索]ダイアログ・ボックスの使用アクション作成ツールアイコンの指定アイコン[アイコンセット検索]ダイアログ・ボックス[アイコンセット検索]ダイアログ・ボックス


[アイコンセット検索]ダイアログ・ボックスは、[アクション作成]メイン・ウィンドウまたは[データ型追加]ウィンドウで[アイコンセット検索]をクリックすると表示されます。アクションまたはデータ型に使用するアイコンを指定するために、このダイアログ・ボックスを使用します。
# [アイコンセット検索]ダイアログ・ボックスデータ型〜のアイコンアイコンデータ型アイコンアクションアクション〜のアイコン


[アイコンセット検索]ダイアログ・ボックスにより、次の位置にあるアイコン・イメージ・ファイルのセットを指定できます。

アイコン検索パスのディレクトリ。[アイコン・フォルダ]リストには、アイコン検索パスのすべてのディレクトリが掲載されています。

dtappintegrateを使用してデスクトップに統合される登録パッケージ。これらのアイコンは、アイコン検索パスのディレクトリにはまだありませんが、dtappintegrateによってそのディレクトリに配置されます。

アクション作成ツールを使って作成されたアクションとデータ型定義には、アイコン・ファイルのベース名が書いてあります（ファイル名から、サイズとファイルタイプを表すファイル名接尾辞を引いたもの）。アクション作成ツールで作成されたアクションとデータ型のアイコンは、最終的にはアイコン検索パスのディレクトリ上に配置されなければなりません。
# アイコン検索パスにあるアイコンのセットを指定するには


[アイコンセット検索]ダイアログ・ボックスの[アイコン・フォルダ]リストで、アイコンを含むフォルダ・パスをダブルクリックします。

[アイコン・ファイル]リストは、そのフォルダのすべてのアイコン・ファイルを表示します。

[アイコン・ファイル]リストで、使用したいアイコンをクリックします。

これで、アイコン・ファイルのベース名が[アイコン・ファイル名を入力]テキスト・フィールドに入ります。

[了解]をクリックします。
# 登録パッケーシにアイコンを指定するには


システム管理者またはプログラマが登録パッケージを作成している場合、アイコン・イメージ・ファイルは当初、登録パッケージの次のディレクトリにあります。`app_root`/dt/appconfig/icons/`language`

dtappintegrateで登録を行った後、アイコン・ファイルはアイコン検索パス上の/etc/dt/appconfig/icons/`language`にコピーされます。

次の手順で、登録パッケージの一部であるアイコンを指定します。

[アイコンセット検索]ダイアログ・ボックスの[アイコン・ファイル名を入力]テキスト・フィールドに、アイコン・ファイルのベース名を入力します。

[了解]をクリックします。

アクション作成ツールは、それらのアイコンがアイコン検索パスのディレクトリにみつからないことを知らせるダイアログ・ボックスを表示します。

表示される情報ダイアログ・ボックスで、[名前を変更しない]を選択します。