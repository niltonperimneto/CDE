
# アプリケーションの登録


<$nopage>アプリケーションの登録、「登録」を参照してくださいこの章では、アプリケーションの登録パッケージの作成方法と、デスクトップへのアプリケーションの登録方法について説明します。

























アプリケーションを完全にデスクトップへ登録するには、次の内容を備えていることが必要です。

アプリケーション・マネージャのトップレベルにある、独自のアプリケーション・グループ

アプリケーションを起動するアクション（アプリケーション・グループではアクションはアイコンで表示される）

オプションで、データ・ファイルのデータ型

アプリケーションの登録は、次のように設定すると、アプリケーションのオペレーションを妨げません。

アプリケーションの実行可能ファイル自身の変更を含まないこと。したがって、すでにシステムに存在するアプリケーションも登録できます。

アプリケーションが任意に提供するファイル（実行可能ファイルおよびapp-defaultsなど）を他のファイルの位置へ移動させる必要がないこと。

簡単に元に戻せること。dtappintegrateツールはアプリケーションの登録に使用されますが、プロセスを逆にたどれるようなコマンド行オプションも提供します。

次のユーザは登録パッケージの作成が必要です。

既存アプリケーションをデスクトップへ登録するシステム管理者

デスクトップ化アプリケーションのインストール・パッケージを作成するソフトウェア・プログラマ
# アプリケーション登録の概要アプリケーション登録処理、「登録」を参照してください登録概要


この節では次のことを説明します。

アプリケーション登録の目的

アプリケーション登録によって提供されるアプリケーションの機能

既存アプリケーションの登録方法の詳細については、を参照してください。
# アプリケーション登録によって提供される機能アプリケーション登録の機能登録パッケージ〜の目的登録〜によって提供される機能


アプリケーション・マネージャ〜によるアプリケーションの統合アプリケーションを登録すると、次のようなことをグラフィカルに実行できます。

アプリケーションの配置

インストール時、アプリケーションはアプリケーション・マネージャに「登録」され、独自のアプリケーション・グループを持ちます。
# アプリケーション・マネージャのトップレベルにあるアプリケーション・グループ


アプリケーションの起動

アプリケーションのアプリケーション・グループには、ダブルクリックするとアプリケーションを起動できるアイコンがあります。
# アプリケーションを起動するためのアイコンを含むアプリケーション・グループ


アプリケーションデータ型の目的データ型作成の目的データ・ファイルの識別および操作。アプリケーションのデータ・ファイルにはファイル・マネージャで一意のアイコンがあります。

ユーザは、データ・ファイル・アイコンを次の作業に使用できます。

アプリケーションの起動（開く）

データ・ファイルの印刷
# [開く]と[印刷]が表示されているデータ・ファイルのポップアップ・メニュー


（音声）データのメール送信、圧縮、表示、再生など、他のオペレーションの実行
# アプリケーション登録の目的登録〜の目的


構成ファイル登録パッケージの登録されたデスクトップ・アプリケーションには、デスクトップがアプリケーションのユーザ・インタフェースを提供するのに使用する次のような構成ファイルがあります。

アクションおよびデータ型定義ファイル

アイコン・イメージ（ピックスマップまたはビットマップ）・ファイル

アプリケーション・グループを作成するディレクトリおよびファイル

オプションで、デスクトップ・ヘルプ・ファイルおよびフロントパネル定義ファイル

これらのファイルをデスクトップが認識および使用するには、デスクトップの検索パスで指定したディレクトリに入っていなければなりません。

アプリケーションの構成ファイルが無数のディレクトリに分散されている場合、アプリケーションを管理するのは難しくなります。したがって、デスクトップは、アプリケーションがひとつのディレクトリの下にすべてのデスクトップ構成ファイルを集められるようにします。このグループ化されたファイルを登録パッケージ定義`「登録パッケージ」`と呼びます。

アプリケーションがデスクトップ化されている場合、登録パッケージはインストール・パッケージの一部として提供されます。自分で構成ファイルを作成するシステム管理者は、自分で登録パッケージを作成できます。

登録パッケージの構成ファイルは正しい検索パス・ディレクトリにないため、デスクトップで使用できません。これらのファイルを正しい場所に置くプロセスを、アプリケーションの登録定義`「登録」`または`「統合」`と呼びます。

デスクトップは、正しい検索パス・ディレクトリにあるファイルのシンボリック・リンク表示を作成することにより、登録を行うツールdtappintegrateを提供します。

多くのデスクトップ化アプリケーションは、インストール・プロセス中に自動的にdtappintegrateを実行します。既存アプリケーションを統合するシステム管理者は、登録パッケージを作成した後で自分で実行できます。

一度アプリケーションをシステムのデスクトップに登録すると、システムの全ユーザがアプリケーションを使用できます。システムがデスクトップのアプリケーション・サーバアプリケーションの適用可能性アプリケーション・サーバとして設定されている場合、ネットワークの他のシステムもアプリケーションを使用できます。

dtappintegrateツールには、リンクを切ることによってプロセスを逆に行うコマンド行オプションがあります。このオプションを使うとアプリケーション・マネージャからアプリケーションを削除するのが容易になるため、アプリケーションを別のアプリケーション・サーバに移動したり更新したりできます。
# アプリケーション登録の一般的な手順登録一般的な手順


これらの手順によってアプリケーション・パッケージを作成する方法の詳細な例については、を参照してください。

フォントおよびカラーを設定するアプリケーションのリソースを変更します。変更しないと、デスクトップのダイナミック・フォントおよびダイナミック・カラーが正しく動作しません。

を参照してください。

アプリケーションのルート位置を作成します。

を参照してください。

アプリケーション・ルートの下にディレクトリ構造を作成します。

を参照してください。

アプリケーションのアクションおよびデータ型を作成します。

を参照してください。

適切なディレクトリにヘルプ・ファイルを入れます。

を参照してください。

適切なディレクトリにオンライン・マニュアル (infolib) のファイルを入れます。

を参照してください。

アプリケーションのアイコンを作成します。

を参照してください。

アプリケーションのアプリケーション・グループを作成します。

を参照してください。

dtappintegrateを使用してアプリケーションを登録します。

を参照してください。
# 手順１: フォント・リソースおよびカラー・リソースの変更登録リソースの変更登録リソースの変更


アプリケーションのリソースの変更例については、ののを参照してください。

デスクトップは、インタフェース・フォントおよびウィンドウ・カラーを設定および処理するための機能を提供します。アプリケーションがこれらの機能を正しく使用するには、アプリケーションのapp-defaultsファイルを変更してください。
# フォント・リソースの変更スタイル・マネージャ〜によるフォントの統合登録フォントの変更フォントリソース、登録の変更


本節の内容は、Motif 1.2&trade;（またはそれ以降のバージョン）を使用して作成されたアプリケーションに適用されます。スタイル・マネージャは、Motif の初期のバージョンを使用して作成したアプリケーションのインタフェース・フォントを設定することができません。

デスクトップ・スタイル・マネージャは、アプリケーションがアプリケーション固有のインタフェース・フォントを作成しない場合、Motif 1.2（またはそれ以降のバージョン）を使用して作成したアプリケーションのインタフェース・フォントを設定します。

スタイル・マネージャは、次の２つのフォントを提供します。

システム・フォント

ラベル、メニュー、ボタンなどのシステム領域で使用します。

ユーザ・フォント

テキスト・フィールドなど編集可能領域で使用します。

それぞれのフォントは、フォント・ダイアログ・ボックスの１から７までの７種類のサイズで指定します。スタイル・マネージャ・フォントは、/usr/dt/app-defaults/`language`/Dtstyleに設定されたスタイル・マネージャのリソースによって、システムの実際のフォントに接続されます。

アプリケーションにスタイル・マネージャ・フォントを使用する場合、インタフェース・フォントを使用しているすべてのアプリケーションのリソースを削除してください。デスクトップは自動的にアプリケーションのリソースを適切に設定します。

FontList

システム・フォントに設定します。

XmText*FontList

ユーザ・フォントに設定します。

XmTextField*FontList

ユーザ・フォントに設定します。
# カラー・リソースの変更登録カラーの変更カラー・リソース、登録の変更


スタイル・マネージャ〜によるカラーの統合スタイル・マネージャは、アプリケーション・カラーを動的に変更する機能を提供します。アプリケーションは、Motif 1.1 またはそれ以降のバージョンで作成されたクライアントでなければなりません。他のツールキットで作成されたクライアントは、カラーを動的に変更できません。カラーの変更は、クライアントの再起動時に有効になります。

デスクトップが提供する動的カラーをもっとも簡単に使用する方法は、バックグラウンド・カラーおよびフォアグラウンド・カラーのアプリケーションのカラー・リソースを削除することです。
# 手順２: デスクトップ・アプリケーション・ルートの作成アプリケーションルート・ディレクトリアプリケーションapp_root ディレクトリ登録アプリケーション・ルート・ディレクトリアプリケーション・ルート・ディレクトリ


アプリケーションのデスクトップ・アプリケーション・ルート・ディレクトリの作成例については、ののを参照してください。

アプリケーションの登録パッケージ・ファイルは、アプリケーション・ルートまたは`<$nopage>app_root、「アプリケーション・ルート・ディレクトリ」を参照してくださいapp_root`と呼ばれるディレクトリの下でグループ化されます。デスクトップの構成ファイル用に使用される`app_root`ディレクトリは、アプリケーションのインストール`app_root`と同じディレクトリか、または他の場所でもかまいません。

たとえば、アプリケーションが/usr/BTEディレクトリの下にあるとします。これと同じディレクトリを、デスクトップの構成ファイルの`app_root`として使用することができます。ただし、既存のデスクトップ化されていないアプリケーションを統合する場合は、異なるデスクトップ`app_root`ディレクトリを作成することを推奨します。そうすれば、アプリケーションの更新時に、作成した構成ファイルが上書きされることはありません。

たとえば、システム管理者がデスクトップ`app_root`ディレクトリとして、ディレクトリ/etc/desktop_approots/BTEを作成することもできます。
# 手順３: 登録パッケージ・ディレクトリの作成登録パッケージディレクトリ


アプリケーションの登録パッケージ・ディレクトリの作成例については、ののを参照してください。

登録パッケージは、デスクトップ・アプリケーションにグラフィカル・インタフェースを提供するために使用するデスクトップ構成ファイルのグループです。
# 登録パッケージの内容


デスクトップ構成ファイルには次のものがあります。

アクションおよびデータ型定義ファイル

アイコン・イメージ・ファイル

アプリケーション・グループ・ディレクトリとその内容

オプションで、オンライン・マニュアル(infolib)ファイル、ヘルプ・データ・ファイルおよびフロントパネル構成ファイル

登録パッケージは、アプリケーション・ルートまたは`app_root`と呼ばれるトップレベルのディレクトリの下に集められます。
# アプリケーション・ルート・ディレクトリの下にある登録パッケージ


`app_root`ディレクトリの下にある構成フィールドのおもなカテゴリは、次のとおりです。

サブディレクトリ

内容

types

アクションおよびデータ型定義ファイル

help

デスクトップ・ヘルプ・ファイル

icons

アプリケーションのアクションおよびデータ型が使用するビットマップおよびピックスマップのイメージ・ファイル

appmanager

アプリケーション・グループを作成するディレクトリおよび内容

infolib

インフォメーション・ライブラリ、ブックケース、およびブックとして編成されるオンライン・マニュアルのファイル

おもなカテゴリはそれぞれ、言語依存ファイルのサブディレクトリです。デフォルト言語ファイルはCディレクトリにあります。
# 登録パッケージを作成するには


次のようなディレクトリを作成します。言語依存構成ファイルを指定する場合、各言語について別のディレクトリを作成します。ひとつの言語しか指定しない場合は、ファイルをCディレクトリに入れます。

`app_root`/dt/appconfig/types/`language`

`app_root`/dt/appconfig/help/`language`

`app_root`/dt/appconfig/icons/`language`

`app_root`/dt/infolib/`language`

`app_root`/dt/appconfig/appmanager/`language``/``appgroup_name,`ここで、`appgroup_name`は、アプリケーション・グループの名前です。

たとえば、は、`appgroup_name`が &ldquo;Media_Tools.&rdquo; であるグループを含むアプリケーション・マネージャを示します。
# アプリケーション・マネージャのトップレベルにあるアプリケーション・グループ


dtappintegrateツールは、types、help、icons、infolib、およびappmanagerディレクトリのデスクトップ構成ファイルでしか動作しません。アプリケーションのバイナリ実行可能ファイル、app-defaults、メッセージ・カタログ・ファイルとは別々に管理されます。
# 手順４: アプリケーションのアクションおよびデータ型の作成アクション登録で要求されるデータ型登録で要求される登録必要なアクション登録必要なデータ型


アプリケーションのアクションおよびデータ型の作成例については、ののを参照してください。

アクションおよびデータ型は、アプリケーションのユーザ・インタフェースを提供します。

アクションは、アプリケーションを起動するためのコマンドのユーザ・インタフェースを提供します。

データ型は、アプリケーションのデータ・ファイル用にカスタマイズされた外観と動作を提供します。
# アプリケーションが要求するアクションおよびデータ型アプリケーション要求されるアクションアプリケーション要求されるデータ型


典型的なアプリケーションは、次にようなアクションおよびデータ型定義が必要です。

アプリケーションを開くアクション。

アプリケーションのデータ・ファイルのデータ型。データ型を作成する場合、次のものも作成してください。

アプリケーションのデータ・ファイルの[開く]アクション

アプリケーションのデータ・ファイルの[印刷]アクション

アプリケーション・グループのデータ型（を参照してください）。

アクションおよびデータ型がどのようにデスクトップで使用されるかについては、を参照してください。
# アクションおよびデータ型定義構成ファイルの位置


アクションおよびデータ型は、構成ファイルに定義されます。アクションおよびデータ型定義が入っているファイル名の規約としては、必ず拡張子.dtを付けるということだけです。規約にしたがって、`action_name`.dtまたは`application_name`.dtとファイル名を名付けられます。

次のディレクトリにあるアプリケーション・ルートの下に、アクションおよびデータ型の入っているファイルを置きます。`app_root`/dt/appconfig/types/`language`

デフォルトの`language`はCです。
# アクションおよびデータ型定義ファイル

# アクションおよびデータ型の作成方法


次のいずれかの方法で、アクションおよびデータ型を作成できます。

[アクション作成]ツールを使用する

[アクション作成]は、入力するためのテキスト・フィールドがあり、使いやすいインタフェースを提供します。ただし、このツールには一定の制限があります。

定義を手動で作成する

この方法で作成する場合、定義を作成するための構文を知っていることが必要ですが、機能のすべてにアクセスできます。
# [アクション作成]を使用してアクションおよびデータ型を作成するには


この手順は、[アクション作成]ユーティリティを使用して、アプリケーションのアクションおよびデータ型を作成します。

[アクション作成]の詳細については、オンライン・ヘルプを使用するか、を参照してください。

[デスクトップアプリケーション]アプリケーション・グループを開き、[アクション作成]をダブルクリックします。

[アクション作成]を使用して、アプリケーションとそのデータ型用のアクションおよびデータ型定義を作成します。

[アクション作成]で作成した構成ファイルは、`HomeDirectory`/.dt/type/`action_name`.dtに書かれます。アクション・ファイル（アクションと同じ名前を持つ実行可能ファイル）は、ホーム・ディレクトリに置かれます。

ホーム・ディレクトリに作成されたアクション・ファイルを使用して、アクションをテストします。

アクション定義ファイル`HomeDirectory`/.dt/type/`action_name`.dtを次のディレクトリにコピーします。`app_root`/dt/appconfig/types/`language`

アプリケーション・グループ・ディレクトリが作成された後（を参照してください）、アクション・ファイル`HomeDirectory`/`action_name`を`app_root`/dt/appconfig/appmanager/`language``/``appgroup_name`ディレクトリにコピーします。
# アクションおよびデータ型を手動で作成するには


アプリケーションのアクションおよびデータ型が入っている構成ファイルを作成します。

アクションおよびデータ型定義ファイルは、`name`.dtというファイル名の命名規則に必ずしたがわなければなりません。

アクションおよびデータ型定義は、ひとつのファイル、または複数のファイルに分けて入れることができます。各ファイルは、システム管理者が簡単にアプリケーションへ接続できるファイル名を使用します。

アクションおよびデータ型の名前は、必ず１語にしてください（埋め込みスペースも使用しないでください）。下線文字を使用することもできます。規約により、アクションまたはデータ型の名前の最初の文字は大文字にします。既存のアクション名またはファイル名は使用しないでください。上級ユーザおよびシステム管理者が、簡単にアプリケーションに接続できる名前を使用します。

アクション名と異なる名前のラベルが付いたアプリケーションのアイコンを使いたい場合は、アクション定義にLABELフィールドを取り込みます。

アクションおよびデータ型の作成方法については、次の章を参照してください。








# 手順５: 登録パッケージへのヘルプ・ファイルの組み込み登録ヘルプ・ファイルヘルプ・ファイル登録パッケージへの


登録パッケージへのヘルプ・ファイルの追加例については、ののを参照してください。

アプリケーションがデスクトップのヘルプ・ボリューム登録パッケージの位置ヘルプ・ボリューム（デスクトップのヘルプ開発者キットで作成されたヘルプ・ボリューム）を取り込む場合、ヘルプ・ボリュームのマスタ・ファイル（*.sdl）をディレクトリ`app_root`/dt/appconfig/help/`language`に置いてください。

<$nopage>ヘルプ「ヘルプ・ボリューム」、「ヘルプ・ファイル」も参照してくださいヘルプ・ファイルが使用するグラフィックは、通常graphicsサブディレクトリに置きます。グラフィックは、ヘルプ・ボリュームが作成されたときと同じ、マスタ・ヘルプ・ボリューム（*.sdl）に関連するディレクトリになければなりません。

アプリケーションがヘルプ・ボリュームを提供しない場合、ヘルプ開発者のキットヘルプ開発者キットがあれば作成できます。

ヘルプ・ボリューム統合のレベルヘルプ・ボリュームの統合には、次の２つのレベルがあります。

ヘルプ完全統合完全統合

デスクトップ・ヘルプを完全に統合すると、アイテムヘルプや[ヘルプ]メニューなどのアプリケーションからヘルプ・ボリュームにアクセスできます。この統合には、アプリケーションの実行可能ファイルの変更も含まれます。

ヘルプ部分統合部分統合

デスクトップ・ヘルプを部分的に統合すると、ヘルプ・マネージャのトップレベルからデスクトップ・ヘルプを使用できます。ただし、アプリケーションのウィンドウからはヘルプ・ボリュームにアクセスできません。アプリケーション・グループからヘルプへアクセスできるアクションも提供されます。次の例にあるアクションは、ヘルプ・マスタ・ファイルMyApp.sdlにあるヘルプ・ボリュームを表示します。ヘルプ・ボリュームマスタ・ヘルプ・ファイル.sdl ファイルACTION OpenMyAppHelp
{
  LABEL           MyAppHelp
  ARG_COUNT       0
  TYPE            COMMAND
  WINDOW_TYPE     NO_STDIO
  EXEC_STRING     /usr/dt/bin/dthelpview -helpVolume MyApp
  DESCRIPTION     Displays help for the MyApp application.
}
# 手順６: 登録パッケージへのインフォメーション・ライブラリの組み込み登録インフォメーション・ライブラリ (infolibs)インフォメーション・ライブラリ (infolibs)登録パッケーシへの


アプリケーションに（デスクトップのインフォメーション・システム開発者キットで作成された）オンライン・マニュアルが含まれている場合、マニュアルを含むインフォメーション・ライブラリ（*.dti）は、次のディレクトリに置かれなければなりません。インフォメーション・ライブラリ (infolib)登録パッケージの位置`app_root`/dt/infolib/`language`

DocBook のブック・ファイル（*.sgm）によって使用されるグラフィックは、通常graphicsサブディレクトリに置かれます。グラフィックは、インフォメーション・ライブラリが作成されたときのように、インフォメーション・ライブラリ（*.dti）と関係する同じディレクトリに置かれなければなりません。

アプリケーションがオンライン・マニュアルを提供しない場合、インフォメーション・システム開発者キットがあれば、作成することができます。インフォメーション・システム開発者キット

インフォメーション・ライブラリの統合には２つのレベルがあります。インフォメーション・ライブラリ (infolib)統合のレベル

完全統合インフォメーション・ライブラリ (infolib)完全統合

インフォメーション・ライブラリを完全に統合すると、`DtActionInvoke`を使用してアプリケーションからアクセスし、インフォメーション・マネージャの特定のトピックを表示することができます。完全な統合には、アプリケーションの実行可能ファイルの変更も含まれます。

部分統合インフォメーション・ライブラリ (infolib)部分統合

インフォメーション・ライブラリを部分的に統合すると、インフォメーション・マネージャのトップレベルから使用可能になります。ただし、アプリケーションのウィンドウからインフォメーション・ライブラリにアクセスできません。アプリケーション・グループからインフォメーション・ライブラリにアクセスできるアクションも提供されます。次の例にあるアクションは、インフォメーション・ライブラリMyApp.dtiにあるインフォメーション・ライブラリを表示します。ACTION OpenMyAppInfolib
{
  LABEL           MyAppInfolib
  ARG_TYPE        InfoLib
  TYPE            MAP
  MAP_ACTION      DtLoadInfoLib /usr/dt/infolib/C/MyAppInfolib.dti
  DESCRIPTION     Invokes the Information Manager to display the online
                  documentation for MyApp application.
}
# 手順７: アプリケーション用アイコンの作成登録アイコンの要件アイコン登録で要求されるもの


アプリケーションのアイコン・ファイルの作成例については、ののを参照してください。

デスクトップは、アクション、データ型、アプリケーション・グループのデフォルト・アイコンを提供します。しかし、アプリケーション固有のアイコンを作成したくなることもあるでしょう。

アイコンはディレクトリ`app_root`/dt/appconfig/icons/`language`にあります。
# デスクトップに必要なアイコン


アプリケーションは次のようなアイコン・イメージをデスクトップで使用します。

アクション・アイコン。
ダブルクリックするとアプリケーション（アクション）が起動するアイコンです。アプリケーションを起動するアクションのICONフィールドで参照されます。アイコンアプリケーションの起動アプリケーションのアイコンデスクトップで要求されるアクション・アイコンデスクトップで要求される

サイズは極小、中、大の３種類です。

データ型アイコン。
このアイコンは、ファイル・マネージャにあるアプリケーションのデータ・ファイルを表示するのに使用します。データ型定義のICONフィールドで参照されます。

アプリケーションが複数のデータ型をサポートする場合、各データ型ごとに異なるアイコンを指定してください。アイコンデータ型データ型〜のアイコン

サイズは極小、中の２種類です。

iconsアプリケーション・グループアプリケーション・グループ〜のアイコンアプリケーション・グループ・アイコン。
アプリケーション・マネージャのトップレベルにあるディレクトリを示すアイコンです。アプリケーション・グループのためのデータ型定義のICONフィールドで参照されます（を参照してください）。

サイズは極小、中の２種類です。

カラー（８ビット以上）とモノクロ（８ビット未満）ディスプレイをサポートするには、各アイコンでピックスマップとビットマップの両方のバージョンを用意する必要があります。
# アイコン・ファイルの命名規則


`サイズ`

`ピクセル・サイズ`

`ビットマップ名`

`ピックスマップ名`

極小

16 × 16

`basename`.t.bm

`basename`.t.pm

中

32 × 32

`basename`.m.bm

`basename`.m.pm

大

48 × 48

`basename`.l.bm

`basename`.l.pm

ビットマップ・ファイルを提供しない場合、デスクトップは、ピックスマップ・ファイル
のカラー指定を白黒にマップします。このマッピングでは、希望どおりの表示にならないことがあります。

アイコンの詳細については、を参照してください。
# 手順８: アプリケーション・グループの作成登録アプリケーション・グループアプリケーション・グループ登録パッケージの作成


アプリケーション・グループの作成例については、ののを参照してください。

アプリケーションのアクションおよびデータ型定義を作成したら、ユーザが実際に見るアプリケーション・グループとその内容を作成するための構成ファイルを必ず作成してください。

アプリケーション・グループ〜のためのディレクトリアプリケーション・グループは、アプリケーション・マネージャのトップレベルにあるディレクトリです（を参照してください）。

アプリケーション・グループの作成には、次の３つの手順があります。

登録パッケージにアプリケーション・グループ・ディレクトリを作成する

オプションとして、アプリケーション・グループが一意のアイコンを使用するように設定する。これには、アプリケーション・グループ・ディレクトリのデータ型定義作成も含まれます。

アプリケーション・グループの内容を作成する
# アプリケーション・グループ・ディレクトリの作成


アプリケーション・グループを作成するには、のように、appmanagerの下の登録パッケージにディレクトリを作成します。
# appmanager ディレクトリ

# アプリケーション・グループ名アプリケーション・グループ名前


の <appgroup_name> は、アプリケーション・グループ名です。
# アプリケーション・グループ名 (<appgroup_name>)


名前は使用可能なファイル名（ディレクトリ名）でかまいません。アプリケーションを説明する名前を使用します。
# 固有のアイコンを使用するようにアプリケーション・グループを設定するアイコンアプリケーション・グループアプリケーション・グループ〜のアイコン


デスクトップはデフォルトのアプリケーション・グループ・アイコンを提供しますが、カスタム・アイコンが必要になる場合もあります。

アプリケーション・グループに固有のアイコンを指定する場合、次のものを必ず作成してください。

アプリケーション・マネージャのトップレベルに表示されるディレクトリのデータ型

データ型の[開く]および[印刷]アクション

たとえば、Media_Tools という名前のアプリケーション・グループを作成するとします。ファイル`app_root`/dt/appconfig/types/`language`/`name`.dtにある次のデータ型定義が、アプリケーション・グループ・アイコンに一意のアイコンを割り当てます。DATA_ATTRIBUTES  Media_ToolsAppgroup
{
   ACTIONS       OpenInPlace,OpenNewView
   ICON          MediaTools
   DESCRIPTION   Double-click to open the Media_Tools \
                 application group
}
DATA_CRITERIA           Media_ToolsAppgroupCriteria1
{
   DATA_ATTRIBUTES_NAME Media_ToolsAppgroup
   MODE                 d
   PATH_PATTERN         */appmanager/*/Media_Tools
}

定義の属性セクションが使用するアイコンを使用します。定義の条件セクションは、appmanagerというディレクトリのサブディレクトリであるMedia_Toolsというディレクトリにデータ型が定義されるように指定します。

に、アプリケーション・グループ名とデータ型定義との関係を示します。データ型定義のPATH_PATTERNフィールドは、アプリケーション・グループに固有のアイコンを結合します。
# アプリケーション・グループが一意のアイコンを獲得する方法


アプリケーション・グループ〜のアクションアプリケーション・グループ〜のデータ型アプリケーション・グループのデータ型の[開く]および[印刷]アクションも、次のように作成してください。ACTION Open
{
 ARG_TYPE   Media_ToolsAppGroup
 TYPE   MAP
 MAP_ACTION   OpenAppGroup
}
ACTION Print
{
 ARG_TYPE   Media_ToolsAppGroup
 TYPE   MAP
 MAP_ACTION   PrintAppGroup
}

OpenAppGroup および PrintAppGroup アクションは、/usr/dt/appconfig/types/`language`/dtappman.dtに定義された組み込みアクションです。
# アプリケーション・グループの作成アプリケーション・グループ内容登録パッケージアプリケーション・グループの内容


アプリケーション・グループでもっとも重要な項目は、アプリケーションを起動するアイコン（アクション・アイコン）です。アプリケーション・グループに一連のアプリケーションが含まれていれば、通常は各アプリケーションのアイコンがあります。

ひとつ以上のアクション・アイコンの他に、アプリケーション・グループに含まれているものを次に示します。

ひとつ以上の README ファイル

ひとつ以上のサンプル・データ・ファイル

テンプレート

ダブルクリックしてヘルプ情報を表示するためのアイコン

マニュアル・ページ

特殊なフロントパネル・コントロール

アプリケーション・グループには、サブディレクトリを含めることができます。
# アクション・ファイル（アプリケーション・アイコン）の作成アイコンアプリケーションの登録登録パッケージアプリケーション・アイコン登録「登録パッケージ」も参照してください登録パッケージ「登録」も参照してください


アプリケーション・グループには、アプリケーションを起動するアイコンがあります。グループが一連のアプリケーションを提供する場合、各アプリケーションにアイコンがあります。これらのアイコンは基本のアクションを示すため、`アプリケーション・アイコン`または`アクション・アイコン`と呼びます。

アクション・アイコンは、次のように実行するアクションとおなじ名前の実行可能ファイルを作成することによって作成します。`app_root`/dt/appconfig/appmanager/`appgroup_name`/`action_name`

このファイルは、基本のアクションの視覚的な表示を作成することが目的であるため、アクション・ファイル作成`アクション・ファイル`と呼ばれます。

たとえば、BestTextEditor アプリケーションを実行する BestTextEditor というアクションを作成する場合、BestTextEditor という名前の実行可能ファイルを作成します。ファイル・マネージャおよびアプリケーション・マネージャでは、アクション・ファイルは、アクション定義で指定したアイコン・イメージを使用します。

は、アプリケーション・マネージャのウィンドウでのアクション定義、アクション・ファイル、実際の入力形式の関係を示しています。
# アプリケーション・アイコンはアプリケーション・グループのファイル

# Read Me ファイルアプリケーション・パッケージ、「登録パッケージ」を参照してくださいreadme ファイル登録パッケージreadme ファイルアプリケーション・グループreadme ファイル


デスクトップは、アプリケーションの README ファイルに使用できる README データ型を提供します。次のいずれかの形式を使用します。

README

readme

README.*

Read.*.Me

read.*.me

READ.*.ME
# 特殊なフロントパネル・コントロールの作成フロントパネル登録パッケージのコントロール登録パッケージフロントパネル・コントロール


通常は、フロントパネル・コントロールの定義を指定する必要はありません。サブパネルの[アイコンのインストール]コントロールへアクション・アイコンをドロップすることにより、フロントパネルにアプリケーションを追加できます。

アクション・アイコンと異なる動作をするコントロールをユーザがインストールできるようにする場合、アプリケーションのコントロール定義を含むフロントパネル構成ファイルを作成する必要が生じます。たとえば、コントロールはファイルを監視し、そのファイルが変更されると表示を変更します。

フロントパネル構成ファイルは、`app_root`/dt/appconfig/types/`language`ディレクトリにあります。ファイル名の命名規則は`name`.fpです。

コントロールを含む構成ファイルを提供すると、サブパネルの[アイコンのインストール]コントロールに*.fpファイルをドロップすることにより、サブパネルにコントロールを追加できます。

たとえば、以下の定義を、アプリケーション・グループのフロントパネル構成ファイルに指定できます。このファイルをサブパネルの[アイコンのインストール]コントロールへドロップする場合、BestTextEditor アプリケーションのひとつのインスタンスを実行するサブパネルでコントロールが作成されます。BestTextEditor がすでに実行されている場合は、現在のワークスペースのウィンドウ・スタックのいちばん上にウィンドウが移動します。CONTROL BestTextEditorControl
{
 TYPE    icon
 ICON    BTEFPanel
 PUSH_RECALL    True
 CLIENT_NAME    BTEd
 PUSH_ACTION    BTEditor
 DROP_ACTION    BTEditor
 HELP_STRING    Starts the BestTextEditor application.
}

フロントパネル構成ファイル作成の詳細については、次を参照してください。



dtfpfile(4)のマニュアル・ページ
# 手順９: dtappintegrate を使用したアプリケーションの登録dtappintegrate登録dtappintegrate


アプリケーションの登録例については、ののを参照してください。

アプリケーション・ルートの下に登録パッケージを作成した後、実際にアプリケーションの登録を行うことができます。

アプリケーションを登録すると、登録パッケージと、デスクトップ検索パスに沿って配置されているディレクトリとがリンクされます（を参照してください）。
# アプリケーションを dtappintegrate で登録するには


アプリケーションがデスクトップ化されている場合、dtappintegrateは通常インストール・プロセスの最終手順として自動的に実行されます。自動的に実行されない場合、またはデスクトップ化されていないアプリケーションを統合するよう構成ファイルを作成した場合は、次のように手動でdtappintegrateを実行できます。

root でログインします。

次のコマンドを実行します。/usr/dt/bin/dtappintegrate -s`app_root`

`app_root`はデスクトップ・アプリケーション・ルート・ディレクトリです。詳細については、dtappintegrate(1) のマニュアル・ページを参照してください。

[デスクトップツール]アプリケーション・グループを開き、[アプリケーションの再読込み]をダブルクリックします。

アプリケーションが正しく登録されていることを次のように確認します。

アプリケーション・マネージャのトップレベルを表示します。新規アプリケーション・グループがアプリケーション・マネージャに表示されているか確認します。

アプリケーション・グループを開いてアクション・アイコンをダブルクリックします。
# dtappintegrate の構文とオプションdtappintegrate構文
dtappintegrate -s`app_root`[-t`target_path`] [-l`language`] [-u]

-s`app_root`

必須パラメータです。アプリケーションをインストールするアプリケーション・ルートを指定します。

-t`target_path`

オプションのパラメータで、システム上でのデフォルト位置は/etc/dt/appconfigです。デスクトップ構成ファイルをリンクする位置を指定します。アプリケーション検索パスの位置を必ず使用してください。

-l`language`

オプションのパラメータで、デフォルトは全言語です。統合する言語依存デスクトップ構成ファイルを指定します。

-u

オプションのパラメータです。アプリケーションを統合せず、統合中に設定されたリンクをすべて削除します。
# dtappintegrate によるアプリケーションの統合方法シンボリック・リンク登録時に作成されたdtappintegrate機能性


dtappintegrateは、インストールされたファイルと、デスクトップが構成ファイルを検索する位置とのリンクを設定します。
# アクションとデータ型アクションdtappintegrate で統合されたデータ型dtappintegrate で統合された


dtappintegrateは、登録パッケージのアクションおよびデータ型定義ファイルから、アクション・データベースのヘルプ検索パスに沿ったシステム全体のディレクトリへシンボリック・リンクを作成します。これは`app_root`/dt/appconfig/types/`language`/*.dt

を/etc/dt/appconfig/types/`language`/*.dt

へリンクさせることによって行います。
# インフォメーション・ライブラリインフォメーション・ライブラリ (infolibs)dtappintegrate で統合された


dtappintegrateは、登録パッケージのインフォメーション・ライブラリ (infolilbs) から、インフォメーション・ライブラリの検索パスに沿ったシステム全体のディレクトリへシンボリック・リンクを作成します。これは`app_root`/dt/infolib/`language`/*.dti

を/etc/dt/infolib/`language`/*.dti

へリンクさせることによって行います。
# ヘルプ・ファイルヘルプ・ファイルdtappintegrate で統合された


dtappintegrateは、登録パッケージのヘルプ・ファイルから、ヘルプ検索パスに沿ったシステム全体のディレクトリへシンボリック・リンクを作成します。これは`app_root`/dt/appconfig/help/`language`/`help_file.`sdl

を/etc/dt/appconfig/help/`language`/`help_file.`sdl

へリンクさせることによって行います。
# アイコン・ファイルアイコンdtappintegrate で統合された


dtappintegrateは、登録パッケージのアイコン・ファイルから、アイコン検索パスに沿ったシステム全体のディレクトリへシンボリック・リンクを作成します。これは`app_root`/dt/appconfig/icons/`language`/`icon_files`

を/etc/dt/appconfig/icons/`language`/`icon_files`

へリンクさせることによって行います。
# アプリケーション・グループアプリケーション・グループdtappintegrate で統合された


アプリケーションのアプリケーション・グループをアプリケーション・マネージャのトップレベルに置くため、dtappintegrateは登録パッケージのアプリケーション・グループ・ディレクトリとアプリケーション検索パスに沿ったシステム全体の場所とをリンクします。これは`app_root`/dt/appconfig/appmanager/`language`/`appgroup_name`

を/etc/dt/appconfig/appmanager/`language`/`appgroup_name`

へリンクさせることによって行います。
# 登録パッケージの作成例登録例登録パッケージ作成例


次の手順では、既存のデスクトップ化されていない BestTextEditor というアプリケーションに登録パッケージを作成します。
# ``BestTextEditor'' について知っておくべき情報


この例では、BestTextEditor アプリケーションについて、次の事実を想定しています。

ディレクトリ/usr/BTEにインストールされています。

ユーザのセッション言語はデフォルト値のCです。

BestTextEditor を起動するコマンド行は次のとおりです。BTEd [`filename`]

`filename`は新規ウィンドウを開くデータ・ファイル名です。BestTextEditor は独自のウィンドウを作成します。つまり、端末エミュレータ・ウィンドウ内で実行することはできません。

BestTextEditor は次の２種類のデータ・ファイルを作成し使用します。

ドキュメンテーション・ファイル。ファイル名の命名規則は*.bteです。BestTextEditor は.bteデータ・ファイルを印刷するためにコマンド行を提供します。コマンド構文は次のとおりです。BTEPrint [-d`destination`] [-s]`filename`

各オプションの説明を次に示します。-d`destination`宛先プリンタを指定します。-sサイレント印刷を指定します。アプリケーションの印刷ダイアログ・ボックスは表示されません。`filename`印刷するファイルを指定します。

テンプレート・ファイル。ファイル名の命名規則は*.tplです。テンプレート・ファイルは印刷できません。

BestTextEditor の、既存のデスクトップでない app-defaults ファイルには、インタフェース・フォントと、フォアグラウンド・カラーおよびバックグラウンド・カラーのリソースがあります。

BestTextEditor のオンライン・ヘルプ・ボリュームは、デスクトップのヘルプ開発キットを使用して作成されます。オンライン・ヘルプ・ボリュームは組み込まれると、次のソース・ファイルを使用します。&hellip;/BTEHelp.htg
&hellip;/graphics/BTE1.xwd
&hellip;/graphics/BTE2.xwd

そして、ファイル &hellip;/BTEHelp.sdlを生成します。
# ``BestTextEditor'' を登録するための手順


次の手順によって、BestTextEditor を登録します。

フォント・リソースとカラー・リソースを修正します。

BestTextEditor の app-defaults ファイルでは、以下を設定するリソースを削除します。

テキストのフォント

フォアグラウンドおよびバックグラウンドのカラー

アプリケーション・ルートを作成します。

次のディレクトリを作成します。/desktop_approots/BTE

既存のアプリケーションを統合する場合、アプリケーションのインストール位置以外のどこかに、アプリケーション・ルート・ディレクトリを作成してください。そうしないと、アプリケーションを更新したときに、作成した構成ファイルが削除されることがあります。

登録パッケージ・ディレクトリを作成します。>

次のディレクトリを作成します。/desktop_approots/BTE/dt/appconfig/types/C/desktop_approots/BTE/dt/appconfig/help/C/desktop_approots/BTE/dt/appconfig/icons/C/desktop_approots/BTE/dt/appconfig/appmanager/C/BestTextEditor

アプリケーションのアクションおよびデータ型を作成します。

アクションおよびデータ型定義の構成ファイルを作成します。/desktop_approots/BTE/dt/appconfig/types/C/BTE.dt

BestTextEditor を実行するためのアクション定義を作成します。ACTION BTEditor
{
  WINDOW_TYPE    NO_STDIO
  ICON    BTERun
  DESCRIPTION    Double-click this icon or drop a BTE data \
      file on it to run BestTextEditor.
  EXEC_STRING    /usr/BTE/BTEd &percnt;Arg_1&percnt;
}

*.bteファイルのデータ型を作成します。DATA_ATTRIBUTES BTEDataFile
{
  DESCRIPTION    BestTextEditor data file.
  ICON    BTEData
  ACTIONS    Open,Print
}

DATA_CRITERIA BTEDataFileCriteria1
{
  DATA_ATTRIBUTES_NAME      BTEDataFile
  NAME_PATTERN      *.bte
  MODE      f
}

*.tplファイルのデータ型を作成します。DATA_ATTRIBUTES BTETemplateFile
{
  DESCRIPTION    BestTextEditor template file.
  ICON    BTETempl
  ACTIONS    Open
}

DATA_CRITERIAL BTETemplateFileCriteria1
{
  DATA_ATTRIBUTES_NAME      BTETemplateFile
  NAME_PATTERN      *.tpl
  MODE      f
}

*.bteファイルの[開く]アクションを作成します。ACTION Open
{
  ARG_TYPE   BTEDataFile
  TYPE   MAP
  MAP_ACTION   BTEditor
}

*.bteファイルの[印刷]アクションを作成します。

次の例は、データ・ファイルを印刷する簡単な[印刷]アクションです。これらのアクションには、LPDEST 環境変数が必要で、-s印刷オプションを無視します（LPDEST を設定しない場合、アクションは異常終了する可能性があります）。ACTION Print
{
  ARG_TYPE    BTEDataFile
  TYPE    MAP
  MAP_ACTION    BTEPrintData
}
ACTION BTEPrintData
}
  WINDOW_TYPE     NO_STDIO
  EXEC_STRING     BTEPrint -d $LPDEST &percnt;Arg_1&percnt;
}

次は、BTEPrintData アクションと付随するスクリプトの別のバージョンを示します。アクションとスクリプトは、LPDEST が設定されていないか、サイレント印刷が要求されている状況を処理します。ACTION BTEPrintData
{
  WINDOW_TYPE    NO_STDIO
  EXEC_STRING    /usr/BTE/bin/BTEenvprint &percnt;(File)Arg_1&percnt;
}

/usr/BTE/bin/BTEenvprintスクリプトは次のとおりです。# BTEenvprint
#!/bin/sh
DEST=&rdquo;&rdquo;
SILENT=&rdquo;&rdquo;
if [ $LPDEST ]; then
  DEST=&rdquo;-d $LPDEST&rdquo;
fiBTEPrint $DEST $SILENT $1

*.tplファイルの[開く]アクションを作成します。ACTION Open
{
  ARG_TYPE   BTETemplateFile
  TYPE   MAP
  MAP_ACTION   BTEditor
}

*.tplファイルの[印刷]アクションを作成します。ACTION Print
{
  ARG_TYPES    BTETemplateFile
  TYPE    MAP
  MAP_ACTION    NoPrint
}

NoPrint は、ファイルが印刷できないことをユーザに通知するダイアログ・ボックスを表示する組み込みアクションです。

ヘルプ・ファイルを登録パッケージに組み込みます。

ヘルプ・ファイルを次の位置に置きます。/desktop_approots/BTE/dt/appconfig/help/C/BTEHelp.sdl
/desktop_approots/BTE/dt/appconfig/help/C/graphics/BTE1.xwd
/desktop_approots/BTE/dt/appconfig/help/C/graphics/BTE2.xwd

次のファイルを作成します。/desktop_approots/BTE/dt/appconfig/types/C/BTEhelp.dt

次のアクション定義をファイルに入れます。ACTION BTEHelp
{
  WINDOW_TYPE    NO_STDIO
  EXEC_STRING    /usr/dt/bin/dthelpview -helpVolume \
      BTEHelp.sdl
  DESCRIPTION    Opens the BestTextEditor help volume.
}

アプリケーションのアイコンを作成します。

[アイコン・エディタ]を使用してアイコンを作成します。次に示すサイズに関するガイドラインを使用します。

名前

サイズ

`basename`.t.pm

16 × 16

`basename`.m.pm

32 × 32

`basename`.l.pm

64 × 64

以下のアイコン・ファイルを、ディレクトリ/desktop_approots/BTE/dt/appconfig/icons/Cに作成します。

アプリケーションを実行するアクションを示すアイコン:BTERun.t.pm、BTERun.m.pm、BTERun.l.pm

*.bteファイルを示すアイコン:BTEData.t.pm、BTEData.m.pm

*.tplファイルを示すアイコン:BTETempl.t.pm、BTETempl.m.pm

アプリケーション・グループ（手順７で使用）を示すアイコン:BTEApp.t.pm、BTEApp.m.pm

アプリケーション・グループを作成します。アプリケーション・グループ作成例

まだ作成していなければ、ディレクトリを作成します。/desktop_approots/BTE/dt/appconfig/appmanager/C/BestTextEditor

この手順はオプションです。アプリケーション・グループのデータ型および関連するアクションを作成して、アプリケーション・グループ・アイコンに一意のアイコンを作成します。この手順を省略すると、アプリケーション・グループはデフォルト・アイコンを使用します。

次のデータ型およびアクション定義をファイル/desktop_approots/BTE/dt/appconfig/types/C/BTE.dtに追加します。
データ型は、アイコンを BestTextEditor アプリケーション・グループが使用するように指定します。アクションは、組み込みアプリケーション・グループと同様の、[開く]および[印刷]の動作を提供します。DATA_ATTRIBUTES BestTextEditorAppGroup
{
  ACTIONS   OpenInPlace,OpenNewView
  ICON   BTEApp
}
DATA_CRITERIA BestTextEditorAppGroupCriterial
{
  DATA_ATTRIBUTES_NAME      BestTextEditorAppGroup
  MODE      d
  PATH_PATTERN      */appmanager/*/BestTextEditor
}
ACTION Open
{
  ARG_TYPE   BestTextEditorAppGroup
  TYPE   MAP
  MAP_ACTION   OpenAppGroup
}
ACTION Print
{
  ARG_TYPE   BestTextEditorAppGroup
  TYPE   MAP
  MAP_ACTION   PrintAppGroup
}

アプリケーションを起動するアプリケーション・グループにアイコンを作成します。これを行うには、次のファイルを作成し、ファイルを実行可能にします。/desktop_approots/BTE/dt/appconfig/appmanager/C/BestTextEditor/BTEditor

ヘルプ・ボリュームを開くアプリケーション・グループにアクション・ファイルを作成します。これを行うには、次のファイルを作成し、ファイルを実行可能にします。/desktop_approots/BTE/dt/appconfig/appmanager/C/BestTextEditor/BTEHelp

アプリケーション・グループに、README ファイル、サンプル・データ、テンプレート・ファイルなどの他のファイルを置きます。

アプリケーションを登録します。

端末エミュレータ・ウィンドウで次のようにします。

root でログインします。

次のコマンドを実行します。/usr/dt/bin/dtappintegrate -s /desktop_approots/BTE

[デスクトップツール]アプリケーション・グループを開き、[アプリケーションの再読込み]をダブルクリックします。