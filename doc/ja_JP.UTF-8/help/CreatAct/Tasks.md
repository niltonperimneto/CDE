
# [アクション作成] の使い方

# アクションの作成および編集





# データ型の作成および編集





# アクションおよびデータ型のアイコン



# [アクション作成] でアクションを作成するには
アクション:作成

アプリケーション・マネージャの [Desktop_Apps] アプリケーション・グループを開き、[アクション作成] をダブルクリックしてください。

これで、[アクション作成] のメイン・ウィンドウが表示されます。

[アクション名] テキスト・フィールドに、アクションのアイコンに付けるラベルの名前を入力してください。

アクション名には、スペース以外の任意の文字が使用できます。

[アクション・アイコン] コントロールを使用して、アプリケーションのアイコンを指定してください。
初めは、デフォルト・アイコンが表示されています。

別の既存アイコンを使用するには、[アイコンセット検索] をクリックして [アイコンセット検索] ダイアログ・ボックスを開いてください。
    詳細は、を参照してください。

新規アイコンを作成するには、[アイコン編集] をクリックしてアイコン・エディタを起動してください。を参照してください。

[アクション・アイコンを開いた場合のコマンド] テキスト・フィールドに、アプリケーションを起動するコマンドを入力してください。

ファイル引き数には、書式$`n`を使用してください。
  例:emacs
bitmap $1
diff $1 $2
lp -oraw $1

コマンド行にファイル引き数($`n`)がある場合には、アクション・アイコンはファイルのドロップ領域になります。

コマンド行は、ユーザがシェルの使用を明示的に指定しない限り、シェルに渡されません。
たとえば、以下の行はシェル処理を使用します。/bin/sh -c 'ps | lp'
/bin/sh -c 'spell $1 | more'

[アクション・アイコンのヘルプ・テキスト] テキスト・フィールドには、ユーザがアクション・アイコンに関するアイテム・ヘルプを参照した場合に表示されるヘルプ情報を入力してください。

テキスト・フィールドのテキストは、自動的に折り返されます。しかし、この行分割はオンラインでは保存されません。
  "確実な"行分割を指定したい場合には、&bsol;nを使用してください。

必要なウィンドウ・サポートを選択するには、[ウィンドウタイプ] ボタン・メニューを使用してください。

* **グラフィカル (Ｘウィンドウ)** 

アプリケーションは、独自のウィンドウを作成します。
* **端末エミュレータ (自動的に閉じる)** 

アプリケーションは、端末エミュレータ・ウィンドウ内で実行され、そのウィンドウはユーザがアプリケーションを終了した時点で自動的に閉じられます。
* **端末エミュレータ (手動で閉じる)** 

アプリケーションは、端末エミュレータ・ウィンドウ内で実行され、そのウィンドウはユーザが明示的に閉じるまで開かれています。
* **出力なし** 

アプリケーションは、表示するための出力を作成しません。


以下の作業を進めてください。

アプリケーションにデータ・ファイルがあり、1 種類以上のデータ型を作成する場合は、を参照してください。

データ型を作成する必要がない場合:

[ファイル] メニューから [保存] を選択して、アクションを保存してください。

ホーム・ディレクトリで新規アクションのアイコンをダブルクリックして、テストしてください。
# [アクション作成] でデータ型を作成するには
データ型:作成

アプリケーションのアクションを定義してください。トピックの手順 1 から 6 までを参照してください。

[拡張機能] ボタンをクリックして、[アクション作成] ウィンドウを拡張してください。

アクション・アイコンがダブルクリックされた時に、アイコンがファイル引き数の入力を要求するようにするには、"アクションを開く時点でユーザに確認" テキスト・フィールドにプロンプト・テキストを入力してください。

アプリケーションのコマンド行に必要なファイル引き数がある場合には、このフィールドを必ず使用してください。

アプリケーションのコマンド行にファイル引き数がない場合には、このフィールドはブランクでなければなりません。

アプリケーションのコマンド行のファイル引き数がオプションの場合には、方法を選択できます。
     プロンプト・テキストを表示する場合は、アクション・アイコンがダブルクリックされた時にファイルの入力を要求します。
     プロンプト・テキストを表示しない場合は、空文字列をファイル引き数としてコマンドを実行します。

アクションが引き数として受け入れるファイルのタイプを指定してください。

アクションが任意のデータ型を受け入れる場合は、[すべてのデータ型] をクリックしてください。

アクションが、アプリケーションに対して作成したデータ型のみを受け入れる場合は、[上記のリストのみ] をクリックしてください。

初めは、[このアクションで使用するデータ型] リストは空です。アプリケーションのデータ型を作成すると、そのデータ型がリストに追加されます。

[追加] をクリックして、[データ型の追加] ダイアログ・ボックスを表示してください。

オプション: デフォルトのデータ型名を使用しない場合は、新規データ型の新規名を[データ型の名前] テキスト・フィールドに入力してください。
名前にはスペースは使用できません。

[特性の識別] ボックスの側の [編集] ボタンをクリックして、[特性の識別] ダイアログ・ボックスを表示してください。

このダイアログ・ボックスを使用して、データ型を他のデータ型と区別する特性を設定してください。
  1 つの規準(たとえば、ファイル名のパターン)、または規準の組み合わせ(たとえば、ファイル名のパターンとアクセス権のパターンの両方)を選択できます。

[ファイル] または [フォルダ] トグル・ボタンのどちらかをクリックして、データ型がファイルを示すのかフォルダを示すのかを指定してください。

データ型が名前に依存する場合は、[ファイル名のパターン] チェック・ボックスをクリックして、ファイル名のパターンを入力してください。
ワイルドカードとして、*と?が使用できます。

* ***** 

は、任意の文字列と一致します。
* **?** 

は、任意の一文字と一致します。


データ型がアクセス権に依存する場合は、[アクセス権のパターン] チェック・ボックスをクリックして、データ型に必要なアクセス権をクリックしてください。

* **オン** 

ファイルに、指定のアクセス権がなければなりません。
* **オフ** 

ファイルに、指定のアクセス権があってはなりません。
* **どちらでも可** 

(デフォルト) アクセス権は問題ではありません。


データ型が内容に依存する場合は、[内容] チェック・ボックスをクリックして、検索するパターンと内容のタイプを指定してください。
  オプションで、検索を開始するバイトの位置を指定できます。

[了解] をクリックして、[ファイル特性] ダイアログ・ボックスを閉じてください。

特性は、[データ型の追加] ダイアログ・ボックスの [特性の識別] ボックスに表示されます。

[特性の識別] ボックスのアクセス権情報は、以下のコーディングを使用します。

* **d** 

ディレクトリ
* **r** 

読み込み権
* **w** 

書き込み権
* **x** 

実行権
* **!** 

NOT
* **&** 

AND


データ型のヘルプ・テキストを [ヘルプ・テキスト] テキスト・フィールドに入力してください。

[データ型アイコン] コントロールを使用して、アプリケーションのアイコンを指定してください。

初めは、デフォルト・アイコンが表示されます。

別の既存のアイコンを選択するには、[アイコンセット検索] をクリックして、[アイコンセット検索] ダイアログ・ボックスを開いてください。
    詳細は、を参照してください。

新規アイコンを作成するには、[アイコン編集] をクリックしてアイコン・エディタ
    を起動してください。を参照してください。

オプション: アプリケーションが、コマンド行でデータ・ファイルを印刷する印刷コマンドを提供する場合は、ファイル書式に$`n`を使用して、[印刷コマンド] テキスト・フィールドにコマンドを入力してください。

[了解] をクリックして [データ型の追加] ダイアログ・ボックスを閉じ、データ型を[アクション作成] ウィンドウのデータ型リストに追加してください。
# アクションおよびデータ型のアイコンを指定するには


[アクション作成] メイン・ウィンドウおよび [データ型の追加] ダイアログ・ボックスには、アクションおよびデータ型が使用するアイコンを指定するボタンがあります。

既存のアイコンを使用するには、[アイコンセット検索] をクリックしてください。を参照してください。

アイコン・エディタを使用して新規アイコンを作成するには、[アイコン編集] をクリックしてください。を参照してください。
# [アイコンセット検索] ダイアログ・ボックスを使用するには


[アイコンセット検索] ダイアログ・ボックスは、[アクション作成] メイン・ウィンドウ
または [データ型の作成] ダイアログ・ボックスで [アイコンセット検索] をクリックすると表示されます。

[アイコンセット検索] ダイアログ・ボックスでは、以下の指定ができます。

[アイコン・フォルダ] リストのフォルダ内にあるアイコン。
  [アイコン・フォルダ] リストには、アイコン検索パス上のすべてのフォルダがあります。

登録パッケージの一部となるアイコン。このパッケージは、dtappintegrateを使用してデスクトップに統合されます。
# アイコン・フォルダのアイコンを指定するには


[アイコン・フォルダ] リストで、アイコンを含むフォルダをダブルクリックしてください。

[アイコン・ファイル] リストには、そのフォルダ内のすべてのアイコン・ファイルが表示されます。

[アイコン・ファイル] リストで、使用したいアイコンをクリックしてください。

[了解] をクリックしてください。
# 登録パッケージのアイコンを指定するには


ユーザが、登録パッケージを作成するシステム管理者またはプログラマの場合、アイコン・イメージ・ファイルは初め、登録パッケージのディレクトリに置かれます。`app_root`/dt/appconfig/icons/`language`

登録後、アイコン・ファイルはアイコン・フォルダ内に存在します。
したがって、アクションおよびデータ型の定義には、ベース・ファイル名を使用してください。

以下の手順に従って、現在アイコン・フォルダに存在しないアイコンのベース名を指定してください。

[アイコン・ファイル名の入力] テキスト・ボックスに、アイコン・ファイルのベース名を入力してください。

[了解] をクリックしてください。

[エラー] ダイアログ・ボックスが表示され、アイコン・ファイルがアイコン・フォルダ内に見つからなかったことを知らせます。

[エラー] ダイアログ・ボックスで、[名前を了解] をクリックしてください。
  [エラー] ダイアログ・ボックスおよび [アイコンセット検索] ダイアログ・ボックスを閉じます。

[アクション・アイコン] または [データ型アイコン] フィールドにおけるアイコン・イメージの欠落は無視してください。
  アイコン・イメージは、アプリケーションが登録されると見つかります。
# 新規アイコン・イメージの作成


[アイコン作成] または [データ型の編集] ウィンドウで、[アイコン編集] をクリックしてください。
  これで、アイコン・エディタが起動します。

アイコン・エディタを使用して、新規アイコンを描画してください。以下を参照してください。

アイコン・エディタの使い方



[ファイル] メニューから [保存] を選択して、アイコン・ファイルを保存してください。

アイコン・ファイルは、`HomeFolder`/.dt/iconsフォルダに保存してください。を参照してください。

ユーザが、登録パッケージを作成するシステム管理者またはアプリケーション・プログラマの場合は、`approot`/dt/appconfig/icons/`language`ディレクトリにアイコン・ファイルを保存してください。
# アイコン・サイズと名前


デスクトップのアイコンは、以下の命名規則が適用されます。

* **サイズ (ピクセル単位)** 

名前
* **32 × 32** 

`ベース名`.m.pmまたは`ベース名`.m.bm
* **16 × 16** 

`ベース名`.s.pmまたは`ベース名`.s.bm


アクション・アイコンの場合は、アクション名をベース名として使用してください。

データ型アイコンの場合は、データ型名をベース名として使用してください。
# 既存のアクションを編集するには
アクション:編集

以下の場合は、[アクション作成] を使用して既存のアクションを編集できます。

アクションが [アクション作成] で作成された。

かつ、アクション定義を格納しているファイルが手動で(テキスト・エディタを使用して)編集されていない。

アプリケーション・マネージャの [Desktop_Apps] アプリケーション・グループを開き、[アクション作成] をダブルクリックしてください。

これで、[アクション作成] のメイン・ウィンドウが表示されます。

[ファイル] メニューから [開く] を選択してください。[開く] ダイアログ・ボックスが表示されます。

[ファイル] リストで、アクション定義を格納しているファイルを選択してください。`action_name`.dtという名前が付いています。

[了解] を選択してください。
# 既存のデータ型を編集するには
データ型:編集

以下の場合は、[アクション作成] を使用して既存のデータ型を編集できます。

データ型が [アクション作成] で作成された。

かつ、データ型を含むファイルが手動で(テキスト・エディタを使用して)編集されていない。

アプリケーション・マネージャの [Desktop_Apps] アプリケーション・グループを開き、[アクション作成] をダブルクリックしてください。

これで、[アクション作成] のメイン・ウィンドウが表示されます。

[ファイル] メニューから [開く] を選択してください。[開く] ダイアログ・ボックスが表示されます。

[ファイル] リストで、データ型の定義を格納しているファイルをダブルクリックしてください。

ファイル名は`action_name`.dtで、このaction_nameは、データ型を作成した時に同時に作成されたアクションの名前です。

[拡張機能] をクリックしてください。

[このアクションで使用するデータ型] リストで、編集するデータ型を選択してください。

[編集] をクリックして、[データ型の編集] ダイアログ・ボックスを開いてください。

[データ型の編集] ダイアログ・ボックスで変更を行ってください。終了する場合、[了解] をクリックしてください。

編集した定義を保存するには、[ファイル] メニューから [保存] を選択してください。