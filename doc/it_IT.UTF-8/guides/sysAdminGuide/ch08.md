Introduzione alle azioni e ai tipi di datiLeazioniintroduzionetipi di datiintroduzioneazionie itipi di
datisono componenti importanti per l'integrazione delle applicazioni
nel desktop. Essi permettono di creare un'interfaccia utente per l'avvio delle
applicazioni e per la gestione dei file di dati.Questo capitolo contiene un'introduzione ai concetti di azione e di
tipo di dati. In particolare, esso descrive:Le ragioni per cui &egrave; utile creare azioni e tipi di
dati per le applicazioni.Le relazioni reciproche tra azioni e tipi di dati.Le relazioni tra azioni e tipi di dati e le operazioni di
stampa del desktop.Vedere ancheLe procedure e le regole per la creazione delle azioni e dei tipi di
dati sono trattate in tre capitoli di questo manuale.Ilspiega come creare azioni e tipi di dati usando l'applicazione del desktop
Creare azione.Questa applicazione pu&ograve; essere usata per creare azioni e tipi
di dati per la maggior parte delle applicazioni senza bisogno di conoscere
la sintassi per la loro definizione.Ile ilspiegano come creare azioni e tipi di dati manualmente creando ed editando
i file di configurazione.La procedura di creazione deve essere eseguita manualmente quando si
desidera usare le funzioni avanzate non supportate da Creare azione.Introduzione alle azioniazioniintroduzioneLe azioni sono istruzioni scritte per automatizzare alcune operazioni
del desktop, come l'avvio delle applicazioni e l'apertura dei file di dati.
Il loro funzionamento &egrave; molto simile a quello delle macro o delle funzioni
di programmazione. Ogni azione &egrave; associata a un nome che viene usato
per eseguirla.In generale, si definisce un'azione per semplificare l'esecuzione di
un'operazione dall'interfaccia utente del desktop. Il desktop permette di
associare alle azioni vari componenti dell'interfaccia utente, come icone,
controlli del Pannello principale e opzioni dei menu.Possibili usi delle azioniAd esempio, il gruppo Strumenti_desktop della Gestione di applicazioni
contiene varie icone per l'avvio di utility del desktop.Icone di azioni nel gruppo di applicazioni Strumenti_desktopFacendo doppio clic su una di queste icone viene eseguita l'azione
corrispondente. L'esempio seguente riporta una parte della definizione dell'azione
che viene eseguita facendo doppio clic sull'icona Xwd Display. Questa azione
&egrave; definita nel file di configurazione/usr/dt/appconfig/types/lingua/xclients.dt:ACTION Xwud
{
  LABEL        Visualizzazione Xwd
  TYPE         COMMAND
  EXEC_STRING  /usr/bin/X11/xwud -noclick -in \
               %(File)Arg_1&ldquo;File xwd da visualizzare:&ldquo;%
  &hellip;
}Facendo doppio clic sull'icona verr&agrave; eseguito il comando specificato
nella rigaEXEC_STRING.azioniuso nel Pannello principalePannello principaleuso delle azioniAnche il Pannello principale
utilizza le azioni. L'esempio seguente riporta una parte della definizione
del controllo Terminale del pannello secondario Applicazioni personali. Il
controllo &egrave; definito nel file di configurazione/usr/dt/appconfig/types/lingua/dtwm.fp:CONTROL Term
{
  ICON         Fpterm
  LABEL        Terminale
  PUSH_ACTION  Dtterm
  &hellip;
}Facendo clic sul controllo Terminale verr&agrave; eseguita l'azione
specificata nel campoPUSH_ACTION&mdash; in questo caso,
l'azione di nome Dtterm.azioniuso nei menumenuuso delle azioniIn molti casi, le azioni vengono usate anche nei menu.
I file di dati sono normalmente associati ad azioni che compaiono nel relativo
menu Selezioni nella Gestione di file. Ad esempio, i file XWD (cio&egrave;
i file che terminano con il suffisso.xwdo.wd) sono associati a un'azione Aprire che visualizza la loro
immagine sullo schermo eseguendo l'azione Xwud.L'azione Aprire per il file di tipo XWDLe azioni che compaiono nel menuSelezioni, menuSelezioni sono specificate nella definizione del tipo
di dati per i file XWD. Questa definizione si trova nel file di configurazione/usr/dt/appconfig/types/lingua/xclients.dt.DATA_ATTRIBUTES XWD
{
  ACTIONS Open,Print
  ICON    Dtxwd
  &hellip;
}Il tipo di dati XWD, e le relative azioni Aprire e Stampare, sono descritti
in.azionicreazione di icone per
le applicazioniapplicazionicreazione di iconeiconedi applicazioniCome le azioni
creano le icone per le applicazioniSi consideri l'icona &ldquo;Visualizzazione Xwd&rdquo; nel gruppo Strumenti_desktop
della Gestione di applicazioni. Facendo doppio clic su questa icona viene
eseguito il client Xxwud. Tuttavia, questa icona non rappresenta
direttamente l'eseguibile/usr/bin/X11/xwud.L'icona &ldquo;Visualizzazione Xwd&rdquo; compare nel gruppo di applicazioni
perch&eacute; la directory contiene un file di nomeXwud(vedere la). Questo file rappresenta un'azione sottostante
con lo stesso nome &mdash; Xwud. Nella definizione dell'azione, il nome dell'azione
&egrave; quello che segue la parola chiaveACTION:ACTION Xwud
{
  LABEL         Visualizzazione Xwd
  TYPE          COMMAND
  WINDOW_TYPE   NO_STDIO
  EXEC_STRING   /usr/bin/X11/xwud -noclick -in \
                %(File)Arg_1"File Xwd da visualizzare:"%
  DESCRIPTION   L'azione Visualizzazione Xwd (Xwud) visualizza \
                un file xwd creato con l'azione Catturare Xwd \
                (Xwd). Utilizza il comando 'xwud'.
}file delle azionidefinizioneazionifile,
Vedere file delle azioni<$nopage>Il file viene dettofile dell'azioneperch&eacute;
rappresenta l'azione. Si definiscono in questo modo i file eseguibili con
lo stesso nome dell'azione che rappresentano. La sua icona nella Gestione
di applicazioni (o nella Gestione di file) viene dettaiconedi azioniazioniiconeicona dell'azione, oapplicazioniicone,
creazioneiconecreazione per le applicazioniicona dell'applicazione, perch&eacute; permette di avviare l'applicazione che rappresenta
con un doppio clic.Icona dell'applicazione (o dell'azione) che rappresenta
il file dell'azioneQuando la Gestione di applicazioni individua un file eseguibile, essa
verifica se il database delle azioni contiene un'azione con un nome corrispondente.
In caso affermativo, il file viene identificato come file dell'azione.file delle azionicontenutoIl contenuto del file dell'azione &egrave; irrilevante;
in genere, i file delle azioni contengono un testo di commento che descrive
la loro funzione nel desktop.Ilfile dell'azionenon deve essere confuso con
ilfile di definizione dell'azione. Il primo &egrave;
un file con lo stesso nome dell'azione, usato per creare l'icona
dell'applicazionenella Gestione di file o nella Gestione di applicazioni.
Il secondo &egrave; un file di nomenome.dtcontenente la definizione dell'azione.Quando il desktop identifica un file di un'azione, esso ne determina
l'aspetto e il comportamento utilizzando la definizione di quell'azione.Il campoEXEC_STRINGspecifica il comportamento
dell'icona dell'applicazione. Nel caso dell'icona &ldquo;Visualizzazione Xwd&rdquo;,
il campoEXEC_STRINGspecifica l'esecuzione del client
Xxwudcon determinati argomenti.Il campoLABELspecifica l'etichetta usata
per l'icona dell'applicazione.Il campoDESCRIPTIONcontiene il testo
che verr&agrave; visualizzato richiedendo l'aiuto sull'elemento.L'icona dell'applicazione Xwud utilizza l'immagine predefinita
per le azioni perch&eacute; la sua definizione non contiene un campoICONche specifichi un'immagine diversa.Al contrario, l'icona &ldquo;Comprimere File&rdquo; utilizza un'immagine
diversa perch&eacute; la definizione dell'azione sottostante contiene un campoICON:Ad esempio:ACTION Compress
{
   LABEL Comprimere File
   ICON  Dtcmprs
   &hellip;
}Icona specificata dal campo ICON nella definizione dell'azioneL'azione Xwud viene detta un'azione dicomando,
perch&eacute; la sua definizione contiene il comando da eseguire (EXEC_STRING). Il campoTYPEnella definizione
dell'azione specifica a quale tipo appartiene l'azione.Inizialmente, l'icona &ldquo;Visualizzazione Xwd&rdquo; appare solo
nel gruppo di applicazioni Strumenti_desktop. Tuttavia, &egrave; possibile
creare altre copie dell'icona ed inserirle in qualsiasi directory alla quale
si abbia accesso in scrittura. Finch&eacute; la definizione dell'azione Xwud
far&agrave; parte del database, qualsiasi file eseguibile creato con il nomeXwudrappresenter&agrave; quell'azione, e la sua icona nella Gestione
di file o nella Gestione di applicazioni potr&agrave; essere usata per eseguirla.Come le azioni utilizzano i file di dati comeazioniuso dei file come argomentiargomentidelle azioniargomentiUnargomentodi un comando &egrave; un oggetto,
solitamente unargomentiper l'indicazione di file nelle azionifile, su cui il comando viene eseguito. Un'azione pu&ograve; essere
scritta in modo da accettare un file come argomento.Ad esempio, il campoEXEC_STRINGdell'azione Xwud
specifica che &egrave; richiesto un file come argomento:EXEC_STRING   /usr/bin/X11/xwud -noclick -in \
              %(File)Arg_1"File Xwd da visualizzare:"%Il termineArgindica l'argomento.La sintassiArg_1, sintassiArg_1significa che si tratta del primo argomento,
mentre(File)indica che l'azione tratter&agrave; quell'argomento
come un file.iconerilascio dei fileazioniaccettazione del
rilascio di un fileiconedoppio clicIl modo pi&ugrave; semplice
per specificare un file come argomento consiste nel rilasciare un file di
dati sull'icona dell'applicazione. Il desktop determina il percorso del file
rilasciato e lo inserisce nella riga di comando al posto del testo tra i due
simboli%(%(File)Arg_1&ldquo;File Xwd
da visualizzare:"%). In questo modo, il comando che viene
eseguito &egrave;:/usr/bin/X11/xwud -noclick -inpercorso_fileFacendo doppio clic sull'icona dell'applicazione, il desktop determina
dal campoEXEC_STRINGche &egrave; richiesto un file
come argomento, e visualizza un riquadro di dialogo che chiede all'utente
di inserire un percorso o un nome per il file. Nel caso dell'azione Xwud,
la richiesta sar&agrave;:File Xwd da visualizzare:Il percorso o il nome del file inserito dall'utente verr&agrave; usato
come argomento del comando.Altri impieghi delle azioniazioniusiOltre all'impiego descritto per l'avvio delle applicazioni, le azioni
vengono utilizzate per creare funzionalit&agrave; per altre aree del desktop:Pannello principale.La definizione di un controllo del Pannello principale comprende campi
che specificano le azioni da eseguire quando l'utente fa clic sul controllo
o vi rilascia un file. Per maggiori informazioni, vedere.Menu.La sintassi per la definizione dei menu di controllo delle finestre
o degli spazi di lavoro permette di specificare l'azione da eseguire quando
l'utente seleziona un'opzione. Per maggiori informazioni, vederee la pagina di spiegazionidtwmrc(4).Comunicazioni tra le applicazioni.Un'applicazione pu&ograve; essere realizzata in modo da inviare e ricevere
informazioni usando un tipo speciale di azione, detta messaggio di ToolTalk
(TT_MSG). Le azioniTT_MSGsono
descritte nella documentazione dell'ambiente di sviluppo per il desktop.Introduzione ai tipi di datitipi di datiintroduzioneQuando si crea un nuovo file di dati, l'aspetto e il comportamento della
sua icona nella Gestione di file varia a seconda del tipo di dati associati
a quel file. Il desktop comprende un meccanismo di gestione dei tipi di dati
che offre la possibilit&agrave; di personalizzare l'aspetto e il comportamento
di file e directory.Creare azionecreazione dei
tipi di datitipi di daticreazione con Creare azioneCos'&egrave;
un tipo di dati?Un tipo di dati &egrave; un costrutto definito all'interno del database
del desktop. L'esempio seguente riporta la definizione del tipo di dati XWD.
La definizione &egrave; contenuta nel file di configurazione/usr/dt/appconfig/types/lingua/xclients.dt:DATA_ATTRIBUTES XWD
{
   ACTIONS         Open,Print
   ICON            Dtxwd
   NAME_TEMPLATE   %s.xwd
   MIME_TYPE       application/octet-stream
   SUNV3_TYPE      xwd-file
   DESCRIPTION     Questo file contiene un'immagine grafica in \
                   formato XWD. In genere questi file vengono \
                   creati catturando un'immagine dallo schermo \
                   con l'azione Catturare Xwd. Il suo tipo di dati \
                   &egrave; denominato XWD. I file XWD terminano con \
                   l'estensione '.xwd' o '.wd'.
}

DATA_CRITERIA XWD1
{
   DATA_ATTRIBUTES_NAME  XWD
   MODE                  f
   NAME_PATTERN          *.xwd
}

DATA_CRITERIA XWD2
{
   DATA_ATTRIBUTES_NAME  XWD
   MODE                  f
   NAME_PATTERN          *.wd
}Ogni definizione di un tipo di dati comprende due parti:DATA_ATTRIBUTESGli attributi dei dati descrivono l'aspetto
e il comportamento del tipo di dati.DATA_CRITERIAI criteri specificano le regole (basate
sul nome o sul contenuto) per l'assegnazione del file a un determinato tipo
di dati.Il campoDATA_ATTRIBUTES_NAMEcollega i criteri
agli attributi.Per ogni attributo (DATA_ATTRIBUTE) possono essere
definiti pi&ugrave; criteri (DATA_CRITERIA). Ad esempio,
il tipo di dati XWD possiede due criteri diversi per i nomi dei file (NAME_PATTERN) che specificano la possibilit&agrave; di
usare i suffissi.xwdo.wd.tipi di datirelazioni con le azioniazionirelazioni con i tipi di datiCome
i tipi di dati collegano i file di dati alle azioniSi consideri il tipo di dati XWD. Per creare un file di tipo XWD, l'utente
assegna al file un nome che termini con uno dei due suffissi (o estensioni)
accettati:.xwdo.wd. Il desktop
utilizza questo nome comecriterioper designare il tipo
di file.Il tipo di dati XWD assegna ad ogni file le seguenti caratteristiche:Un'icona caratteristica che permette di riconoscere facilmente
il tipo di file.Un testo di aiuto che fornisce informazioni sul tipo di dati.Un menu Selezioni personalizzato nella Gestione di file contenente
le azioni Aprire e Stampare. L'azione Aprire associata ai file XWD esegue
l'azione Xwud.Esecuzione delle azioni dal menu SelezioniSelezioni,
menuIl menu Selezioni della Gestione di file &egrave; attivo solo quando
&egrave; stato selezionato un file o una directory. I comandi che compaiono
nella parte inferiore del menu variano a seconda del tipo di dati. Nel caso
dei file XWD, il menu Selezioni presenter&agrave; le opzioni Aprire e Stampare.Il campoACTIONSnella definizione del tipo di dati
specifica i comandi che verranno aggiunti al menu Selezioni per quel tipo
di dati.DATA_ATTRIBUTES XWD
{  
      ACTIONS   Open,Print  
      &hellip;
}Selezioni, menuIl contenuto
del menu Selezioni della Gestione di file dipende dal tipo di dati dell'oggetto
selezionato. Tuttavia, l'azione Aprire &egrave; comune a molti tipi di dati
diversi.Il menu Selezioni associato a un file XWDIn genere, l'azione AprireAprire, azioneavvia l'applicazione a cui &egrave; associato il file di dati.
Ad esempio, aprendo un file XWD si esegue l'azione Xwud, che a sua volta
eseguir&agrave; il client X xwud per visualizzare l'immagine del file sullo
schermo. In altre parole, per il tipo di dati XWD l'azione Aprire coincide
con l'azione Xwud. Allo stesso modo, aprendo un file di dati di tipo TEXTFILE
verr&agrave; avviato l'Editor di testo, mentre aprendo un file BM (a mappa
di bit) o PM (a mappa di pixel) verr&agrave; avviato l'Editor delle icone.La possibilit&agrave; di creare una serie di azioni Aprire che eseguono
operazioni diverse si basa su due caratteristiche delle definizioni delle
azioni:azionimappaturamappatura delle azioniLa
mappatura delle azioni.La mappatura delle azioni permette di creare un'azione che esegua un'altra
azione anzich&eacute; eseguire direttamente un comando. Ad esempio, &egrave;
possibile creare un'azione Aprire che sia mappata per (cio&egrave; che esegua)
l'azione Xwud.azionirestrizione
dei tipi di datiLa restrizione dei tipi di dati associati
alle azioni.Le definizioni delle azioni possono includere un campoARG_TYPEche limiti l'esecuzione dell'azione a certi tipi di dati. Ad esempio,
si pu&ograve; specificare che l'azione Aprire mappata per l'azione Xwud venga
applicata solo ai file di dati di tipo XWD.Qui di seguito &egrave; riportata la definizione che mappa l'azione
Aprire dell'azione Xwud per il tipo di dati XWD. La definizione si trova nel
file di configurazione/usr/dt/appconfig/types/lingua/xclients.dtdel database:ACTION Open
{
   LABEL       Aprire
   ARG_TYPE    XWD
   TYPE        MAP
   MAP_ACTION  Xwud
}Il campoTYPEspecifica che si tratta di un'azione
di mappatura; il campoMAP_ACTIONspecifica che questa
azione dovr&agrave; eseguire l'azione Xwud. Il campoARG_TYPEspecifica che questa azione verr&agrave; applicata solo ai file associati
al tipo di dati XWD.Si confronti ora la definizione precedente dell'azione Aprire con la
definizione riportata qui di seguito, contenuta nel file del database/usr/dt/appconfig/types/lingua/dt.dt:ACTION Open
{
   LABEL       Aprire
   ARG_TYPE    BM
   TYPE        MAP
   MAP_ACTION  Dticon
}Questa definizione si applica ai file associati al tipo di dati (ARG_TYPE) BM (file a mappa di bit). La definizione mappa l'azione
Aprire sull'azione Dticon, cio&egrave; sull'azione che avvia l'Editor delle
icone.tipi di datirisposta al doppio
clicDefinizione dell'effetto del doppio clic in base
al tipo di datiL'effetto del doppio clic associato al tipo di dati &egrave; definito
dalla prima voce del campoACTIONS. Nel caso del tipo di
dati XWD, il doppio clic esegue l'azione Aprire, che a sua volta eseguir&agrave;
l'azione Xwud.tipi di datirisposta al rilascio
su un'iconaRilascio
di un file di dati sull'icona di un'azioneQuando si rilascia un file di dati sull'icona di un'azione, il sistema
esegue quell'azione usando il file di dati come argomento (vedere).Ad esempio, rilasciando un file di dati XWD sull'icona &ldquo;Visualizzazione
Xwd&rdquo; verr&agrave; eseguita l'azione Xwud utilizzando come argomento
il file rilasciato. Il client Xxwudverr&agrave; quindi
eseguito con quel file di dati.tipi di datistampastampaconfigurazione
per un tipo di datiCreazione di azioni di stampa associate
ai tipi di datiPer stampare un file di dati dal desktop si possono usare i seguenti
metodi:Usare il comando Stampare del menu Selezioni della Gestione
di file.Rilasciare un file di dati su un'area appropriata del desktop
(il controllo della stampante del Pannello principale o l'icona di una stampante
nella Gestione della stampa).Oltre a questi metodi generali, in molti casi &egrave; possibile stampare
i file dall'interno delle applicazioni.I metodi di stampa del desktop utilizzano azioni di nome Stampare. Come
nel caso di Aprire, il nome Stampare viene usato per molti tipi di dati diversi.
Ci&ograve; significa che anche le azioni Stampare utilizzano la mappatura
delle azioni e il campoARG_TYPEper personalizzare la
stampa per ogni tipo di dati.L'esempio seguente riporta l'azione Stampare associata al tipo di dati
XWD. La definizione si trova in/usr/dt/appconfig/types/lingua/xclients.dt:ACTION Print
{
   LABEL       Stampare
   ARG_TYPE    XWD
   TYPE        MAP
   MAP_ACTION  NoPrint
}Questa azione Stampare, specifica per i file XWD, &egrave; mappata su
un'azione NoPrint. NoPrint &egrave; un'azione speciale definita in/usr/dt/appconfig/types/lingua/dt.dt, cheNoPrint, azionevisualizza
un messaggio di avvertimento indicante che il tipo di dati dell'oggetto non
pu&ograve; essere stampato.Si confronti ora l'azione Stampare associata ai file XWD con la seguente
azione Stampare per i file PCL:ACTION Print
{
   LABEL       Stampare
   ARG_TYPE    PCL
   TYPE        MAP
   MAP_ACTION  PrintRaw
}L'azione PrintRaw, definita nel file di configurazione/usr/dt/appconfig/types/lingua/print.dt,
contiene la riga comandi per la stampa dei file PCL.ACTION PrintRaw
{
   TYPE