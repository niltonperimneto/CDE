Responding to Help RequestsThis chapter explains how to display different types of help information
by setting Help Dialog widget resources.Requesting Helpresponding tohelp requestsrequests, responding to helpWhen a user requests help while using your application, it is the application's
responsibility to determine what help topic should be displayed.Context SensitivitySome help requests amount to an explicit request for specific information,
such as help on &ldquo;version&rdquo; (which usually displays the copyright
topic). Other help requests, however, may require some degree of context sensitivity.
That is, some processing might be needed to determine the appropriate help
topic based on the user's current context within the application.For instance, your application might test the status of certain modes
or settings to determine the appropriate help topic. Or, it might test the
value of an input field and provide detailed help if the value is not valid,
and general help if the value is valid.Entry PointsAnentry pointis a specific location within a
help volume&mdash;usually the beginning of a topic&mdash;that can be directly
accessed by requesting help within the application.From the author's point of view, entry points are established by assigning
IDs at the appropriate places within the help volume. From the programmer's
point of view, entry points are created by enabling the user to request help
and using the appropriate ID when a particular request is made.There are four general ways for users to request help:Pressing thehelp
key(which is F1 on most keyboards)Clicking the Help button in a dialog boxChoosing a command from the application's Help
menuChoosing On Item helpDisplaying Help TopicsWhen a help request is made, the application determines what help topic
to display. It then creates (if necessary) and manages a help dialog, and
sets the appropriate resources to display a help topic.Most requests display help topics that are part of the application's
help volume, but the Help System's help dialogs are also capable of displaying
man pages, text files, and simple text strings.The Help System's help dialogs are based exclusively
on Xt Intrinsics and Motif programming, so you change the values within
a help dialog just like any other widget: by setting resources.TheDtNhelpTyperesource determines
what type of information is displayed. It can be set to any of these values:DtHELP_TYPE_TOPICfor displaying normal help topics that are
part of a help volume. The volume is specified by setting theDtNhelpVolumeresource; the topic is specified
by settingDtNLocationIdresource.DtHELP_TYPE_STRINGfor displaying a string supplied by the application. Automatic
word wrap is disabled, so line breaks are observed as specified in the string.
The string is specified by setting theDtNstringDataresource.DtHELP_TYPE_DYNAMIC_STRINGfor displaying a string supplied by the application, using word
wrap to format the text. Line breaks within the string are used to separate
paragraphs. The string is specified by setting theDtNstringDataresource.DtHELP_TYPE_FILEfor displaying a text file. The name of the file to be displayed is specified
by setting theDtNhelpFileresource.DtHELP_TYPE_MAN_PAGEfor displaying a manual reference page (man page) in a help
dialog. The man page to be displayed is specified by setting theDtNmanPageresource.These values are defined in theHelp.hfile.See AlsoTo Display a Help TopicCreate a help dialog.Set the following resources for the help dialog:DtNhelpTypeSet toDtHELP_TYPE_TOPIC.DtNhelpVolumeSet to the volume name for your application.DtNlocationIdSet to the topic ID that you want to
display.You can also set other values for the dialog, such as its size and title.Manage the dialog usingXtManageChild().ExampleThis program segment displays a topic with the IDgetting-startedin the volumeMyVolume.ac = 0;
XtSetArg (al[ac], DtNhelpType,   DtHELP_TYPE_TOPIC);  ac++;
XtSetArg (al[ac], DtNhelpVolume,  &ldquo;MyVolume&rdquo;);         ac++;
XtSetArg (al[ac], DtNlocationId,  &ldquo;getting-started&rdquo;);  ac++;
XtSetArg (al[ac], DtNcolumns,    40);                  ac++;
XtSetArg (al[ac], DtNrows,       12);                  ac++;
XtSetValues (helpDialog, al, ac);
XtManageChild (helpDialog);If the help volumeMyVolumeis not registered,
then a complete path to theMyVolume.sdlfile is required
for the value ofDtNhelpVolume.To Display a String of TextCreate a quick help dialog.You can use a general help dialog to display string data, but this isn't
recommended because most of its features do not apply to string data.Set the following resources for the help dialog:DtNhelpTypeSet toDtHELP_TYPE_DYNAMIC_STRING(if you want word wrap enabled) orDtHELP_TYPE_STRING(if you want the line breaks
within the string to be maintained)DtNstringDataSet to the string you want to display.
A copy of the string is kept internally, so you need not maintain your copy
of it.You can also set other values for the dialog, such as its size and title.Manage the dialog usingXtManageChild().ExampleThis program segment displays a string stored in the variabledescriptionString.ac = 0;
XtSetArg (al[ac], DtNhelpType,   DtHELP_TYPE_DYNAMIC_STRING); ac++;
XtSetArg (al[ac], DtNstringData, (char *)descriptionString);   ac++;
XtSetValues (quickHelpDialog, al, ac);
XtManageChild (quickHelpDialog);If the string is no longer needed within the application, the memory
can be freed, because the help dialog makes its own copy of the data.XtFree (descriptionString);To Display a Text FileCreate a quick help dialog or retrieve one from
your dialog cache.You can use a general help dialog to display a text file, but this isn't
recommended because most of its features are useful only for standard help
topics.Set the following resources for the help dialog:DtNhelpTypeSet toDtHELP_TYPE_FILE.DtNhelpFileSet to the file name you want to display.
If the file is not in the application's current directory, provide a path
to the file.You can also set other values for the dialog, such as its size and title.
In particular, you might want to set the width to 80 columns, which is the
standard width for text files.Manage the dialog usingXtManageChild().ExampleThe following program segment displays a file named/tmp/printer.list. It also sets the size of the dialog to better suit a text file.ac = 0;
XtSetArg (al[ac], DtNhelpType, DtHELP_TYPE_FILE);      ac++;
XtSetArg (al[ac], DtNhelpFile,  &ldquo;/tmp/printer.list&rdquo;);  ac++;
XtSetArg (al[ac], DtNcolumns,  80);                    ac++;
XtSetArg (al[ac], DtNrows,     20);                    ac++;
XtSetValues (quickHelpDialog, al, ac);
XtManageChild (quickHelpDialog);To Display a Man Pagedisplayingman pageman pagedisplaying<Filename | Command>DtHELP_TYPE_MAN_PAGE <Default Para Font>Create a quick help dialog.You can use a general help dialog to display a man page, but this isn't
recommended because most of its features are useful only with standard help
topics.Set the following resources for the help dialog:DtNhelpTypeSet toDtHELP_TYPE_MAN_PAGE.DtNmanPageSet to the name of the man page. The
value of this resource is passed directly to the systemmancommand. So, to specify a particular section of a man page, precede the man
page name by a section number, just as you would if you were typing themancommand conventionally.You can also set other values for the dialog, such as its size and title.Manage the dialog usingXtManageChild().ExampleThe following program segment displays the man page for thegrepcommand. It also sets the size of the dialog to better suit
a man page.ac = 0;
XtSetArg (al[ac], DtNhelpType, DtHELP_TYPE_MAN_PAGE);  ac++;
XtSetArg (al[ac], DtNmanPage,   &ldquo;grep&rdquo;);   ac++;
XtSetArg (al[ac], DtNcolumns,  80);                          ac++;
XtSetArg (al[ac], DtNrows,     20);                          ac++;
XtSetValues (quickHelpDialog, al, ac);
XtManageChild (quickHelpDialog);Enabling the Help Key (F1)F1 (help key)key, enabling help (F1)help keyThehelp keymechanism is a feature built into
all Motif manager widgets and primitive widgets. The help key is enabled
by adding ahelp callbackto the widget where you want
the help key active.Within your application, you should add a help callback to each widget
where you want a unique entry point into help. The help callback mechanism
automatically &ldquo;walks&rdquo; up the widget hierarchy (up to the shell
widget) until it finds a widget with a help callback, then invokes that callback.If you add a help callback to a manager widget, when the help key is
pressed for any of its children, the manager's help callback is invoked (unless
the child widget has a help callback of its own).To Add a Help CallbackUse theXtAddCallback()function as follows:XtAddCallback (
      Widget            widget,
      String            DtNhelpCallback,
      XtCallbackProc    HelpRequestCB,
      XtPointer         clientData );Where:widgetThe widget where you want to activate
the help key.HelpRequestCB()The function in your application that
handles the help request when the user presses the help key.clientDataThe data you want passed to theHelpRequestCB()function. Typically, this data identifies the topic
to be displayed.When the user presses the help key, the help callback is invoked for
the widget with the current keyboard focus. If that widget does not have a
help callback, the help callback for its nearest ancestor that does have a
help callback is invoked.If no help callbacks are found, nothing happens. Therefore, it is recommended
that you add a help callback to each shell in your application. This ensures
that no user requests for help are lost.Adding a help callback to a dialog shell automatically enables the Help
button on the dialog to invoke the help callback.Importance of Client DataSpecifying a unique value forclientDatain each help callback you add saves you the trouble of writing a separate
function to process each help callback. Your application can have a single
callback procedure to process all help requests (see). Within the callback procedure, use theclientDatato identify where the user requested help.
That is, each time you add a help callback, you should provide a unique value
forclientData.ExampleThe following example demonstrates one way to associate IDs with entry
points. AHelpEntryIds.hfile is used to define a unique
integer for eachclientDatavalue for each
help callback. Also defined are two ID strings for each widget: one for normal
F1 help, the other for item help mode (where the user picks a widget to get
a description).For this example, assume that the application's user interface is just
a main window with three input fields: Name, Address, and Telephone Number.
Here's what theHelpEntryIds.hfile would contain:#define HELP_volumeName            "MyVolume"
#define HELP_MainWindow            100
#define HELP_MainWindow_ID         "basic-tasks"
#define HELP_MainWindow_ITEM_ID    "main-window-desc"

#define HELP_NameField             101
#define HELP_NameField_ID          "specifying-a-name"
#define HELP_NameField_ITEM_ID     "name-field-desc"

#define HELP_AddressField          102
#define HELP_AddressField_ID       "specifying-an-address"
#define HELP_AddressField_ITEM_ID  "address-field-desc"

#define HELP_PhoneField            103
#define HELP_PhoneField_ID         "specifying-a-phone-no"
#define HELP_PhoneField_ITEM_ID    "phone-field-desc"Within the part of the application that initially creates the widgets,
a help callback is added to each widget as follows:XtAddCallback (mainWindow, DtNhelpCallback,
               HelpRequestCB, HELP_MainWindow);
XtAddCallback (nameField, DtNhelpCallback,
               HelpRequestCB, HELP_NameField);
XtAddCallback (addressField, DtNhelpCallback,
               HelpRequestCB, HELP_AddressField);
XtAddCallback (phoneField, DtNhelpCallback,
               HelpRequestCB, HELP_PhoneField);Within theHelpRequestCB()function, theclientDataparameter is used to dispatch the help
requests (through aswitch()statement). Within each case,
the value of a global flagitemHelpis tested to see if the help callback was invoked by the F1 key (the flag
is &ldquo;false&rdquo;) or by the user picking the widget in item help mode
(the flag is &ldquo;true&rdquo;).XtCallbackProc HelpRequestCB (
      Widget     w,
      XtPointer  clientData,
      XtPointer  callData)
{
   char    *topicToDisplay;
   Boolean  useQuickHelpDialog;
   /*Determine the topic ID for the given `clientData.'*/
   switch ((int)clientData)
     {
       case HELP_MainWindow:
         useQuickHelpDialog = False;
         if (itemHelpFlag)
           topicToDisplay = HELP_MainWindow_ITEM_ID;
         else
           topicToDisplay = HELP_MainWindow_ID;
         break;       case HELP_NameField:
         useQuickHelpDialog = True;
         if (itemHelpFlag)
           topicToDisplay = HELP_NameField_ITEM_ID;
         else
           topicToDisplay = HELP_NameField_ID;
         break;       case HELP_AddressField:
         useQuickHelpDialog = True;
         if (itemHelpFlag)
           topicToDisplay = HELP_AddressField_ITEM_ID;
         else
           topicToDisplay = HELP_AddressField_ID;
         break;       case HELP_PhoneField:
         useQuickHelpDialog = True;
         if (itemHelpFlag)
           topicToDisplay = HELP_PhoneField_ITEM_ID;
         else
           topicToDisplay = HELP_PhoneField_ID;
         break;       default:
         /*An unknown clientData was received.*/
         /*Put your error handling code here.*/
         return;
         break;
     }
   /*Display the topic.*/
   ac = 0;
   XtSetArg (al[ac], DtNhelpType,   DtHELP_TYPE_TOPIC); ac++;
   XtSetArg (al[ac], DtNhelpVolume, HELP_volumeName);    ac++;
   XtSetArg (al[ac], DtNhelpType,   topicToDisplay);     ac++;
   if (useQuickHelpDialog)
     {
        XtSetValues (mainQuickHelpDialog, al, ac);
        XtManageChild (mainQuickHelpDialog);
     }
   else
     {
        XtSetValues (mainHelpDialog, al, ac);
        XtManageChild (mainHelpDialog);
     }
   /*Clear the `item help' flag.*/
   itemHelpFlag = False;
 }The preceding function assumes that the application uses two help dialogs
for all help requests (mainHelpDialogandmainQuickHelpDialog), and that those dialogs have already been created. It also assumes
thatalandac(used in assembling
Xt argument lists) are declared elsewhere.Providing a Help Menuhelp
menu, providingmenuproviding help menuTheStyle Guide and Certification Checklistrecommends
that each menu bar include a Help menu. The Help menu may contain a variety
of commands that lets the user access different types of online help for your
application.The most important commands include:Introductiondisplays the
home topic of your application's help, allowing the user to use hyperlinks
to navigate to any desired information.Using Helpdisplays &ldquo;help&rdquo;
on help. This is information that tells the user how to use the Help System.Versiondisplays your application's
version and copyright information.Additional commands may display help on special keyboard usage, application
tasks, reference, or tutorials. You should design your Help menu to best suit
your application, while staying within the guidelines and recommendations
of theStyle Guide and Certification Checklist.See Alsodescribes how authors create the