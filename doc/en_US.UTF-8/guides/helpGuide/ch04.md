Processing and Displaying a Help VolumeThis chapter shows you how to process your marked-up help files to create
an online format that you view using the Help System. It also describes how
to make your help volume accessible from the desktop Front Panel Help Viewer.OverviewBefore a help volume can be displayed, you must create a run-time help
file by processing your files with the DocBook software. Run-time files use
an online presentation format calledSemantic Delivery Language(SDL). An.sdlfile extension identifies a
run-time help file.The utilitydtdocbooktakes documents conforming
to the DocBook 2.2.1 DTD subelement Part and produces documents conforming
to the SDL 1.2 DTD, which can serve as input to the DtHelp viewer.During translation, several items are precomputed to speed run-time
display of the document. These items include: the table of contents, the keyword
index, resolution of cross-references, and labeling of ordered lists. The
SDL conforming document produced by the translation is compressed by default.The Help System defines desktop actions and data types for help-specific
files. This lets you easily process and view a run-time help file from the
desktop.DocBook SoftwareThe DocBook software can be invoked automatically by double-clicking
a help source file in File Manager or by running thedtdocbookcommand manually in a terminal window.dtdocbookdoes two significant tasks:The DocBookparserconverts
your marked-up files into an internal format (Semantic Delivery Language)
understood by the Help System. If you've made any markup errors, the errors
are reported in a file namedvolume.log.If there are no parser errors, the master help
volume file (volume.sdl)
is created.Viewing Your VolumeAfter processing your source files with DocBook, your help volume is
ready to be displayed. You can display it by double-clicking thevolume.sdlfile icon in File
Manager, or use thedthelpviewcommand in a terminal window.If you have written help for an application and the application is ready
to use, you can display your help by running the application and asking for
help.Creating Run-Time Help FilesWhen you rundtdocbook, it reads yourvolume.sgmfile and any additional source files
that are included using entities. It also validates graphics file names.Be sure the/usr/dt/bin/dtdocbookcommand is in your
search path. (If you're not sure how to do this, ask your system administrator.)To Create a Run-Time Help VolumeOpen File Manager and change to the directory
where yourvolume.sgmfile is located.Select the file icon.Choose Compile from the File Manager Selected menu.Thevolume.sgmfile is processed and creates avolume.sdlfile and avolume.logfile.DocBook OutputDocBook takes the filevolume.sgmas its input and outputs several files:Most importantly, the final output file, a
run-time help volume, namedvolume.sdl.If any errors occurred during processing, they
are reported in an error file namedvolume.log, typically removed after use.Thevolume.sdlfile is not created until the source file is without errors.Thevolume.sdl,
file, plus your graphics files, are read by the Help System to display help
topics.The run-time help file has the same base name as yourvolume.sgmfile. For example, if your source
file is namedLibrarian.sgm, then the help volume name
isLibrarian.sdl.Thedtdocbookutility accepts a single file as an
argument. If the file name ends in the characters &ldquo;.sgm&rdquo;,
those characters are assumed to be the file name extension and are removed
to create the file base names for all intermediate files and for the final
output file.When thedtdocbook -cor thedtdocbook -doption is specified to request compression or decompression of
an existing SDL file, the input file name will end in the characters &ldquo;.sdl&rdquo;. Again, those characters are assumed to be the file
name extension and are removed to create the file base names for all intermediate
files and for the final output file.If the-coption is specified and the file is already
compressed, the file will be decompressed and recompressed. This action is
useful as a means to verify the integrity of a compressed SDL file.If the-dis specified and the file is already decompressed,
the file will be re-parsed, all precomputations will be performed, and the
file will be re-written. This action is useful as a means to verify the integrity
of an SDL file. It is also useful for forcing a recomputation of the table
of contents, including byte offsets to individual help topics, when such recomputation
is made necessary, for example, by editing the SDL file directly.The final output file name extension will always be &ldquo;.sdl&rdquo;, unless thedtdocbook -ooption
is specified, in which case thefilenameargument todtdocbook -owill be used as given as the output
file name.Never rename a run-time help file or graphics file after runningdtdocbook. The information stored in thevolume.sdlfile depends on the original names.
If you rename yourvolume.sgmfile or any of your graphic files, be sure to rerundtdocbook.To Run the dtdocbook Command ManuallyRun thedtdocbookcommand
as follows:dtdocbookoptionsvolumeObserve thatoptionsare entered before thevolumename.lists all available options.Examples of Command Options.sgmThe following command processes a help volume namedMyVolume:dtdocbook MyVolumeUsing the-roption removes all files previously
generated by processing a source file ofMyVolume.sgm:dtdocbook -r MyVolume.sgmThe following command processes the source file namedMyVolume.sgmand leaves the result in the file namedOther_File.sdl::dtdocbook -o Other_File.sdl MyVolume.sgmUsing the-voption causes the progress of the processing
to be displayed on your screen:dtdocbook -v MyVolumeSee Alsoexplains which help files are included in your
application installation package.To Review and Correct Parser ErrorsThe primary source of error messages will be the SGML parser. Most of
them will be SGML syntax error messages, and a few will be of the "file not
found" variety.The two passes of the translation process that takes the source file
from SGML to SDL will also generate syntax error messages and "file not found"
messages, but to a lesser degree. The second of the two passes will issue
error messages rarely, since all the syntax and context will have been checked
by then.After runningdtdocbook, look at the contents of
thevolume.logfile
(wherevolumeis the base name of yourvolume.sgmfile).It is quite possible for a single, simple error to produce several error
messages, because the error may cause the parser to lose track of the intended
context, making it impossible to interpret subsequent markup properly.Common ErrorsMost processing errors result from these common mistakes:Omitting an end tagUsing an incorrect entity nameReferring to an invalid element IDOmitting an end tag for an element is a common mistake.Virtually
all DocBook elements require end tags.Check your markup when you
have nested one structurally complex element within another, such as a figure
within a list.Errors can also be introduced by using an incorrect entity name. In
most instances, it is simply a misspelled word. In other cases, an entity
name may have been changed, but cross-references to the original name were
overlooked. When you change an entity name, remember to search your source
file (or files) for all instances of the entity name.Errors can also be introduced by changing the ID assigned to an element,
since this affects any cross-reference or link to that topic. When you change
an ID, remember to search your source file (or files) for all instances of
that ID.Viewing a Help VolumeThe Help Viewer can be used to display any help volume. It supports
all DocBook hyperlinks but not application-defined links (because it cannot
know how your links are to be interpreted).If you are writing application help and your application is ready to
use, you can also view your help by running your application, then requesting
help just as a user would.To Display a Help VolumeOpen File Manager and change to the directory
where thevolume.sdlfile is located.Double-click its icon.The default action displays the file using the Help Viewer.To Run the dthelpview Command ManuallyIf thevolume.sdlfile for the volume you want to display is either in the current
directory or has been registered, execute this command:dthelpview -helpVolumevolume.sdlOr,if thevolume.sdlis in another directory (and hasn't been registered), execute
this command:dthelpview -helpVolume /full-path/volume.sdlThe-helpVolumeparameter can be shortened to-hin any of these commands.ExampleSuppose you have just edited your help volume. First, process it with
the DocBook software:dtdocbook MyVolume.sgmIf no errors occurred, you could then display it with this command:dthelpview -h MyVolume.sdlSee AlsoExample: A Personal Help DirectoryDuring a project, you may want to access the help volume you are developing,
but not expose it to all users on your system. For example, suppose your
working directory is/projects/helpand your help volume
is namedMyvolume.First, create the personal help directory in your home directory where
you can register the volume:mkdir -p $HOME/.dt/help/CNow create a symbolic link to theMyvolume.sdlfile (which is created by the DocBook software):ln -s /projects/help/Myvolume.sdl $HOME/.dt/help/C/Myvolume.sdlYou can now display the volume with the following command (regardless
of your current directory) because the.dt/help/Cdirectory
within your home directory is one of the first places the Help System looks
for help volumes.dthelpview -helpVolume Myvolume.sdlAdding Your Help to the Index VolumeThe desktop provides a special help volume called the index volume that
lists help volumes available on your system. The index volume is displayed
by clicking the Help Viewer control in the Front Panel.You can view assorted help volumes directly from the index volume. This
allows access to application-specific help without starting the application.
If you are writing standalone help, this is the only way for users to get
to your help.Index help volume displaying help familiesTo make your help volume available in the index volume, you create a
help family file. When your application is registered on the desktop, the
presence of a family file causes the help volume to be included in the index
volume.Index VolumeA desktop utility creates and updates the index volume. When a user
clicks on the Front Panel Help Viewer for the first time, the utility is automatically
run. It identifies help volumes and help family files that are located in
the help search path directories. It creates a file calledindex.hvin the user'sHomeDirectory/.dt/help/$DTUSERSESSIONdirectory. After its initial creation, the volume is updated only
if changes have occurred.To manually update the index volume, refer to.Any help volume listed in the index volume can be viewed by selecting
the volume title. Because you can display and navigate through different volumes,
the index help window includes an additional button, called Top Level.You
can use this button to return to the index list after displaying one or more
volumes.Help Family FileThe desktop utility examines help family files to identify which help
volumes are gathered into the index volume.onshows two help families, Common Desktop Environment and Overview and Basic
Desktop Skills, listed in the index volume. Each family file consists of
one or more related help volumes. For example, the Common Desktop Environment
family includes different volumes that describe the desktop.Refer to the Advanced User's and System Administrator's Guide for a
detailed explanation of how an application and its help files are installed
on the desktop.To Create a Help FamilyPick a file name that is unique to your product.
Use the.hfextension to identify the file as ahelp family.family.hfEnter the following lines into the file:*.charSet:character-set*.title:family title*.bitmap:icon file*.abstract:family abstract*.volumes:volume volume volume ...Wherecharacter-setspecifies the character set used
by thefamily titleandfamily abstractstrings.for a
list of supported character sets. Thefamily titleandfamily abstractshould not contain any DocBook markup; this file
isnotprocessed with the DocBook software.Theicon fileis optional. If you provide one, the
path you use to specify the location of the file should be a complete path
name. If you do not provide an icon, do not include the*.bitmapresource in your family file.The list ofvolumenames identifies which volumes belong
to the family. The volumes will be listed in the order they appear on this
line. A volume may be listed in more than one family.If any of the values occupy more than one line, end each line &mdash;
except the last &mdash; with a backslash (\).Any line in the file that begins with an!(exclamation
mark) is a comment line and is ignored.When you prepare your final product, you should
install yourfamily.hffile with the
rest of your help files. When the desktop integration script, (dtappintegrate) is run, it creates the symbolic links to your family file.TheAdvanced User's and System Administrator's Guidedescribes how to run thedtappintegratescript.ExampleHere's an example of a family file for the desktop's online help.*.charSet:      ISO-8859-1
*.title:        Common Desktop Environment
*.bitmap:       /usr/dt/appconfig/help/C/graphics/cdelogo.pm
*.abstract:     Overview and Basic Desktop Skills \
                * File Manager and the Desktop \
                * Front Panel \
                * Application Manager \
                * Style Manager \
                * Text Editor \
                * Mailer
*.volumes: Intromgr.sdl Filemgr.sdl FPanel.sdl
           Appmanager.sdl Stylemgr.sdl
           Textedit.sdl Mailer.sdlThe help family file actually included with the desktop software may
not exactly match this example.See Alsofor a list of supported character set namesTo Display the Index VolumeChoose the Help Viewer control from the desktop's
Front Panel.Scroll the help window to view the help families
available on your system.If desired, display a volume by selecting the help
family title.To view help information about the Help System, choose the title Common
Desktop Environment and then Desktop Help System.To Display the Index Volume ManuallyRun thedthelpviewcommand
as follows:dthelpview -helpVolume indexSee Alsolistsdthelpviewcommand line.dthelpgen(1) man pagePrinting Help Topicsprintinghelp topicsAfter displaying your help volume, you can print help topics. Using
the Print dialog box shown inyou can print an individual
topic, a table of contents and index information, or the entire help volume.
Printed output omits graphics.Help print dialog boxTesting Your Helptestinghelpvalidating hyperlinkshyperlinkvalidating hyperlinksverifying application entry pointsapplication entry points, verifyingentry points in application, verifyingpoints, entry, verifying in applicationtestinggraphics on various displaysgraphics, testing on various displaysdisplays, testing graphics on variousTesting your help volume is as important as testing any software product.
Here are some tips to help you plan your testing.Validating HyperlinksDisplay your help volume and
try every hyperlink. Any underlined text (solid or dashed underlines) is a
hyperlink. Also, test any graphics that are hyperlinks. Graphic hyperlinks
use an open-cornered border (dashed or solid) around the image as a hyperlink
cue.If you are writing application-specific help and
you have included anyJumpNewView,Man,
orAppDefinedlinks, you must test these links from your
application. Testing such links usingdthelpviewdoes not
ensure that the links will operate correctly from within your application.Verifying Entry PointsIf you are writing application-specific help that uses IDs to access
particular help topics, there are two ways to verify that the IDs have been
properly established within the help volume:Run your application and request
help just as a user will, trying each of the entry points. This also verifies
that the application is using the correct IDs.If your application is not ready to use (still
under development), you can test each ID by runningdthelpviewfor each ID:dthelpview -helpVolumevolume.sdl-locationIdidWhereidis the location ID that you
want to test. Ifdthelpviewdisplays the correct topic,
then the ID is okay.Checking Index EntriesUsers search or browse a help volume index to find help topics. Examine
your index entries carefully to eliminate any vague terms or duplicate entries.
Also select each index entry to verify that the topic displayed is the most
appropriate information.Testing GraphicsPhysically run your application
on various displays to verify that the graphics are acceptable on color,
grayscale, and monochrome displays.You can also simulate other displays by changing
the number of colors used by the desktop. To do so, open Style Manager, choose
Number Of Colors, and select a different color option.See Also