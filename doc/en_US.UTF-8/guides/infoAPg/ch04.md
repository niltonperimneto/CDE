Building Information Librariesinformation librariesbuildingThis chapter discusses how to usedtdocbook2infolibsubcommands to validate and
build your SGML documents into an Information Manager-browsable
library and how to update style sheet information in a bookcase.You use thedtdocbook2infolib validatecommand to
validate your SGML book documents and your bookcase specification.
Validation is useful during preparation for the build.Information Managercommandsdtdocbook2infolib validateYou use thedtdocbook2infolib buildcommand,
which also performs SGML validation, to build a new information library,
add a bookcase to an existing information library, and update an
existing library.Information Managercommandsdtdocbook2infolib buildOnce you have built an information library, you can use
thedtdocbook2infolib updatecommand to update the
style sheet information associated with the library.
These procedures are covered in:Information Managercommandsdtdocbook2infolib updateValidating Your SGML DocumentsBuilding, Adding, and Replacing Bookcases
in a LibraryUpdating Style Sheets in Built BookcasesSee thedtdocbook2infolib(1)man page for command
syntax and additional examples of these commands.Before You Build a New Libraryinformation librariesbuildingprerequisitesBefore you build a new Information Manager information library you need to:Specify the method to be used to map external entity references
to your system files. You can either:Set the appropriate environment variables for handling external
entity references, orSpecify the appropriate catalog file using the-moption with thedtdocbook2infolib buildcommand.Check to make sure that you have all of the required
SGML-conforming documents, including DTD(s), hypertext TOCs,
and style sheet(s) for every book in the bookcase.
You can validate your SGML documents using thedtdocbook2infolib validatecommand
as described inRunning dtdocbook2infolib validate.Understand the options thatdtdocbook2infolib buildprovides,
as described inBuilding,
Adding, and Replacing Bookcases in a Library.Setting Environment Variablesenvironment variablesDepending on whether you are using theSGML Open Technical Resolution 9401:1994recommendation for resolving external entity references,
you need to set one or both of the following environment variables,
or use the-moption with thedtdocbook2infolibcommand:SGML_CATALOG_FILESSet this environment variable if you follow theSGML Open Technical Resolution 9401:1994recommendation related to external entity management.
The value of this environment variable specifies the
location of the filecatalogorCATALOG(you can use either upper-case
or lower-case letters) that lists SGML entity declarations and
file mapping identifiers.If you don't set this environment variable,
you can use the-moption with the
appropriatedtdocbook2infolibcommand to map public
identifiers and entity names to system files.
See thecatalog(5)man page for more information.SGML_PATHSet this environment variable to map external entity references
to system files.See thedtdocbook2infolib(5)man page
for more information.For related information, see:SGML Open Technical Resolution 9401:1994Validating Your SGML DocumentsSGML documentsvalidatingBefore building an information library, you should validate your
SGML documents to ensure that they conform to the appropriate DTD.You can use thedtdocbook2infolib validateInformation Managercommandsdtdocbook2infolib validatecommand to perform SGML validation on bookcase specifications,
on individual documents, or any other SGML conforming document.
During the validation processdtdocbook2infolib validate:Checks the input document's DTD to verify that it conforms to SGML.Verifies that the SGML markup in the input document is
consistent with the markup language defined in the document's DTD.If any documents are found to be invalid, error messages are
issued by thedtdocbook2infolib validateprogram.
All errors in files used to build an information library must
be corrected before the data can be built.Running dtdocbook2infolib validateinformation librariesdocument validationThe basic command line for the following example, which performs
validation on a single-bookcase information library, is:dtdocbook2infolib validate ch03.sgm ch04.sgm ch05.sgmwherech03.sgm ch04.sgm ch05.sgmspecifies the SGML documents that are to be validated.
Thedtdocbook2infolib validatecommand can be run
against any valid SGML conforming document.Error messages are returned if a document is invalid.
Here is an example of the type of errors returned against an
example filech05.sgm,
which contains missing or invalid entity declarations.%:dtdocbook2infolib validatensgmls:ch05.sgm:12:1:E: cannot open "hal.gml" (No such file or directory)
nsgmls:ch05.sgm:20:1:E: general entity "tab" not defined and no default entity
..............................
..............................
..............................
dtdocbook2infolib: command failed: nsgmls -sg /usr/dt/infolib/C/SGML/dtinfo.decl ch05.sgm
ch05.sgmBuilding, Adding, and Replacing Bookcases in a Libraryinformation librariesbuildingwith dtdocbook2infolib buildThis section describes how you use thedtdocbook2infolib buildcommand to build a bookcase
into a new information library, add a bookcase to an existing
information library, and update the information database in an
existing library.Information Managercommandsdtdocbook2infolib buildBuild Considerationsinformation librariesbuild considerationsYou can build information libraries of all sizes,
containing any number of books and bookcases.
You can have (but are not limited to) information libraries containing:A single bookcase consisting of one or more booksMultiple bookcases, each consisting of one or more books.When designing an information library, you should give thought
to its presentation in the Information Manager and to its reception
by readers, many of whom may not be experienced users of on-line
documentation.Information structure and information search capability
are among the most important factors in the design of an
on-line information library. Readers must be able to easily
discern the structure of a book or set of books in a bookcase.
In addition, they must be able to find the information they want quickly,
through the use of clear hypertext links and through efficient search
mechanisms.Library ConfigurationThe Information Manager has very powerful search capabilities.
However, the configuration of your on-line information library affects
the efficiency of the search process.In general, the fewer bookcases you have in an information library,
and the fewer books contained in each bookcase,
the faster the build process will proceed. This type of information
library structure can also be quickly and easily updated.Unfortunately, as the number of bookcases grows,
this type of library structure becomes inefficient in terms
of the browser's ability to search its contents for information.On the other hand, an information library that contains a
smaller number of bookcases, each of which contains a relatively
large number of books, will take much longer to build and to
subsequently update. But search times for this type of library
structure will be significantly shorter.Build SpaceBefore you build an information library, you must ensure that
sufficient space is available in the appropriate locations for
the build process to succeed.Upon build completion, an information library takes up
about the same amount of space as the source from which it was built.
However, during the build process itself, up to three times
as much additional space will be required for temporary file storage.
This additional space must be allocated as temporary build space,
which is automatically removed upon completion of the build.
The default location for temporary build space is/usr/tmp.If you find that the disk space available in/usr/tmpis less than three times the size of the
original document source, you should use the-Toption
with thedtdocbook2infolib buildcommand to specify a
different location for the temporary build files, or set theTMPDIRenvironment variable.The current version of the Information Manager has no concurrent-use
locking mechanisms to prevent users from attempting to simultaneously
build or modify the same information library. Take precautions to ensure
that no otherdtdocbook2infolibor Information Manager
processes are accessing the information library when you run thedtdocbook2infolib buildcommand. Concurrent use of thedtdocbook2infolibcommands may cause an Information Manager
failure.Information Library OrganizationWhen you build an information library, your browser-readable
files are organized in the structure depicted in the figureBuild Directory Structure.Build Directory StructureBuild Directory StructureInformation Manager build directoriesdirectory structureThe build directory structure shows:BC.dbdThis file is the document database for the bookcaseBC. It contains all compiled text,
graphics, and table data.BC.dbiThis file contains the index data for bookcaseBC.BC.schThis file describes the structure of the database.dtsearchdirectoryThis directory contains all the files related to the full-text search engine.bookcase.mapThis file organizes the bookcases within the library.
You use thedtdocbook2infolib admincommand to modify this file.LIB.oliThe string used forLIBgives the library its file name.Building a New LibraryHere is an example of the basicdtdocbook2infolib buildcommand line for building a new information library:dtdocbook2infolib build-T/k1/local/daver/-lInfoLib1 DCE.bc INFOMGR.bc PROG.bcwhere-T/k1/local/daverSpecifies the directory in which temporary files generated
during the build process will be placed.-lInfoLib1Specifies the name of the directory containing the information library.
After the build,InfoLib1will contain the three bookcases specified in the command line
arguments that follow.DCE.bc INFOMGR.bc PROG.bcSpecify the file names of your bookcase specification files.
Each bookcase specification contains the names of one or
more books to be built. You can include as many bookcase
specification file names on the command line as you wish.dtdocbook2infolib buildconverts the documents
specified in each of the bookcase specifications into browser-readable
format and places them in the newly created information
library directoryInfoLib1.Assuming the names of the three bookcases
(as specified by each bookcase's BOOKCASENAME element) areDCE,INFOMGR,
andPROG, respectively,
theInfoLib1directory now contains the
bookcase directoriesDCE,INFOMGR,
andPROG. Each bookcase, in turn, contains
the document databases (books) specified by its BOOK element(s).The figureCreating a New Librarydepicts the newly builtInfoLib1library.Creating a New LibraryAdding a Bookcase to an Existing Librarybookcasesaddingwith dtdocbook2infolib buildIn addition to creating a new Information Manager information
library, you can also usedtdocbook2infolib buildto add
a bookcase that has not yet been built to an existing information library.
In the example below, assume the argument-lInfoLib1is the name of an existing information library rather than the name
of a new information library.dtdocbook2infolib build-lInfoLib1 ORA.bcwhere-lInfoLib1is the name of the directory that contains the existing information library.ORA.bcis the file name of the bookcase specification file whose contents
you are adding to theInfoLib1information library.
You can include as many bookcase specification names on the command line
as you wish.dtdocbook2infolib buildconverts the book documents in the bookcase specification fileORA.bcinto browser-readable format and adds
them to the existing information library directoryInfoLib1.Assuming the name of the added bookcase (as specified
by its BOOKCASENAME element) isORA,
theInfoLib1directory now contains the bookcase
directoriesDCE,INFOMGR,PROG,
andORA.The figureAdding a Bookcase to an Existing
Librarydepicts the revisedInfoLib1library.Added bookcases are appended to the existing list of bookcases
in the Information Manager Book List. Thedtdocbook2infolib admincommand can be used to rearrange the list after it is built.
See thedtdocbook2infolib(1)man page.Adding a Bookcase to an Existing LibraryReplacing a Bookcase in an Existing Librarybookcasesreplacingwith dtdocbook2infolib buildIn addition to creating information libraries and adding bookcases
to existing libraries, you can also replace specified bookcases
in a library with thedtdocbook2infolib buildcommand.
In the example below, thedtdocbook2infolib buildprocess
is used to rebuild the bookcasesINFOMGRandPROGand to overwrite the existing bookcases
of the same name in theInfoLib1information library.dtdocbook2infolib build-lInfoLib1 INFOMGR.bc PROG.bcwhere-lInfoLib1is the name of the directory that contains the existing information library.INFOMGR.bc PROG.bcare the file names of the bookcase specification files whose
contents you are rebuilding in order to update the information
libraryInfoLib1. You can include as
many bookcase specification file names on the command line as you wish.dtdocbook2infolib buildrebuilds the books in the
bookcase specification filesINFOMGR.bcandPROG.bcand places them in the existing
information library directoryInfoLib1.The newly built bookcases, whose bookcase names areINFOMGRandPROG(as specified in the their respective BOOKCASENAME elements),
overwrite the existing bookcases that have the same names.The figureReplacing
Bookcases in an Existing Librarydepicts the revisedInfoLib1library.Replacing Bookcases in an Existing LibraryUpdating Style Sheets in Built Bookcasesstyle sheetupdatingInformation Managercommandsdtdocbook2infolib updateIn Information Manager, you can change the formatting instructions
for existing bookcases without rebuilding those databases.
This capability gives you great flexibility in the way you handle
books whose formatting characteristics must change to meet differing
audience or industry requirements.You use thedtdocbook2infolib updatecommand to reformat
the books in existing information libraries by updating the style
sheet information that controls their formatting.Withdtdocbook2infolib updateyou can revise a style sheet
and quickly see the results of your changes, or you can replace one
style sheet with another and quickly reformat associated documents.When you rundtdocbook2infolib update, only the
documents or document sections affected by the style sheet changes
are reformatted.Before you rundtdocbook2infolib updateto reformat documents
in an information library:Ensure that any changes you have made to the style sheet are valid.
Thedtdocbook2infolib updatecommand validates the style
sheet file during the update process.Set the appropriate environment variables for handling
external entity references or specify the appropriate catalog file
using the-moption when you rundtdocbook2infolib update.Do not run the Information Manager or execute andtdocbook2infolib adminprocess while updating a style sheet.Running dtdocbook2infolib updateThe basic command line for the following example,
which reformats the documents and/or document sections
that use the specified style sheet, is:dtdocbook2infolib update-lInfoLib1-bINFOMGR style1.stywhere-lInfoLib1Is the name of the directory that contains the existing information library.-bINFOMGRIs the name of the bookcase (as specified in the its BOOKCASENAME element)
that includes the sections that will be reformatted by the
specified style sheet.style1.styIs the file name of the style sheet that will be applied
during thedtdocbook2infolib updateprocess.
The style sheet you use must conform toStyleSheet.dtdas discussed
inUnderstanding
Information Manager Style Sheets.After runningdtdocbook2infolib updateprocess you can
open the information library using the Information Manager Book List
window to see the effect of your changes.For related information, see:thedtdocbook2infolib(1)man pageCreating a Bookcase SpecificationUsing Style SheetsUnderstanding Information Manager
Style Sheets