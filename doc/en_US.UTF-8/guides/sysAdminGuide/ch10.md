
# Creating Actions Manuallyactionscreating manually


There are two ways to create actions:

Using the Create Action desktop application

Manually creating an action definition

Creating an action manually requires you to edit a database file. This chapter
describes how to manually create action definitions.




















# See Also


For an introduction to actions, see.

For information about using Create Action, see.

For reference information about action definitions, see thedtactionfile(4)man page.
# Reasons You Must Create an Action Manually


actionstypes ofThere are three basic types of actions:

COMMAND

MAP

TT_MSG

The Create Action tool is designed to create certain types ofCOMMANDandMAPactions. AllTT_MSGactions must be created manually.

For more information, see.
# COMMAND ActionsCOMMAND actionactionsCOMMAND


Acommand actionexecutes a command that starts an application or utility, runs
a shell script, or executes an operating system command. The definition of the
action includes the command to be executed (theEXEC_STRING).

The Create Action tool can be used to create the most common types of
command actions. However, there may be some situations where you must
create the action manually; for example, you must create aCOMMANDaction
manually if the action specifies:

Multiple-file arguments with a different prompt for each argument.

Action invocation&mdash;the ability of actions to invoke other actions.

Argument-count dependent behavior&mdash;the ability to create an action that
has very different behaviors for different numbers of file arguments.

A remote execution host&mdash;the ability to run an application on a system other
than the one containing the action definition.

Change of user&mdash;the ability to run the action as a different user (for
example, to prompt for the root password and then run as root).
# MAP ActionsMAP actionsdefinitionactionsMAP


Amap actionis an action that is ``mapped'' to another action rather than
directly specifying a command or ToolTalk message

Mapping provides the ability to specify alternative names for actions. For
example, a built-in command action named IconEditor starts Icon Editor. The
database also includes an Open action, restricted in the definition to bitmap
and pixmap files (by theARG_TYPEfield), that is mapped to the IconEditor
action. This lets the user start Icon Editor by selecting a bitmap or pixmap file
in File Manager and then choosing Open from the Selected menu.

Create Action provides limited mapping for Open and Print actions. All other
map actions must be created manually.
# TT_MSG (ToolTalk Message) ActionsactionsTT_MSG


TT_MSGactions send a ToolTalk message. AllTT_MSGactions must be created
manually.
# Creating an Action Manually: General Stepsactionscreating manually


This section explains how to create a configuration file for an action definition.
# Configuration Files for Actionsactionsconfiguration filesconfiguration filesactiondt files


Configuration files containing action definitions must meet these requirements:

The files must use the naming convention`name`.dt

database search pathsearch pathsactionsThe files must be located on the database (actions and data types) search
path. The default search path is:

Personal actions

`HomeDirectory`/.dt/types

System-wide actions

/etc/dt/appconfig/types/`language`

Built-in actions

/usr/dt/appconfig/types/`language`. You should
not use this directory.

For information on modifying the actions/data types search path, see.
# To Create an Action Manuallyactionscreating manually


Open an existing database file or create a new one. See the previous section,.

Create the action definition using the syntax:ACTION`action_name`{
 TYPE`action_type
 action_field`&hellip;
}

where:

action_nameactionsname

Name used to run the action.

action_typeactionstypes of

COMMAND(default),MAP, orTT_MSG.

action_fieldactionsfields

One of the required or optional fields for this type of action.
All fields consist of a keyword and a value.
Many of the action fields are covered in this chapter. For
more information, see the dtactionfile(4) man page.

Save the file.

If you want the action icon to have a unique image, create the icons for the
action. The default location for icons is:

Personal icons:`HomeDirectory`/.dt/icons

System-wide icons:/etc/dt/appconfig/icons/`language.`The default`language`isC.

For more information, see.

Double-click Reload Actions in the Desktop_Tools application group.

Create an action file for the action. The action file creates an icon in File
Manager or Application Manager that represents the action. (If the action is
written to start an application, the icon is called anapplication iconapplication icon.)

To create the action file, create an executable file with the same name asaction_name. You can put the file in any directory to which you have write
permission. You can create as many action files as you like.
# Example of Creating a COMMAND ActionCOMMAND actionexampleactionsexample


The following steps create a personal action that starts a fax application on
remote system AppServerA. The command for starting the fax application is:/usr/fax/bin/faxcompose [`filename`]

Create the file`HomeDirectory`/.dt/types/Fax.dt.

Put the following action definition into the file:ACTION FaxComposer
{
 TYPE         COMMAND
 ICON         fax
 WINDOW_TYPE  NO_STDIO
 EXEC_STRING  /usr/fax/bin/faxcompose -c &percnt;Arg_1&percnt;
 EXEC_HOST       AppServerA
 DESCRIPTION  Runs the fax composer
}

TheWINDOW_TYPEandEXEC_STRINGfields describe the behavior of the
action.

WINDOW_TYPE

TheNO_STDIOkeyword specifies that the action does
not have to run in a terminal emulator window.
See.

EXEC_STRING

The syntax&percnt;Arg_1&percnt;accepts a dropped file. If the
action icon is double-clicked, the action opens an
empty fax composer window. See.

Save the file.

Use Icon Editor to create the following image files in the`HomeDirectory`/.dt/iconsdirectory:

fax.m.pm, size 32 by 32 pixels

fax.t.pm, size 16 by 16 pixels

Double-click Reload Actions in the Desktop_Tools
application group.

Create an executable file namedFaxComposerin a directory to which you have write permission (for example, your
home directory).
# Example of Creating a MAP ActionMAP actionsexampleactionsexample


Suppose most of the files you fax are created with Text Editor and are of data
type TEXTFILE (files named *.txt).

These steps add a ``Fax'' menu item to the data type's Selected menu.

Open the file`HomeDirectory`/.dt/types/Fax.dtthat was created in the
previous example.

Add this map action definition to the file:ACTION Fax
{
 ARG_TYPE    TEXTFILE
 TYPE        MAP
 MAP_ACTION  FaxComposer
}

Save the file.

Copy the data attributes definition for TEXTFILE from
/usr/dt/appconfig/types/`language`/dtpad.dtto a new file`HomeDirectory`/.dt/types/textfile.dt. Add the Fax action to theACTIONSfield.DATA_ATTRIBUTES TEXTFILE
{
 ACTIONS  Open,Print,Fax
 ICON     Dtpenpd
 &hellip;
}

Save the file.

Open Application Manager and double-click Reload Actions in the
Desktop_Tools application group.
# To Reload the Actions/Data Types Databasedata typesreloadingdata typesReload Actionsactionsreloadingdatabasereloading actionsReload Actions actiondatabasereloadingReload Actions action


In order for new or edited action definitions to take effect, the desktop must
reread the database.

Open the Desktop_Tools application group and double-click Reload Actions.

`Or`, execute the command:dtaction ReloadActions

Reload Actions actionReloadActions is the name of the action whose icon is labeled ``Reload
Actions.''

The actions database is also reread when the user:

Logs in

Restarts the Workspace Manager

Saves an action in the Create Action window by choosing Save from the File
menu
# Creating an Action File (Icon) for an Actionaction iconcreatingapplication iconcreatingaction filecreatingactionsfiles representing, See action fileaction iconiconsaction iconsactionsicons representing


Anaction fileaction fileis a file created to provide a visual representation of the action in
File Manager or Application Manager.
# Action files (also called action icons or application icons) in Application Manager


Since an action file's icon represents an action, it is sometimes called anaction iconaction
icon. If the underlying action starts an application, the action file icon is called
anapplication icon.

Double-clicking the action icon runs the action. The action icon may also be a
drop zone.
# To Create an Action File (Action Icon)


Create an executable file with the same name as theactionsnameaction name. The
content of the file does not matter.

For example, if the action definition is:ACTION  MyFavoriteApp
{
 EXEC_STRING    Mfa -file &percnt;Arg_1&percnt;
 DESCRIPTION    Runs MyFavoriteApp
 ICON           Mfapp
}

then the action file would be an executable file namedMyFavoriteApp. In File
Manager and Application Manager, theMyFavoriteAppfile would use the
icon imageMfapp.`size`.`type`. Double-clickingMyFavoriteApp's icon would
run the action's execution string, and the icon's On Item help would be the
contents of theDESCRIPTIONfield (Runs MyFavoriteApp).helpon action fileDESCRIPTION field
# Action LabelsactionslabelslabelsactionsLABEL action field


If the action definition includes theLABELfield, the action file will be labeled
in File Manager and Application Manager with the contents of this field rather
than the file name (`action_name`). For example, if the action definition includes:ACTION  MyFavoriteApp
{
 LABEL      Favorite Application
 &hellip;
}

then the action icon will be labeled ``Favorite Application.''
# Specifying the Icon Image Used by an Actionactionsicons foriconsactions


Use theICONfield to specify the icon used in File Manager and Application
Manager for the action icons created for the action.

If you do not specify an icon, the system uses the default action iconactionsdefault iconimage
files/usr/dt/appconfig/icons/`language`/Dtactn.*.
# Default action icon image


The default action icon can be changed using the resource:actionIcon resource*actionIcon:`icon_file_name`

where`icon_file_name`can be a base name or absolute path.

The value of theICONfield can be:ICON fieldallowable values

A base file name.

Thebase file namebase file name is the name of the file containing the icon image minus
the file-name suffixes for size (mandt) and image type (bmandpm). For
example, if files are namedGameIcon.m.pmandGameIcon.t.pm, useGameIcon.

If you use the base file name, the icon files must be placed in a directory on
the icon search path:

Personal icons:`HomeDirectory`/.dt/icons

System-wide icons:/etc/dt/appconfig/icons/`language`

An absolute path to the icon file, including the full file name.

You should use the absolute path only if the icon file is not located on the
icon search path. For example, if icon fileGameIcon.m.pmis placed in the
directory/doc/projects, which is not on the icon search path, the value
of theICONfield would be/doc/projects/GameIcon.m.pm.

lists icon sizes you should create and the corresponding file names.
# Icon Names and Sizes for Action Icons


`Size in Pixels`

`Bitmap Name`

`Pixmap Name`

48 by 48

`name`.l.bm

`name`.l.pm

32 by 32

`name`.m.bm

`name`.m.pm

16 by 16

`name`.t.bm

`name`.t.pm
# To Modify an Existing Action Definitionactionseditingactionsmodifyingediting actions


You can modify any of the actions available on your system, including built-in
actions.

Use caution when modifying the built-in action database. The built-in
actions are designed to work well with the desktop applications.

Locate the definition of the action you want to modify.

The default locations for action definitions are:

Built-in actions:/usr/dt/appconfig/types/`language`

System-wide actions:/etc/dt/appconfig/types/`language`

Personal actions:`HomeDirectory`/.dt/types

Your system might include additional locations. To see a list of the locations
your system uses for actions, execute the command:actionssearch path, See database search pathdtsearchpath -vdtsearchpath

Your system uses the directories listed underDTDATABASESEARCHPATH variableusageDTDATABASESEARCHPATH.

If necessary, copy the text of the action definition to a new or existing file in
one of these directories:

System-wide actions:/etc/dt/appconfig/types/`language`

Personal actions:`HomeDirectory`/.dt/types

You must copy built-in actions, since you should not edit files in the/usr/dt/appconfig/types/`language`directory.

Edit the action definition. When you are done, save the file.

Double-click Reload Actions in the Desktop_Tools application group.
# Precedence in Action Definitionsactionsprecedence rulesprecedenceaction database assembly


When the user invokes an action, the system searches the database for a
matching action name. When more than one action exists with that name, the
system uses precedence rules to decide which one to use.

If no other precedence rules apply, the precedence is based on the location of
the definition. The following list is ordered from higher to lower
precedence:

Personal actions (`HomeDirectory`/.dt/types)

System-wide local actions (/etc/dt/appconfig/types/`language`)

System-wide remote actions
(`hostname`:/etc/dt/appconfig/types/`language`). The remote hosts
searched are those listed in the application search path.

Built-in actions (/usr/dt/appconfig/types/`language`)

Within a given directory, the*.dtfiles are read in alphabetical order.

Actions restricted byARG_CLASS fieldARG_CLASS,ARG_TYPE fieldARG_TYPE,ARG_MODE fieldARG_MODE, orARG_COUNT fieldARG_COUNThave precedence over unrestricted actions. (The default for these four fields
is*.)

Where more than one restriction applies, the precedence order from high to
low is:

ARG_CLASS

ARG_TYPE

ARG_MODE

ARG_COUNT

Where more than one restrictedARG_COUNTexists, the precedence order
from high to low is:

Specific integer value`n`

<`n`

>`n`

*

For example, consider the following portions of action definitions:ACTION EditGraphics
# EditGraphics-1
{
 ARG_TYPE    XWD
 &hellip;
}
ACTION EditGraphics
# EditGraphics-2
{
 ARG_COUNT      0
 &hellip;
}
ACTION EditGraphics
# EditGraphics-3
{
 ARG_TYPE    *
    &hellip;
}

Double-clicking the EditGraphics action icon starts EditGraphics-2 because no
argument is provided andARG_COUNT0has precedence. When an XWD-type
file argument is provided, EditGraphics-1 is used because it specified the XWDARG_TYPE. EditGraphics-3 is used for all other file arguments.
# Building the Execution String for a COMMAND Actionactionsexecution stringexecution stringcommand line for actionsactionsexecution stringCOMMAND actionexecution stringEXEC_STRING field, See execution string


The minimum requirements for aCOMMAND actionrequired fieldsCOMMANDaction are two fields&mdash;ACTIONandEXEC_STRING.ACTION`action_name`{
    EXEC_STRING`execution_string`}

The execution string is the most important part of aCOMMANDaction definition.
It uses syntax similar to the command line you would execute in a Terminal
window but includes additional syntax for handling file and string arguments.
# General Features of Execution Stringsexecution stringgeneral features


Execution strings may include:

File and non-file arguments

Shell syntax

Absolute paths or names of executables
# Action Argumentsactionsargumentsargumentsfor actions


An argument is information required by a command or application for it to run
properly. For example, consider the command line you could use to open a file
in Text Editor:dtpad`filename`

In this command`filename`is a file argument of thedtpadcommand.

Actions, like applications and commands, can have arguments. There are two
types of data that aCOMMANDaction can use:

Files

String data
# Using Shells in Execution Stringsexecution stringshell syntaxshellsyntax in execution string


The execution string is executed directly, rather than through a shell. However,
you can explicitly invoke a shell in the execution string.

For example:EXEC_STRING    \
  /bin/sh -c \
  'tar -tvf &percnt;(File)Arg_1&percnt; 2>&amp;1 | \${PAGER:-more};\
  echo &ldquo;\\n*** Select Close from the Window menu to close ***&rdquo;'
# Name or Absolute Path of the Executableexecution stringspecifying the executable


If your application is located in a directory listed in thePATH variablePATH variable, you can
use the simple executable name. If the application is elsewhere, you must use
theexecution stringabsolute path inabsolute path to the executable file.
# Creating an Action that Uses No Argumentsexecution stringno argumentsactionsno argumentsactionswithout data


Use the same syntax for theEXEC_STRINGthat you would use to start the
application from a command line.
# Examples


This execution string is part of an action that starts the X clientxcutsel.EXEC_STRING xcutsel

This execution string starts the clientxclockwith a digital clock. The
command line includes a command-line option but requires no arguments.EXEC_STRING xclock -digital
# Creating an Action that Accepts a Dropped Fileexecution stringdropped filesactionsaccepting dropped filesdrop zoneaction icondropped file, action that accepts


Use this syntax for the file argument:Arg_n syntax&percnt;Arg_`n`&percnt;

or&percnt;(File)Arg_`n`&percnt;

(File)is optional, since arguments supplied toArg_`n`are assumed (by
default) to be files. (Seefor use of the&percnt;(String)Arg_`n`&percnt;syntax.)

This syntax lets the user drop a data file object on the action icon to start the
action with that file argument. It substitutes the`n`th argument into the
command line. The file can be a local or remote file.
# Examples


This execution string executeswc -wusing a dropped file as the
parameter.EXEC_STRING wc -w &percnt;Arg_1&percnt;

This example shows a portion of a definition for an action that works only
with directory arguments. When a directory is dropped on the action icon,
the action displays a list of all the files in the directory with read-write
permission.ACTION  List_Writable_Files
{
    ARG_TYPE     FOLDER
    EXEC_STRING  /bin/sh -c 'ls -l &percnt;Arg_1&percnt; | grep rw-'
    &hellip;
}
# Creating an Action that Prompts for a File Argumentexecution stringprompting for fileactionsprompting for fileargumentsprompting forprompts for actions2


Use this syntax for the file argument:&percnt;(File)&ldquo;`prompt`&rdquo;&percnt;

This syntax creates an action that displays a prompt for a file name when the
user double-clicks the action icon.

For example, this execution string displays a dialog box that prompts for the
file argument of thewc -wcommand:EXEC_STRING wc -w &percnt;(File)&ldquo;Count words in file:&rdquo;&percnt;
# Creating an Action that Accepts a Dropped File or Prompts for Oneactionsaccepting dropped file or prompting


Use this syntax for the file argument:&percnt;Arg_`n`&ldquo;`prompt`&rdquo;&percnt;

or&percnt;(File)Arg_`n`&ldquo;`prompt`&rdquo;&percnt;

This syntax produces an action that:

Accepts a dropped file as the file argument.

Displays a dialog box that prompts for a file name when the user double-
clicks the action icon.

For example, this execution string performslp-orawon a dropped file. If the
action is started by double-clicking the icon, a dialog box appears prompting
for the file name.EXEC_STRING lp -oraw &percnt;Arg_1&ldquo;File to print:&rdquo;&percnt;
# Creating an Action that Prompts for a Non-File Argumentexecution stringprompting for stringactionsnon-file argumentsargumentsnon-filestring action argumentsactionsarguments, non-file


Use this syntax for the non-file parameter:&percnt;&ldquo;`prompt`&rdquo;&percnt;

or&percnt;(String)&ldquo;`prompt`&rdquo;&percnt;

(String)is optional, since quoted text is interpreted, by default, as string
data. This syntax displays a dialog box that prompts for non-file data; do not
use this syntax when prompting for a file name.

For example, this execution string runs thexwdcommand and prompts for a
value to be added to each pixel:EXEC_STRING xwd -add &percnt;&ldquo;Add value:&rdquo;&percnt; -out &percnt;Arg_1&ldquo;Filename:&rdquo;&percnt;
# Interpreting a File Argument as a String


Use this syntax for the argument:&percnt;(String)Arg_`n`&percnt;

For example, this execution string prints a file with a banner containing the file
name, using the commandlp -t`banner filename.`EXEC_STRING lp -t&percnt;(String)Arg_1&percnt; &percnt;(File)Arg_1&ldquo;File to print:&rdquo;&percnt;
# Providing Shell Capabilities in an Actionactionsproviding shellsshellsin actionsshellused in action


Specify the shell in the execution string:/bin/sh -c '`command`'
/bin/ksh -c '`command`'
/bin/csh -c '`command'`
# Examples


This execution string illustrates an action that uses shell piping.EXEC_STRING /bin/sh -c 'ps | lp'

This is a more complex execution string that requires shell processing and
accepts a file argument.EXEC_STRING /bin/sh -c 'tbl &percnt;Arg_1&ldquo;Man Page:&rdquo;&percnt; | troff -man'

This execution string requires that the argument be a compressed file. The
action uncompresses the file and prints it usinglp -oraw.EXEC_STRING  /bin/sh -c 'cat &percnt;Arg_1 &ldquo;File to print:&ldquo;&percnt; | \
             uncompress | lp -oraw'

This execution string starts a shell script.EXEC_STRING /usr/local/bin/StartGnuClient
# Creating COMMAND Actions for Multiple File Argumentsexecution stringmultiple-file argumentsargumentsmultiple for actions


There are three ways for actions to handle multiple file arguments:

The action can be run repreatedly, once for each argument. When anEXEC_STRINGcontains a single file argument and multiple file arguments
are provided by dropping multiple files on the action icon, the action is run
separately for each file argument.

For example if multiple file arguments are supplied to the following action
definition:ACTION DisplayScreenImage
{
 EXEC_STRING  xwud -in &percnt;Arg_1&percnt;
 &hellip;
}

the DisplayScreenImage action is run repeatedly.

The action can use two or more non-interchangeable file arguments. For
example:xsetroot -cursor`cursorfile maskfile`

requires two unique files in a particular order.

The action can perform the same command sequentially on each file
argument. For example:pr`file`[`file`&hellip;]

will print one or many files in one print job.
# Creating an Action for Non-Interchangeable Argumentsactionsnon-interchangeable argumentsargumentsnon-interchangeable, for actions


Use one of the following syntax conventions:

If you want the action to prompt for the file names, use this syntax for each
file argument:&percnt;(File)&ldquo;`prompt`&rdquo;&percnt;

Use a different`prompt`string for each argument.

For example, this execution string prompts for two files.EXEC_STRING  xsetroot -cursor &percnt;(File)&ldquo;Cursor bitmap:&rdquo;&percnt; \
             &percnt;(File)&ldquo;Mask bitmap:&rdquo;&percnt;

To accept dropped files, use this syntax for each file argument:&percnt;Arg_`n`&percnt;

using different values of`n`for each argument. For example:EXEC_STRING  diff &percnt;Arg_1&percnt; &percnt;Arg_2&percnt;
# Creating an Action with Interchangeable File Argumentsactionsinterchangeable argumentsargumentsinterchangeable for actions


Use one of the following syntax conventions:

To create an action that accepts dropped files and issues a command in the
form`command file`1`file`2&hellip;, use this syntax for the file arguments:&percnt;Args&percnt;

To create an action that accepts multiple dropped files, or displays a prompt
for a single file when double-clicked, use this syntax for the file arguments:&percnt;Arg_1&ldquo;`prompt`&rdquo;&percnt; &percnt;Args&percnt;

The action will issue the command in the form:`command file`1`file`2&hellip;.
# Examples


This execution string creates an action that executes:pr`file`1`file`2

with multiple file arguments.EXEC_STRING pr &percnt;Args&percnt;

This execution string creates an action similar to the previous example,
except that the action displays a prompt when double-clicked (no file
arguments).EXEC_STRING  pr &percnt;Arg_1&ldquo;File(s) to print:&rdquo;&percnt; &percnt;Args&percnt;
# Creating an Action for Multiple Dropped Filesactionsaccepting multiple dropped files


To accept multiple dropped file arguments and execute a command line in the
form:`command``file`1`file`2&hellip;

use the syntax:&percnt;Args&percnt;
# Examples


This execution string executes a script named Checkout for multiple files:EXEC_STRING  /usr/local/bin/Checkout \
             &percnt;Arg_1&ldquo;Check out what file?&rdquo;&percnt; &percnt;Args&percnt;

This execution string executeslp -orawwith multiple files:EXEC_STRING  lp -oraw &percnt;Arg_1&ldquo;File to print:&rdquo;&percnt; &percnt;Args&percnt;
# Windowing Support and Terminal Emulators for COMMAND Actionsactionswindowing support forterminal emulatorfor actions


There are several ways thatCOMMANDactions support windows on the desktop.

If the application has its own window, the action can be written to provide
no additional window support. This option is also used when an action runs
a command that requires no direct user input and has no output.

If the application must run in a terminal emulator window, the action can be
written to open a window and then run the application. There are several
terminal options.
# Specifying the Window Support for the Action


Use theWINDOW_TYPEfield to specify the type of windowing support required
by the action.

WINDOW_TYPEWINDOW_TYPE field

Windowing Support Provided

NO_STDIONO_STDIO window support

None. UseNO_STDIOif the application has its own
window, or if the command has no visible output.

PERM_TERMINALPERM_TERMINAL window support

Permanent terminal emulator window. The action
opens a terminal window that remains open until the
user explicitly closes it. The user can enter data into the
window. Use with commands that take some input,
produce some output, then terminate (for example,ls`directory`).

TERMINALTERMINAL window support

Temporary terminal emulator window. The action
opens a terminal window that closes as soon as the
command is completed. Use with full-screen
commands (for example,vi).
# Specifying Command-Line Options for the Terminal Emulatorterminal emulatorcommand-line options for actionsactionsterminal options


Use theTERM_OPTSfield in the action definition to specify command-line
options for the terminal emulator.

For example, the following action prompts for the execution host:ACTION OpenTermOnSystemUserChooses
{
 WINDOW_TYPE    PERM_TERMINAL
 EXEC_HOST      &percnt;(String)&ldquo;Remote terminal on:&rdquo;&percnt;
 TERM_OPTS      -title &percnt;(String)&ldquo;Window title:&rdquo;&percnt;
 EXEC_STRING    $SHELL
}
# Specifying a Different Default Terminal Emulatorterminal emulatordefault for actionsactionsterminal support foractionsdefault terminal


The default terminal emulator used by actions isdtterm. You can change this
to another terminal emulator. The default terminal emulator is used when the
action does not explicitly specify a terminal emulator to use.

The terminal emulator used by actions must have these command-line options:

-title`window_title`

-e`command`

Two resources determine the default terminal emulator used by actions:

localTerminal resourceThelocalTerminalresource specifies the terminal emulator used by local
applications.*localTerminal:`terminal`

For example:

*localTerminal: xterm

TheremoteTerminalresource specifies the terminal emulator used by
remote applications.*remoteTerminal:`host`:`terminal`[,`host`:`terminal`&hellip;]

For example:*remoteTerminal: sysibm1:/usr/bin/xterm,syshp2:/usr/bin/yterm
# Restricting Actions to Certain Argumentsactionsrestricting argumentsargumentsrestricting for actions


Restricting an action to a particular type of argument refines the action. For
example, it is useful to restrict an action that invokes a viewer for PostScript
files to only PostScript file arguments; with the restriction, the action will
return an error dialog if a non-PostScript file is specified.

You can restrict actions based on:

The data type of the file argument.

The number of file arguments&mdash;for example, no arguments versus one or
more arguments. This provides different drop and double-click behavior for
the action icon.

The read/write mode of the argument.
# Restricting an Action to a Specified Data Typeactionsrestricted by data typedata typesrestricting actions based on


ARG_TYPE fieldUse theARG_TYPEfield to specify the data types for which the action is valid.
Use the data attribute name.

You can enter a list of data types; separate the entries with commas.

For example, the following action definition assumes a Gif data type has been
created.ACTION Open_Gif
{
 TYPE           COMMAND
 LABEL          &ldquo;Display Gif&rdquo;
 WINDOW_TYPE    NO_STDIO
 ARG_TYPE       Gif
 ICON           xgif
 DESCRIPTION    Displays gif files
 EXEC_STRING    xgif
}
# Restricting an Action Based on the Number of Argumentsactionsargument count restrictionsargumentsnumber of for actions


ARG_COUNT fieldUse theARG_COUNTfield to specify the number of arguments the action can
accept. Valid values are:

*

(Default) Any number of arguments. Other values have precedence
over*.

`n`

Any non-negative integer, including 0.

>`n`

More than`n`arguments.

<`n`

Fewer than`n`arguments.

One use forARG_COUNTis to provide different action icon behavior, depending
on whether the user double-clicks the icon or drops a file on it. See the next
section,.
# To Provide Different Double-Click and Drop Behavioractionsdifferent double-click and drop functionalityARG_COUNT field


Use this procedure to create an action that accepts a dropped file but does not
prompt for a file when the action icon is double-clicked.

Create an action definition for the double-click functionality.

Use theARG_COUNTfield to specify0arguments. Use a syntax for theEXEC_STRINGthat does not accept a dropped argument.

Create a second action definition for the drop functionality.

Use theARG_COUNTfield to specify>0argument. Use a syntax for theEXEC_STRINGthat accepts a dropped file.

For example, suppose the following two command lines can be used to start an
editor namedvedit:

To start the editor with no file argument:vedit

To start the editor with a file argument that is opened as a read-only
document:vedit -R`filename`

The following two actions create drop and double-click functionality for an
action named Vedit. The first action has precedence when the database is
searched for a match, sinceARG_COUNT0is more specific than the impliedARG_COUNT*of the drop functionality definition.# Double-click functionality
ACTION Vedit
{
 TYPE         COMMAND
 ARG_COUNT    0
 WINDOW_TYPE  PERM_TERMINAL
 EXEC_STRING  vedit
}

# Drop functionality
ACTION Vedit
{
 TYPE          COMMAND
 WINDOW_TYPE   PERM_TERMINAL
 EXEC_STRING   vedit -R &percnt;Arg_1&percnt;
}
# Restricting an Action Based on the Mode of the Argument


Use theARG_MODEfield to specify the read/write mode of the argument. Valid
values are:

*

(Default) Any mode

!w

Non-writable

w

Writable
# Creating Actions that Run Applications on Remote Systemsactionsrunning remote applicationsremote executionby actions


When discussing actions and remote execution, there are two terms that are
used frequently:

database hostdatabase host

The system containing the action definition

execution hostexecution hostcreating actions for

The system where the executable runs

In most situations, actions and their applications are located on the same
system; since the default execution host for an action is the database host, no
special syntax is required.

However, when the execution host is different from the database host, the
action definition must specify where the execution string should be run.

The ability to locate actions and applications on different systems is part of the
client/server architecture of the desktop. For a more in-depth discussion of
networked applications, see.
# Creating an Action that Runs a Remote ApplicationEXEC_HOST fieldDatabaseHost&percntLocalHost&percntDisplayHost&percntSessionHost&percnt


EXEC_HOST fieldexecution hostspecified by EXEC_HOST fieldUse theEXEC_HOSTfield in the action definition to specify the location of the
application.

Valid values forEXEC_HOSTare:

&percnt;DatabaseHost&percnt;DataBaseHost keyword

The host where the action is defined.

&percnt;LocalHost&percnt;

The host where the action is invoked (thesession server).

&percnt;DisplayHost&percnt;DisplayHost keyword

The host running the X server (not allowed for X
terminals).

&percnt;SessionHost&percnt;SessionHost keyword

The host where the controlling Login Manager is running.

`hostname`

The named host. Use this value for environments in which
the action should always be invoked on one particular
host.

&percnt;&ldquo;`prompt`&rdquo;&percnt;

Prompts the user for the host name each time the action is
invoked.

The default value is&percnt;DatabaseHost&percnt;,&percnt;LocalHost&percnt;.EXEC_HOST fielddefault valueThus, when theEXEC_HOSTfield is omitted, the action first attempts to run the command on
the host containing the action definition. If this fails, the action attempts to run
the command on the session server.
# Examples


This field specifies hostddsyd:EXEC_HOST  ddsyd

The field prompts for a host name:EXEC_HOST  &percnt;&ldquo;Host containing application:&rdquo;&percnt;

This field specifies that the action will attempt to run the application on the
host containing the action definition. If this fails, the action will attempt to
run the application on hostddsyd.EXEC_HOST  &percnt;DatabaseHost&percnt;, ddsyd
# Using Variables in Action and Data Type Definitionsvariablesin action definitionsactionsvariables in definitionsdata typesvariables in definitions


You can include string variables and environment variables in action and data
type definition files.
# Using String Variables in an Actionstring variables in action definitionsactionsstring variables in


A string variable definition remains in effect from the location of the definition
to the end of the file. There are no global string variables for the database.

If a string variable and environment variable have the same name, the string
variable has precedence.
# To Define a String Variable


Use the syntax:set`variable_name`=`value`

Variable names can contain any alphanumeric characters and underscore (_).
Each variable definition must be on a separate line.

For example:set Remote_Application_Server=sysapp
set Remote_File_Server=sysdata
# To Reference a String Variable


Use the syntax:$[{]`variable_name`[}]

For example:EXEC-HOST   $Remote_Application_Server
CWD   /net/${Remote_File_Server}/doc/project
# Using Environment Variables in Actions and Data Typesenvironment variablesaction definitionsactionsenvironment variables


Reference an environment variable using the syntax:$[{]`variable`[}].

The variable is expanded (replaced by its value) when the database is loaded.
If a string variable and environment variable have the same name, the string
variable has precedence.

For example, this execution string prints a file with a banner containing the
login name.EXEC-STRING lp -t$LOGNAME &percnt;(File)Arg_1&percnt;
# Invoking Actions from a Command Lineactionsrunning other actions


The desktop provides thedtactioncommand for running actions from a
command line. You can usedtactionto run actions from:

Scripts

Other actions

A terminal emulator command line
# Syntax of dtactiondtactionsyntax
dtaction [-user`user_name`] [-execHost`hostname`]`action_name`[`argument`[`argument`]&hellip;]

-user`user_name`

Provides the ability to run the action as a different
user. Ifdtactionis invoked by a user other than`user_name,`a prompt is displayed for the password.

-execHost`hostname`

ForCOMMANDactions only; specifies the host on
which the command will be run.

`argument`

Arguments to the action; usually file arguments.

Thedtactionclient has additional command-line options. For more
information, see thedtaction(1) man page.
# Creating an Action that Runs Another Actionactionsrunning other actions


Usedtactionin theEXEC_STRINGof the action.

For example, the following action uses a built-in action named Spell (the action
is labeled ``Check Spelling'' in Application Manager). The new action runs Text
Editor and the Spell action, displaying the spelling errors in a separate
terminal emulator window.ACTION EditAndSpell
{
 WINDOW_TYPE    NO_STDIO
 EXEC_STRING    /bin/sh -c 'dtaction Spell \
     &percnt;Arg_1&ldquo;File:&rdquo;&percnt;; dtpad &percnt;Arg_1&percnt;'
}
# Creating an Action that Runs as a Different Useractionsrunning as different useruser, changing for actiondtactionused to change user


Use the following syntax in theEXEC_STRING:EXEC_STRING   dtaction -user`user_name``action_name`[`file_argument`]

The new user (`user_name`) must have display access to the system through one
of the following mechanisms:

Read permission on the login user's.Xauthorityfile

Or, xhost permission

For example, the following two actions provide the ability to become root and
edit an app-defaults file.ACTION AppDefaults
{
 WINDOW_TYPE  NO_STDIO
 EXEC_STRING  /usr/dt/bin/dtaction -user root \
              EditAppDefaults &percnt;Arg_1&ldquo;File:&rdquo;&percnt;
}
ACTION EditAppDefaults
{
 WINDOW_TYPE  TERMINAL
 EXEC_STRING  /bin/sh -c 'chmod +w &percnt;Arg_1&percnt;; \
              vi &percnt;Arg_1&percnt;; chmod -w &percnt;Arg_1&percnt;'
}
# Creating Localized Actionsactionslocalizedlocalizationactions


The search path for data types includes language-dependent locations. The
desktop uses the value of LANG to determine the locations searched for data
type definitions.
# Locations for Localized Actions


Localized action definitions must be placed in the proper language-dependent
directories along the actions search path.

The default search path is:

Personal actions:`HomeDirectory`/.dt/types

System-wide actions:/etc/dt/appconfig/types/`language`

Built-in actions:/usr/dt/appconfig/types/`language`
# To Localize an Existing Actionactionslabelslabelsactionslocalizationaction label


Create a file in the appropriate language-dependent directory (for example,
in/etc/dt/appconfig/types/japanese).

Copy the action definition to the language-dependent configuration file.

For example, you might copy an action definition from`app_root`/dt/appconfig/types/C/`file`.dt

to`app_root`/dt/appconfig/types/japanese/`newfile`.dt

Add aLABELfield or modify the existingLABELfield.LABEL`string`

Application Manager and File Manager use the label string to identify the
action's icon.

Localize any of the following fields in the action definition:

For localized icons:ICON

For localized On Item help:DESCRIPTION

For localized prompts: any quoted text in theEXEC_STRING
# Creating Actions for ToolTalk ApplicationsTT_MSG actioncreatingToolTalkapplications, actions forToolTalkaction, See TT_MSG action


The following information applies only to applications that support
ToolTalk messaging.

Use the action typeTT_MSGto create an action that sends a ToolTalk message.ACTION`action_name`{
 TYPE  TT_MSG
 &hellip;
}
# addressing and disposition Fields


The ToolTalkaddressingfield is always set toTT_PROCEDURE.

The ToolTalkdispositionfield defaults to the specification in the static
message pattern.
# Unsupported Messages


The following are not supported byTT_MSG-type actions:

ToolTalk object-oriented messages

Context arguments in messages
# Keywords for TT_MSG ActionsTT_MSG actionkeywords


Keyword

Use

TT_CLASS

Defines the value of the ToolTalkclassmessage field

TT_SCOPE

Defines the value of the ToolTalkscopemessage field

TT_OPERATION

Defines the value of the ToolTalkoperationmessage
field.

TT_FILE

Defines the value of the ToolTalkfilemessage field

TT_ARGn_MODE

Defines the value of the ToolTalkmodeattribute for
the`n`th message argument

TT_ARGn_VTYPE

Defines the value of the ToolTalkvtypeattribute of
the`n`th message argument

TT_ARGn_VALUE

Defines the value of the`n`th message argument