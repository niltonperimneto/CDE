
# Configuring Login Manager


The Login Manager is a server responsible for displaying a login screen,
authenticating users, and starting a user's session. The graphical login is an
attractive alternative to the traditional character mode login for bitmap
displays. Displays managed by the login server can be directly attached to the
login server or attached to an X terminal or workstation on the network.Login ManagerSee also login serverLogin Managerdefinitionlogin serversdisplaying login screenlogin serversauthenticating userslogin serversstarting a sessionlogin serversattaching displays

You must be a root user to start, stop, or customize the login server.















The login server:Login Managercustomizinglogin serversoverview

Can display a login screen on bitmap displays unconditionally or by request
on local and network bitmap displays

Accommodates directly attached character console displays

Can display a chooser screen that enables users to display login screens
from other login servers on the network

Allows controlled access to the login server

Provides access to the traditional character-mode login

Displays managed by the Login Manager can be directly attached to the Login
Manager server or attached to an X terminal or workstation on the network.
For local displays, the login server will automatically start an X server and
display a login screen. For network displays, such as X terminals, the login
server supports the X Display Manager Protocol (XDMCP)XDMCP1.0, which allows
displays to request that the login server display a login screen on the display.
# Starting the Login Server


The login server is usually started when the system is booted. You
can also start the login server from a command line.login serversstartinglogin serversstarting from command line

To set the login server to start when the system is booted, type/usr/dt/bin/dtconfig -e

The login server will then start automatically when you reboot.

To start the login server from a command line, type/usr/dt/bin/dtlogin -daemon

Although starting the login server from the command line is available
for temporary configuration testing, you should normally start the login server
when the system is booted.
# Managing Local and Network Displays


shows a possible login server configuration.
# Possible login server configurationX terminalspossible login server configurations

# Finding the Login Server Process IDlogin serversprocess ID


By default, the login server stores its process ID in/var/dt/XpidXpid file.

To change this, you can set theDtlogin.pidFileresource in theXconfigXconfig filemodifyingfile. If changed, the directory specified must exist when the login server is
started.

To modifyXconfig, copyXconfigfrom/usr/dt/configto/etc/dt/config. After modifying/etc/dt/config/Xconfig, tell the
login server to rereadXconfigby typing:/usr/dt/bin/dtconfig -reset

This issues the commandkill -HUP`login server process ID.`

For example, to store the login server process ID in/var/myservers/Dtpid,
set the following in theXconfigfile:Dtlogin.pidFile: /var/myservers/Dtpid

When the login server is restarted, the login server will store its process ID in/var/myservers/DtpidDtpid file. The/var/myserversdirectory must exist when
the login server is started.
# Displaying a Login Screen on a Local Display


Upon startup, the login server checks theXserversXservers filestarting a serverfile to determine if an X
server needs to be started and to determine if and how login screens should be
displayed on local or network displays.

To modifyXservers, copyXserversfrom/usr/dt/configto/etc/dt/config. After modifying/etc/dt/config/Xservers, tell the
login server to rereadXserversby typing:/usr/dt/bin/dtconfig -reset

This issues the commandkill -HUP`login server process ID`

The format of anXservers filesyntaxXserversline is:`display_name``display_class``display_type``X_server_command`

where

`display_name`

Tells the login server the connection name to use when
connecting to the X server (:0 in the following
example). A value of * (asterisk) is expanded to`host name`:0. The number specified must match the
number specified in the`X_server_command`connection
number.

`display_class`

Identifies resources specific to this display (Localin
the following example).

`display_type`

Tells the login server whether the display is local or a
network display, and how to manage the Command
Line Login option on the login screen
(local@consolein the following example).

`X_server_command`

Identifies the command line, connection number, and
other options the login server will use to start the X
server (/usr/bin/X11/X :0in the following
example). The connection number specified must
match the number specified in the`display_name`.

The defaultXserversline is similar to::0 Local local@console /usr/bin/X11/X :0
# Running the Login Server without a Local Displaybitmapped display,running Login Server without


If your login server system has nologin serversno bitmap displaybitmap display, run the login server without
a local displaylogin serversrunning without a local displayby commenting out theXserversXservers filedefaultline for the local display
using a#(pound sign). For example,# :0 Local local@console /usr/bin/X11/X :0

When the login server starts, it runs in the background waiting for requests
from network displays.
# Accessing Command Line Login on a Local Display


When the user selects Command Line Loginlogin serverscommand line loginon the login screen, the login
server temporarily terminates the X server, allowing access to the traditional
command-line login running on the bitmap display terminal device. After the
user has logged in and then out, or after a specified time-out, the login server
will restart the X server.

Thecommand-line loginCommand Line Login option is unavailable on network displays.

The`display_type`controls the behavior of Command Line Login. The format of`display_type`is:

local@`display_ terminal_device`

local display typelocal

foreign display typeforeign

Whenlocal@`display_terminal_device`is specified, the login server assumes that
the X server and/dev/`display_terminal_device`are on the same physical device,
and that a command line login (usuallygetty) is running on the device. When
the user selects Command Line Login, the X server is terminated, allowing
access to the running command-line login (getty) running on the/dev/`display_terminal_device`.

To disable the Command Line Login option on a display, specifynoneas the`display_terminal_device`. The default`display_terminal_device`isconsole. Whenlocalis specified,`display_terminal_device`defaults toconsole. Whenforeignis specified, Command Line Login is disabled.

The Command Line Login option will be disabled on the local display
when the login server is started from the command line.
# Accommodating a Character Display Consolecharacter display console


If your login server system has a dlogin serverscharacter display consoleirectly attached character display serving as
a console, you may also want to set`display_terminal_device`tononeto disable
Command Line Login on the bitmap display login screen.

Alternatively, if a command-line login (gettygetty) is running on both the character
display console and the bitmap display, you can change`display_terminal_device`to the command line login (getty) device on the bitmap display.

For example, if the bitmap display command-line login (getty) is on device/dev/tty01, change the`display_type`tolocal@tty01.
# Displaying a Login Screen on a Network Displaylogin screendisplaying on a network display


The login server can accept requests from network displays to display a login
screen on that particular display. The network display is usually an X terminal
but can also be a workstation.

To manage requests from network displays, the login server supports the X
Display Manager Protocol (XDMCP)XDMCPdefinition1.0. This protocol enables the login server
to negotiate and accept or reject requests from network displays. Most X
terminals have XDMCP built in.
# XDMCP Direct Requests from Network DisplaysXDMCPdirect requestsX terminalsXDMCP-direct


When you configure your X terminal to use XDMCP directXDMCPquery mode(query mode), you
tell your X terminal the host name of the login server host. When the X
terminal is booted, it automatically contacts the login server, and the login
server displays a login screen on the X terminal. See your X terminal
documentation for information describing how to configure your X terminal
for XDMCP direct mode.

Most X servers also support the-query-query optionoption. In this mode, your X server
behaves as if it were an X terminal, contacting the login server host directly
and requesting that it display a login screen on the X server. For example,
starting the X server on a bitmap display on workstationbridgetwill have
login serveranitadisplay a login screen on the X server:X -query anita
# XDMCP Indirect Requests from Network DisplayXDMCPindirect requestsX terminalsXDMCP-indirect


When you configure your X terminal to use XDMCP indirect mode, you tell
your X terminal the host name of the login server host. When the X terminal is
booted, it will contact the login server, and the login server will present a list,
through a chooser screen, of other login server hosts on the network. From this
list, the user can select a host, and that host will display a login screen on the
user's X terminal. See your X terminal documentation for information
describing how to configure your X terminal for XDMCP indirect mode.

As with direct mode, most X servers support the-indirect-indirect optionoption, which
causes your X server to contact the login server in XDMCP indirect mode.
# Managing Non-XDMCP Network DisplaysX terminalsnon-XDMCP displays


Older X terminals may not support XDMCP. For the login server to display a
login screen on this type of X terminal, list the X terminal name in theXserversfile.
# Example


The following lines in theXserversfile direct the login server to display a
login screen on two non-XDMCP X terminals,rubyandwolfie:ruby.blackdog.com:0 AcmeXsta foreign
wolfie:0 PandaCo foreign

Since the display is on the network,`display_name`includes the host name as
part of the name. The`display class`can be used to specify resources specific to a
particular class of X terminals. (Your X terminal documentation should tell you
the display class of your X terminal.) The`display_type`offoreigntells the
login server to connect to an existing X server rather than to start its own. In
this case, an`X_server_command`is not specified.
# Controlling Access to the Login Serverlogin serverscontrolling access


By default, any host on your network that has access to your login server host
can request a login screen be displayed. You can limit access to the login server
by modifying theXaccessXaccess filefile.

To modifyXaccess, copyXaccessfrom/usr/dt/configto/etc/dt/config. After modifying/etc/dt/config/Xaccess, tell the
login server to rereadXaccessby typing:/usr/dt/bin/dtconfig -reset

This issues the commandkill -HUP`login server process ID`.
# XDMCP DirectX terminalsXDMCP-direct


When a host attempts to connect to the login server viaXDMCPdirect accessXDMCP-direct, the
host name is compared to theX terminalsXaccess listXaccessentries to determine whether the host
is allowed access to the login server. EachXaccessentry is a host name
including the wildcards*(asterisk) and?(question mark). An*(asterisk)
matches zero or more characters and a?(question mark) matches any one
character. An!(exclamation point) prefacing an entry disallows access, while
no preface allows access.

For example, ifXaccesscontains the following three entries:amazon.waterloo.com

*.dept5.waterloo.com

!*

The first entry allows access to the login server from hostamazon.waterloo.com, the second entry allows access from any host whose
full domain name ends indept5.waterloo.com, and the last entry disallows
access from any other host.
# XDMCP IndirectX terminalsXDMCP-indirect


When a host attempts to connect to the login server via
XDMCP-indirect, the
host name is compared to theXaccessentries to determine whether the host
is allowed access to the login server. EachXaccessentry is similar to the
XDMCP-direct entries, including wildcards, except that each entry is marked
with aCHOOSERstring. For example:XDMCPindirect accessCHOOSER stringdefinitionX terminalsCHOOSER stringamazon.waterloo.com  CHOOSER BROADCAST

*.dept5.waterloo.com CHOOSER BROADCAST

!* CHOOSER BROADCAST

Again, the first entry allows access to the login server from hostamazon.waterloo.com, the second entry allows access from any host whose
full domain name ends indept5.waterloo.com, and the last entry disallows
access from any other host.

One of the following can be after theCHOOSERCHOOSER stringidentifying:

BROADCAST, used in XDMCP-indirectBROADCAST

`list of host names`

BROADCASTtells the login server to broadcast to the login server sub-network
to generate a list of available login server hosts. A list of host names tells the
login server to use that list for the list of available login hosts. For example:amazon.waterloo.com  CHOOSER shoal.waterloo.com alum.waterloo.com

*.dept5.waterloo.com CHOOSER BROADCAST

!* CHOOSER BROADCAST

Ifamazon.waterloo.comconnects via XDMCP-indirect, it will be presented
a list containingshoalandalum. Ifalice.dept5.waterloo.comconnects,
it will be presented with a list of all available login server hosts on the login
server sub-network. Other XDMCP-indirect requests will be denied.

An alternative to specifying a list of host names is to define one or more
macros containing the list of host names. For example:&percnt;list1  shoal.waterloo.com alum.waterloo.com

amazon.waterloo.com CHOOSER &percnt;list1
# Checking for Errorslogin serverstroubleshootingLogin Managererrors


By default, the login server logs errors in theXerrors file/var/dt/Xerrorsfile. To
change this, you can set theDtlogin.errorLogFileresource in theXconfigfile. The directory specified must exist when the login server is
started.

For example, to have the login server log errors in the/var/mylogs/Dterrorsfile, set the following in theXconfigfile:Dtlogin.errorLogFile: /var/mylogs/Dterrors

When the login server is restarted, the login server will log errors to the/var/mylogs/Dterrors fileDterrorsfile. The/var/mylogsdirectory must exist when
the login server is started.
# Stopping the Login Serverlogin serversstopping


To disablelogin serversdisablinglogin server start up when the system is booted, type:/usr/dt/bin/dtconfig -ddtconfig command

This will tell the system not to start the login server when you next reboot.

To Stop the login server by killing the process ID, type:/usr/dt/bin/dtconfig -kill

This issues the commandkill`login server process ID`)

Killing the llogin serverskilling process IDogin server process terminates all user sessions managed by
the login server.

You can also stop the login server by killing the process ID. The login server
process ID is stored in/var/dt/Xpidor in the file specified inXconfigby
theDtlogin.pidFileresource.

If you are logged into the desktop at the time you kill the login server, your
desktop session will immediately terminate.
# The Login Screen


The login screen displayed by the login server is an attractive alternative to the
traditional character-mode login screen and provides capabilities beyond those
provided by a character-mode login.
# Desktop login screen


As with a character mode login, the user enters a user name followed by a
password. If authenticated, the login server starts a desktop session for the
user. When the user exits the desktop session, the login server displays a new
login screen, and the process begins again.

To customize the login screen, you canlogin screencustomizing:

Change the login screen appearance

Configure X server authority

Change the default language

Issue commands prior to display of the login screen

Change the contents of the login screen Language menu

Specify the command to start the user's session

Issue commands prior to the start of the user's desktop session

Issue commands after the user's session ends

Each of these can be done for all displays or on a per-display basis.
# Changing the Login Screen Appearance


To customize thelogin screenchanging appearancelogin screen appearance, you can change the logo or graphic,
the welcome messages, and the fonts.

To modifyXresources, copyXresourcesfrom/usr/dt/config/`language`to/etc/dt/config/`language`. The login screen will reflect any changes the
next time the login screen is displayed. To force a redisplay of a login screen,
select Reset Login Screen from the login screen Options menu.

Attributes of the login screen that can be determined by resource specifications
in theXresourcesXresources filefile include:

Dtlogin*logo*bitmapFileLogin Managerresourceslogin screenresources

Bitmap or pixmap file to display as logo image

Dtlogin*greeting*labelString

Welcome message

Dtlogin*greeting*persLabelString

Personalized welcome message

Dtlogin*greeting*fontList

Font for welcome messages

Dtlogin*labelFont

Font for push buttons and labels

Dtlogin*textFont

Font for help and error messages

Dtlogin*`language`*languageName

Alternate text for locale name`language`
# To Change the Logo


Set theDtlogin*logo*bitmapFileresource inXresources.

The logo can be a color pixmap or a bitmap file.

The following example uses theMylogobitmap as the logo:Dtlogin*logo*bitmapFile: /usr/local/lib/X11/dt/bitmaps/Mylogo.bm
# To Change the Welcome Messagelogin screenchanging the welcome messagelogin screengreetingwelcome messagechanging


By default, the login server displays the messageWelcometohost name`on the login screen. To change this
message:welcome messagedefault

Set theDtlogin*greeting*labelStringresource inXresources.

The value of thelabelStringresource can contain &percnt;`LocalHost`&percnt;, which
will be replaced by the login server host name, and &percnt;`DisplayName`&percnt;, which
will be replaced by the X server display name.

The following example changes the welcome message toHere's`host name`!:Dtlogin*greeting*labelString: Here's &percnt;LocalHost&percnt;!

Once the user name has been entered, the login server displays the messageWelcome`username`by default. You can change this message by setting theDtlogin*greeting*persLabelStringresource inXresources. The value
of thepersLabelStringcan contain &percnt;s, which will be replaced by the`username`.

The following example changes the personalized welcome message toHello`username`.Dtlogin*greeting*persLabelString: Hello &percnt;s
# To Change the Fontslogin screenfonts


You can change the fonts used on the login screen by setting one of the
following font resources inXresources:Xresources file

To list the available fonts, type:xlsfonts [-`options`] [-fn`pattern`]

Dtlogin*greeting*fontList

Font for welcome messages

Dtlogin*labelFont

Font for push buttons and labels

Dtlogin*textFont

Font for help and error messages

The following example uses a large font for the welcome message (the value
you specify must be contained on one line):Dtlogin*greeting*fontList: -dt-interface system-medium-r-normal-xxl*-*-*-*-*-*-*-*-*:
# To Provide Alternate Text to Display for Each Languagelogin screenlocalizinglocalizationlogin screen


To display per-locale text on the login screen Language menu instead of the
default display of the locale name, modify theDtlogin*`language`*languageNameresource name resource inXresources:Dtlogin*En_US*languageName: American

The textAmericanwill now be displayed rather than the locale nameEn_US.
# Changing the Login Screen Behaviorlogin screenchanging behavior


To customize the login screen behavior, you can modify resources specified in
theXconfigfile.

To modifyXconfig, copyXconfigfrom/usr/dt/configto/etc/dt/config. After modifying/etc/dt/config/Xconfig, tell the
login server to rereadXconfigby typing:/usr/dt/bin/dtconfig -reset

This which issues the commandkill-HUP`login server process ID`)

Login ManagerresourcesResources specified in theXconfigXconfig filesetting resources infile include:

Dtlogin*authorize

Xaccess file specification

Dtlogin*environment

X server environment

Dtlogin*language

Default language

Dtlogin*languageList

Language list for login screen Language menu

Dtlogin*resources

Xresourcesspecification

Dtlogin*setup

Xsetupfile specification

Dtlogin*startup

Xstartupfile specification

Dtlogin*session

Xsessionfile specification

Dtlogin*failsafeClient

Xfailsafescript specification

Dtlogin*reset

Xresetscript specification

Dtlogin*userPath

PATH forXsessionandXfailsafe

Dtlogin*systemPath

PATH forXsetup,XstartupandXfailsafe

Dtlogin*systemShell

SHELL forXsetup,XstartupandXfailsafe

Dtlogin.timeZone

TZ for all scripts
# Changing the Login Screen Behavior Per Displaylogin screendisplay-dependent behaviormultiple displaysLogin Manager


In the examples below, changing anXconfigresource changes the login
screen behavior for all displays. The resources listed with an * (asterisk) can be
specified on a per-display basis. This enables you to specify custom login
screen behavior for certain displays. To specify a resource for a particular
display, the resource is specified asDtlogin*`displayName`*`resource`. For
example, if you would like to turn off user based access control for displayexpo:0but leave it on for other displays, you would specify:Dtlogin*expo_0*authorize: False

Any special character in the display name, such as a: (colon) or.
(period), is replaced by an _ (underbar).
# Changing the X Server Accesslogin screenX server accessX serverchanging access


By default, the login server allows X server access control on a per user basis
and is based on authorization data stored and protected in the`HomeDirectory`/.Xauthorityfile. Only users who can read this file are
allowed to connect to the X server. Generally, this is the preferred method of X
server access control.

An alternative to user-based access control is host-based access control. Using
this method, if a host is granted access to the X server, any user on that host is
allowed to connect to the X server. Reasons to use host-based control include:

Older R2 and R3 X clients will not be able to connect to an X server using
user-based access control.

On unsecured networks, a snooper may be able to intercept the
authorization data passed between the X client and X server on the network.

TheXconfig Dtlogin*authorize resourceauthorizeresource tells the login server to use
user-based X server access control. To use host-based access control, change the
authorize resource value toFalse, for example:Dtlogin*authorize: False
# To Change the X Server EnvironmentX serverchanging environmentlogin screenX server environment


If you want to provide the X server with one or more environment variables
and values when started by the login server, you can specify them using theDtlogin*environmentresource inXconfig. For example:Dtlogin*environment: VAR1=foo VAR2=bar

will make the variablesVAR1andVAR2available to the local X server process.
These variables will also be exported to theXsessionandXfailsafescripts.
# To Change the Default Languagelogin screenchanging default language


When the user logs in to the desktop from the login screen, the user session is
run under the locale selected from the Language submenu of the Options
menu. If the user does not select a language, the login server default language
is used. You can control the value of the default language by setting theDtlogin*languageDtlogin*language resourceresource inXconfig. For example:Dtlogin*language: Ja_JP

Check your system documentation to determine the languages installed on
your system.
# To Change the Content of the Login Screen Language Menulogin screenchanging content of language menuLanguage menu, customizing


By default the login server creates the login screen Language menu containing
a list of all locales installed on the system. When the user selects a locale from
the login screen language list, the login server will redisplay the login screen in
the selected locale. When the user subsequently logs in, the login server will
start a desktop session for the user in that locale.

You can specify your own list of languages by modifying theDtlogin*languageListresource inXconfig:Dtlogin*languageList: En_US De_DE

The login server now displays onlyEn_USandDe_DEin the login screen
Language menu.
# Issuing Commands Before the Login Screen AppearsLogin Managerissuing commands


After the X server has started but before the login screen appears, the login
server runs theXsetupscript.XsetupXsetup fileruns with root authority and issues
commands needing to be run before the display of the login screen.

To modifyXsetup, copyXsetupfrom/usr/dt/configto/etc/dt/config. The next time the login screen is displayed, the modifiedXsetupwill be run.
# Issuing Commands Before Starting the User Session


After the user enters the user name and password and they are authenticated,
but before the user session is started, the login server runs theXstartupscript.XstartupXstartup fileruns with root authority and issues commands needing to be
run as root prior to the user session start.

To modifyXstartup, copyXstartupfrom/usr/dt/configto/etc/dt/config. The next time the user logs in, the modifiedXstartupwill
be run