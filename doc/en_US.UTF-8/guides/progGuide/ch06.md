
# Integrating with the Workspace Manager


TheWorkspace Managerintegrating withWorkspace Manager provides the means for an application to manage its
windows within the desktop's multiple workspace environment. An
application can perform four major tasks by communicating with the
Workspace Manager:

Place the application's windows in one or more workspaces

Identify the workspaces in which the application's windows are located

Prevent the application's windows from moving to another workspace

Monitor changes to the workspaces, such as when a user switches from one
workspace to another

Normally, Session Manager will get your application main window into the
right workspace without your intervention. However, if your application has
multiple top-level windows, you should use the Workspace Manager API to
figure out where your windows are and save this data as part of your session
state.

Seefor details on saving
application-related information between sessions.










# Communicating with theWorkspace Managercommunicating withWorkspace Manager


An application communicates with the Workspace Manager by using functions
provided by the desktop. These functions allow you to quickly and easily
perform a variety of tasks associated with workspace management. The
following is a list of these functions:

DtWsmAddCurrentWorkspaceCallback

DtWsmAddWorkspaceFunctions

DtWsmAddWorkspaceModifiedCallback

DtWsmFreeWorkspaceInfo

DtWsmGetCurrentBackdropWindows

DtWsmGetCurrentWorkspace

DtWsmGetWorkspaceInfo

DtWsmGetWorkspaceList

DtWsmGetWorkspacesOccupied

DtWsmOccupyAllWorkspaces

DtWsmRemoveWorkspaceCallback

DtWsmRemoveWorkspaceFunctions

DtWsmSetCurrentWorkspace

DtWsmSetWorkspacesOccupied

Segments of code from two demo programs (occupy.candwsinfo.c)
illustrate the use of these functions. Listings foroccupy.c, wsinfo.c, and
makefiles for several brands of workstations are in the directory/usr/dt/examples/dtwsm. See the applicable man page for more
information on each function.
# Placing an Application Window inworkspaceplacing application window inWorkspaces


An application can place its windows in any or all of the existing workspaces.DtWsmOccupyAllWorkspacesplaces the windows in all currently defined
workspaces, whileDtWsmSetWorkspacesOccupiedplaces the windows in
all workspaces named in a list that is passed to the function.
# To Place an Application Window in All Workspaces


UseDtWsmOccupyAllWorkspacesDtWsmOccupyAllWorkspaces.

Inoccupy.c, the callbackallWsCBfor the Occupy All Workspaces push
button calls this function.DtWsmOccupyAllWorkspaces (XtDisplay(toplevel),
                          XtWindow(toplevel));

where:

XtDisplay(toplevel)is the X display.

XtWindow(toplevel)is the window to be placed in all workspaces.

See theDtWsmOccupyAllWorkspacesman page for more information on this
function.
# To Place an Application Window in Specified Workspaces


UseDtWsmSetWorkspacesOccupiedDtWsmSetWorkspacesOccupied.

Inoccupy.c, the callbacksetCBfor the Set Occupancy push button calls
this function.DtWsmSetWorkSpacesOccupied (XtDisplay(toplevel),
                            XtWindow(toplevel), paWsSet, numSet);

where:

XtDisplay(toplevel)is the X display.

XtWindow(toplevel)is the window to be placed in the workspaces.

paWsSetis a pointer to a list of workspace names that have been
converted to X atoms.

numSetis the number of workspaces in the list.

See theDtWsmSetWorkspacesOccupiedman page for more information on
this function.
# IdentifyingworkspaceidentifyingWorkspaces Containing the Application Windows


The functionDtWsmGetWorkspacesOccupiedreturns a list of the
workspaces in which a specified application window resides. Inoccupy.c, the
procedureShowWorkspaceOccupancycalls this function. Based on the results
of this call,ShowWorkspaceOccupancychanges the appearance of the toggle
buttons that represent the workspaces. A check mark appears on every toggle
button in whose workspace the application window resides.
# To Identify Workspaces That Contain the Application Window


UseDtWsmGetWorkspacesOccupiedDtWsmGetWorkspacesOccupied.rval = DtWsmGetWorkspacesOccupied(XtDisplay(toplevel)
             XtWindow(toplevel), &paWsIn, &numWsIn);

where:

XtDisplay(toplevel)is the X display.

XtWindow(toplevel)is the window to be searched for in the
workspaces.

paWsInis the address of a pointer to a list of workspace names that have
been converted to X atoms.

numWsInis the address of an integer into which the number of
workspaces in the list is placed.

After this call, loops are set up to compare the list of workspaces (found in the
procedureSetUpWorkspaceButtonsbyDtWsmGetWorkspaceList) with
the list of workspaces in which the application window was found to reside.
The toggle button resourceXmNsetis set to True for each toggle button that
represents a workspace in which the application window resides.
# Preventingworkspacepreventing application movementApplication Movement Among Workspaces


The functionDtWsmRemoveWorkspaceFunctionsDtWsmRemoveWorkspaceFunctionsprevents an application
from:

Switching from one workspace to another

Occupying all workspaces

Being removed from the current workspace

DtWsmRemoveWorkspaceFunctionsdoes this by making that portion of the
desktop Workspace Manager (dtwm) window menu inactive. The application
should callDtWsmRemoveWorkspaceFunctionsbefore its top-level window
is mapped becausedtwmonly checks workspace information at the time it
manages the application's top-level window. If you need to callDtWsmRemoveWorkspaceFunctionsafter the application's top-level window
is managed, then you must first call the Xlib functionXWithdrawWindow, callDtWsmRemoveWorkspaceFunctions,and then callXMapWindowto remap
the top-level window.
# To Prevent Movement to Another Workspace


UseDtWsmRemoveWorkspaceFunctionsDtWsmRemoveWorkspaceFunctions.DtWsmRemoveWorkspaceFunctions(XtDisplay(toplevel),
                              XtWindow(toplevel));

where:

XtDisplay(toplevel)is the X display.

XtWindow(toplevel)is the window for which workspace movement is
to be prevented.
# Monitoringworkspacemonitoring changesWorkspace Changes


You can monitor workspace changes by using either or both of the following
functions:

DtWsmAddCurrentWorkspceCallbackDtWsmAddCurrentWorkspaceCallback

DtWsmWorkspaceModifiedCallbackDtWsmWorkspaceModifiedCallback

DtWsmAddCurrentWorkspaceCallbackregisters an application callback to
be called whenever the Workspace Manager is switched to a new workspace.
See theDtWsmAddCurrentWorkspaceCallback(3) man page for more
information.

DtWsmWorkspaceModifiedCallbackregisters an application callback to be
called whenever a workspace is added, deleted, or changed. See theDtWsmWorkspaceModifiedCallback(3) man page for more information.
# To Monitor Workspace Switching


UseDtWsmAddCurrentWorkspaceCallbackDtWsmAddCurrentWorkspaceCallback.

In the demo programwsinfo.c, this function is called after the top-level
widget is realized.DtWsmAddCurrentWorkspaceCallback (toplevel, wschangecb, NULL);

where

toplevelis the application's top level widget.

wschangecbis the name of the function to be called.

NULLis the parameter for client data to be passed to the callback. In this
case, no data is passed.
# To Monitor Other Workspace Changes


UseDtWsmWorkspaceModifiedCallbackDtWsmWorkspaceModifiedCallback.DtWsmWorkspaceModifiedCallback (toplevel, wschangecb, NULL);

where:

toplevelis the application's top-level widget.

wschangecbis the name of the function to be called.

NULLis the parameter for client data to be passed to the callback. In this
case, no data is passed.