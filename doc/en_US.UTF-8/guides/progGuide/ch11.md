Integrating with Information Managerinformation manager integrationgeneral informationon-line help integrationgeneral informationdtinfogeneral informationThedtinfofacility enables CDE users
to browse and search large collections of SGML-formatted
on-line documentation containing graphics and hypertext links.
These collections are referred to as information libraries.
An information library consists of a collection of book cases,
each of which contains a collection of books.The information manager is available on the CDE desktop from a number of locations.dtinfois started automatically by the session manager as part of the initial
user session.
Information libraries are available as DtInfoLib objects on the
desktop from File Manager.
Thedtinfoapplication can be started directly from the front panel
or from theInfo Manageraction in theDesktop_Appsapplication group inApplication Manager.A CDE application calls a small API to integrate
thedtinfobrowser and so enable access to
information libraries. Shoulddtinfobe unsuited to your application
environment, you can extend it or replace it with your own browser,
using the dtinfo database engine API.
Following some general discussions of the dtinfo facility, this chapter
summarizes both thedtinfoAPI and thedtinfodatabase engine API.Server Architecturedtinfoserver architectureInformation management in CDE is based on a server architecture.
This means that only one instance of the main book list window fordtinfois normally displayed at any time within a CDE desktop session.
User or application requests for new document library connections within
the session are handled by the one instance, maximizing the user's
ability to organize and search on-line documentation, and minimizing
system response time.An exception to this behavior occurs when the user
or application requests access to an infolib that
is not accessible from any host on which an existingdtinfoinstance is running. When this situation occurs,
the desktop mechanisms automatically launch a new instance
ofdtinfoon a host that has access to the requested
information library. A similar situation occurs when the
user or application requests access to an infolib in a
locale that is different from those used by any currently
executingdtinfoprocess. In this case, the desktop mechanisms
launch a new instance ofdtinfoon the same host but in the new
locale. If both conditions apply, the newdtinfoinstance is
started on a host that has access to the information library
in the requested locale.It is possible to create multiple instances on a given execution host in a given
locale by invokingdtinfofrom the command line. In this case,dtinfodoes not take advantage of the ToolTalk mechanisms
to ensure that a single instance only is running on the desktop.Search Pathdtinfosearch pathdtinfoenvironment variablesTheDTINFOLIBSEARCHPATHandDTINFOLIBDEFAULTenvironment
variables are defined at installation time bydtsearchpath.
The infolib search path directs the desktop to search
specified locations for information libraries that are to be
be registered on your system.Default Infolib Search PathThe default infolib search path includes system-wide and
built-in locations:System-wide location &mdash/etc/dt/infolib/%L/%I.dtiBuilt-in location &mdash/usr/dt/infolib/%L/%I.dtiThe default language is C. The value ofDTINFOLIBDEFAULTis substituted for %I. The initial default value forDTINFOLIBDEFAULTiscde.How the Application Search Path Affects the Infolib Search PathWhen a location is added to the application search path, the appropriate
infolib subdirectory is automatically added to the infolib search path.
For example, if the application serverhosta:is added to the
application search path, the directoryhosta:/etc/dt/infolib/%Lis automatically added to the infolib search path.Infolib Search Path Environment VariablesThe infolib search path is assembled from the built-in locations and the following input variables:DTSPSYSINFOLIB&mdash System-wide infolib search path input variableDTSPUSERINFOLIB&mdash Personal infolib search path input variableUse these input variables to specify locations outside the application search path.
The assembled database search path is specified by the output variableDTINFOLIBSEARCHPATH.Syntax for the Infolib Search Path Input VariablesThe syntax for the variablesDTSPSYSINFOLIBandDTSPUSERINFOLIBis:VARIABLE=location [,location...]wherelocationcan have the syntax,/path,
which specifies a directory on the local (session server) system. Use this syntax to add a local directory.
To specify a location on another system, use its network file name &mdash for example,/nfs/servera/projects/infolib.How the Infolib Search Path Is AssembledThe value of the infolib search path
(DTINFOLIBSEARCHPATH) is created by assembling the following locations,
listed in order of precedence:Locations specified using theDTSPUSERINFOLIBvariableLocations derived from theDTSPUSERAPPHOSTSvariableThe default location:/etc/dt/infolib/%L/%I.dtiLocations specified using theDTSPSYSINFOLIBvariableLocations derived from theDTSPSYSAPPHOSTSvariable/usr/dt/infolib/%L/%I.dtiWorkspace Managementdtinfoworkspace managementThe browser is workspace-aware to provide
predictable behavior regardless of the workspace
in which it is running at the time of a connection request.
Windows are mapped to workspaces according to the following rules:When primary windows are mapped to a new workspace,
all associated secondary windows are also mapped to the new workspaceWhen secondary windows are mapped to a new workspace, the
associated primary window and all its associated secondary
windows are also mapped to the new workspaceWhen a primary window is mapped to a new workspace, any
other primary windows associated with the application remain in the current workspaceTheDtInfo_LoadInfoLibandDtInfo_ShowInfoAtLocmessages
cause the browser window to be mapped to the
current workspace. The user can also map application
windows to a new workspaces through thedtwmmenu.Application Linkagedtinfoapplication linkageApplications are provided with a means to
activatedtinfofor specific
on-line documentation display purposes. One use of
thedtinfoExternal API might be an application that
manages or automates information display or navigation.Connecting todtinfofrom an application (using an explicit locator value with theDtShowInfoAtLocaction) displays the browser if it is not already visible.
The following situations vary this result:Only an infolib path is specified for the
browser to access (using theDtLoadInfoLibaction), in which case
only the topdtinfo(booklist) window is presented,
including the newly loaded infolib's bookcases.dtinfois active in the workspace, but the
Book List window and/or a browser is iconified.The Book List window and any "pinned" browser window(s)
remains iconified. If there is no unpinned browser window
(iconified or not), a new browser window is presented for the requested topic.If an iconified Browser window is not pinned, it is mapped
and the requested topic supplants the previous topic.The desktop and adtinfoinstance were started on one host
(host1) in a locale (locale1), but an application that usesdtinfois started from a remote shell on a different (host2) and/or a different locale
(locale2) during the same CDE session.The request from the application is examined by alldtinfoprocesses in the current session to determine if it can be processed.
For adtinfoprocess to accept the request it must
be running in the same localeandbe able to access the specified information libraries.If no such process exists, an independent copy of the browser is started onhost2inlocale2. The original message is forwarded to the new
instance for processing.ToolTalk MessagesdtinfoToolTalk messagesThedtinfocommand registers with ToolTalk to
handle the following messages:DtInfo_LoadInfoLib(scope`TT_SESSION`)DtInfo_ShowInfoAtLoc(scope`TT_SESSION`)Adtinfoinstance observes the following messages:DtInfo_Quit(scope`TT_SESSION`)The Information Management system also defines a ptype "DtInfo"
that is used to launch adtinfoprocess if
there is not a currently availabledtinfoprocess that can handle a ToolTalk request.Generalized Locator Formatdtinfoinformation locator formatFor the purpose of addressing infolibs as document collections
with external navigation references, a generalized locator format
is defined for use in applications and by the end-user. This
mechanism is more precise than those that operate on the`DtInfoLib`level. This mechanism can be
used by applications that want to integrate their
on-line documentation tightly, within the action system, or for printing
specific sections from a command line.The following BNF defines the syntax of a generalized locator format string:<GLF> ::= <MMDB> | <ULV> | <URI>
<MMDB> ::= mmdb:  <IBL> | <IB> | <IL> | <INFOLIB> | <BL> | <BOOKCASE> |
           <LOCATOR>
<IBL> ::= <INFOLIB> & <BOOKCASE> & <LOCATOR>
<IB> ::= <INFOLIB> & <BOOKCASE>
<IL> ::= <INFOLIB> & <LOCATOR>
<BL> ::= <BOOKCASE> & <LOCATOR>
<INFOLIB> ::= INFOLIB= <NAME>
<BOOKCASE> ::= BOOKCASE= <NAME>
<LOCATOR> ::= LOCATOR= <ULV> <NAME>
<ULV> ::= uuid_ | xsm_ | isbn_
<NAME> ::= <CHAR> { <CHAR>)
<CHAR> ::= a-z | A-Z | 0-9 | <SPECIAL_CHAR>
<SPECIAL_CHAR> ::= everything but ":" and "&"
<URI> ::= Uniform Resource Identifier (as defined by the Web Consortium)As shown above, there are several reserved terms that are used to
identify locator format, includinguuid(for DCE-style Universal Unique ID),xsm(for XSession Manager style Unique ID), andisbn(for
International Standard Book Number). Of these, onlyxsmis
supported directly in the sample implementation.Summary of the DtInfo APIdtinfoAPIFollowing is a summary of the Desktop Information Manager API.DtInfoLibDtInfoLibis a desktop object that represents a collection
of bookcases of documents that can be accessed
through the Information Manager. DtInfoLib data
criteria and data attributes are identified for
use by desktop facilities. These are part of the CDE built-in
data types.DtInfoShowTopicThis is a C API callable by an application
to provide the user access to body of information
at a specific location. The location may
identify anything from the top of a bookcase
to a specific topic or to a section within a bookcase.
Targets within sections are also possible, where
they have been given externally unique link IDs
during construction of the data.DtActionInvokeThis function displays a specified topic underdtinfousing the available CDE desktop
action API from a desktop application.
It invokes (or connects to)dtinfo. The anchor point may be as
broad as the top of a bookcase, or as fine as a specific
topic (section). Targets within sections are also possible,
where they have been given externally unique link IDs during
construction of the data.BrowseTheBrowsefor an infolib is a remap
to theDtLoadInfoLibaction.OpenTheOpenaction is used to invokeDtLoadInfoLibfor the
associatedDtInfoLibobject.DtShowInfoAtLocTheDtShowInfoAtLocaction distributes a ToolTalk message for
the browser to display a specific point in the infolib.
A client application requests thatdtinfodisplay a particular
section of data, or topic, by invoking this action.
The browser is started if it is not already running.
This corresponds to invoking thedtinfocommand with
the-sectoption from the command line.DtLoadInfoLibTheDtLoadInfoLibaction distributes a ToolTalk message
fordtinfoto load a specific infolib.
A client application can request thatdtinfoload a particular
information library by invoking this action. The browser is started if it is not
already running. This corresponds to invoking thedtinfocommand with the-loption from the command line.DtInfo_LoadInfoLibTheDtInfo_LoadInfoLibToolTalk operation is used to load a specified infolib.
A client application can request thatdtinfoload a particular
information library by sending this request. The browser is started if it is not
already running. This corresponds to invoking thedtinfocommand with the-loption from the command line.DtInfo_ShowInfoAtLocA client application requests thatdtinfodisplay a particular
section of data, or topic, by sending this process-oriented ToolTalk message.
ToolTalk starts the browser if it is not already running. This
corresponds to invoking thedtinfocommand with the-sectoption from the command line.DtInfo_QuitThis is a process-oriented ToolTalk message for observers interested only
in the status ofdtinfo. The browser posts this message
when it exits normally. It is not sent for desktop
session-wide exit.Summary of the DtInfo Database Engine APIdtinfodatabase engine APIThis section summarizes the application programming interface to the DtInfo Database Engine.
The DtInfo Database Engine stores and provides access to the on-line document data for the
DtInfo.FunctionsDtMmdbInitPrepare the database engine to provide access service.DtMmdbQuitFree memory resource allocated by the database engine and ask the engine to stop service.DtMmdbOpenInfoLibObtain an infolib descriptor.DtMmdbInfoLibGetInfoGet descriptive information about an infolib.DtMmdbInfoLibFreeInfoFree space occupied by an infolib structure.DtMmdbCloseInfoLibDeclare that the infolib is no longer needed.DtMmdbGetBookCaseByNameObtain a descriptor to a bookcase identified by name.DtMmdbGetBookCaseByIndexObtain a descriptor to a bookcase identified by index.DtMmdbGetBookCaseByLocObtain a descriptor to a bookcase identified by location.DtMmdbGetBookCaseByLocsObtain a list of bookcase descriptors.DtMmdbBookCaseGetInfoGet information about a bookcase.DtMmdbBookCaseFreeInfoFree space occupied by a bookcase information structure.DtMmdbSectionGetLocGet a section's locator.DtMmdbSectionGetLongTitleReturn the long title of the section, given its identifier.DtMmdbSectionGetShortTitleGet a section's short title.DtMmdbSectionGetDataGet a section's data.DtMmdbSectionGetDataSizeGet the number of bytes for the section's data.DtMmdbSectionGetTocLocGiven a section's identifier, get the locator of its TOC section.DtMmdbSectionGetBookIdGiven a section's identifier, get the DtInfo Database object identifier of the book
in which this section appears.DtMmdbSectionGetStyleSheetIdGiven a section's identifier, get the DtInfo Database object Identifier of the stylesheet applicable to this section.DtMmdbTocGetParentIdGet the DtInfo Database object identifier of the section that is the parent of this section.DtMmdbTocGetChildIdsGet a list of DtInfo Database object identifiers for the child sections.DtMmdbTocGetNumOfChildrenGet the number of child sections.DtMmdbLocatorGetSectionLocGet the locator of a section, given the locator of a component inside the section.DtMmdbLocatorGetSectionObjectIdGet the DtInfo Database object identifier of the section, given the locator of a component inside the section.DtMmdbGraphicGetDataObtain the data of a graphic object.DtMmdbGraphicGetInfoObtain the information of a graphic object.DtMmdbStylesheetGetNameObtain the name of a stylesheet object.DtMmdbStylesheetGetDataObtain the data of a stylesheet object.DtMmdbBookGetTocObjectIdObtain the locator of a TOC section.DtMmdbBookGetShortTitleObtain the short title of a book.DtMmdbBookGetLongTitleObtain the long title of a book.DtMmdbBookGetSeqNumObtain the sequence number of a book.DtMmdbBookGetLicenseObtain the license terms of a book.DtMmdbBookGetTabListObtain the list of tabbed sections in the book.DtMmdbDlpGetPrevSectionIdObtain the DtInfo Database object identifier of the previous section, given the identifier of this section.DtMmdbDlpGetNextSectionIdObtain the DtInfo Database object identifier of the next section.DtMmdbFreeHandleFree memory resource used by a DtMmdbHandle.DtMmdbFreeHandleListFree memory resource used by a DtMmdbHandle array, including the contained handlers.DtMmdbFreeGraphicInfoFree memory used by a DtMmdbGraphicInfo structure.Data Structuresdtinfodatabase engine data structuresDtMmdbInfoLibContains information about an information library (infolib).DtMmdbBookCaseContains information about a bookcase.DtMmdbHandleContains information about the identifier of a DtInfo object.DtMmdbInfoRequestDescribes a request to get information from the DtInfo Database Engine.DtMmdbGraphicInfoDescribes various features of a graphic object.